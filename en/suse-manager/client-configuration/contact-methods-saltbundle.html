<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>Salt Bundle
     | SUSE Manager 4.3 Documentation</title>    <link rel="canonical" href="https://documentation.suse.com/suma/4.3/en/suse-manager/client-configuration/contact-methods-saltbundle.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/search.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../_/css/font-styles.css">
<link rel="stylesheet" href="../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../_/css/site-extra.css">
<!-- <link rel="preconnect" href="https://fonts.gstatic.com"> -->
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js"
        type="text/javascript"></script>
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
   <div class="navbar-brand">
            <div class="navbar-item">
                <a class=" navbar-logo" href="https://documentation.suse.com/suma/"><img
                        class="logo" src="../../_/img/logo.svg"/></a>
            </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
     <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
              <div class="navbar-item has-dropdown is-hoverable">
                  <div class="navbar-link"><img src="../../_/img/resources.png" class="langIcon Resurces" alt="Resources" title="Resources"></div>
                  <div class="navbar-dropdown">
                      <!--  <div class="navbar-item"><strong>Resources</strong></div> -->
                      <a class="navbar-item" href="https://github.com/uyuni-project/uyuni-docs"><i
                              class="fab fa-github"></i>&nbsp;uyuni-docs</a>
                      <a class="navbar-item" href="https://github.com/uyuni-project/uyuni-docs/issues"><i
                              class="fab fa-github"></i>&nbsp;Report Issue</a>
                      <a class="navbar-item"
                         href="https://github.com/uyuni-project/uyuni-docs/wiki"><i
                              class="fas fa-user-edit"></i>&nbsp;Contribute</a>
                  </div>
              </div>
                           <div class="navbar-item has-dropdown is-hoverable">
                 <div class="navbar-link"><img src="../../_/img/language.png" class="langIcon Language" alt="Language" title="Language"></div>
                 <div class="navbar-dropdown">
                     <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
                     <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)"><img src="../../_/img/engFlag.svg" class="langIcon english">&nbsp;English</a>
                     <!-- LANGUAGESELECTOR -->
                     <a role="button" class="navbar-item" id="ko" onclick="selectLanguage(this.id)"><img src="../../_/img/koFlag.svg" class="langIcon korea">&nbsp;한국어</a>
                     <a role="button" class="navbar-item" id="ja" onclick="selectLanguage(this.id)"><img src="../../_/img/jaFlag.svg" class="langIcon japan">&nbsp;日本語</a>
                     <a role="button" class="navbar-item" id="zh_CN" onclick="selectLanguage(this.id)"><img src="../../_/img/china.svg" class="langIcon china">&nbsp;中文</a>
                 </div>
             </div>
                
          </div>
      </div>
      <a id="twitter-link" class="navbar-item" href="https://twitter.com/susemanager">
          <span class="icon">
            <svg aria-hidden="true" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 512 512">
              <path fill="#57aaee"
                    d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
            </svg>
          </span>
      </a>
   <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="suse-manager" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">SUSE Manager 4.3 Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../common_gfdl1.2_i.html">License</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/specialized-guides-overview.html">Specialized Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/overview.html">Public Cloud Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Generic Public Cloud</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/setup.html">Initial Setup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/clients.html">Client Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PAYG Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-overview.html">Pay-as-you-go Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-benefits.html">Benefits of PAYG</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PAYG on AWS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-faq.html">PAYG FAQ on AWS</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-country-listing.html">Supported Country List</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-aws-requirements.html">SUSE Manager AWS requirements</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-find-the-aws-image.html">Find the Image</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-configure-the-image.html">Configure the Image on EC2</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-start-the-image.html">Start the Instance</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-initial-setup.html">Initial Setup</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-start-the-server.html">Start the Server</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../specialized-guides/public-cloud-guide/payg/payg-webui-configuration.html">WebUI Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/salt/salt-overview.html">Salt Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-terminology.html">Terminology</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-command.html">Salt Command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-useful-commands.html">Common Salt Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-states-and-pillars.html">Salt States and Pillars</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-gpg-encrypted-pillars.html">GPG Encrypted Pillars</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-custom-states.html">Custom Salt States</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-file-locations.html">File Locations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-gitfs.html">GitFS Fileserver Backend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-yomi.html">Install Using Yomi</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-config-modules.html">Configuration Modules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/salt/salt-formulas-intro.html">Salt Formulas</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formulas-by-product.html">Formulas provided by SUSE Manager</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-bind.html">Bind Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-branchnetwork.html">Branch Network Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-dhcpd.html">DHCPd Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-imagesync.html">Image Sync Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-monitoring.html">Monitoring Formulas</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-pxe.html">PXE Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-saltboot.html">Saltboot Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-tftpd.html">TFTPd Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-vsftpd.html">VsFTPd Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formula-yomi.html">Yomi Formula</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/salt/salt-formulas-custom.html">Custom Salt Formulas</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-ssh.html">Salt SSH</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-rate-limiting.html">Rate Limiting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/salt/salt-scaling-minions.html">Scaling Minions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/large-deployments/overview.html">Large Deployments Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/large-deployments/hardware-reqs.html">Hardware Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/large-deployments/single-server.html">Single Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/operation-reqs.html">Operation Requirements</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/large-deployments/multi-server.html">Multiple Servers with Hub</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/hub-reqs.html">Hub Operation Requirements</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/hub-install.html">Hub Installation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/hub-api.html">Hub API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/hub-namespaces.html">Hub Namespaces</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/hub-auth.html">Hub Authentication</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../specialized-guides/large-deployments/hub-reporting.html">Hub Reporting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/large-deployments/retail-large-scale.html">Large Retail Environments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/large-deployments/tuning.html">Tuning Large Installations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text">xref:large-deployments/monitoring.adoc[Monitoring Large Scale Deployments</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../specialized-guides/qs-sap/overview.html">Quick Start: SAP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/qs-sap/prepare-server.html">Prepare Server</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/qs-sap/prepare-clients.html">Prepare Clients</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../specialized-guides/qs-sap/configure.html">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE Manager 4.3 Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">SUSE Manager 4.3 Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">SUSE Manager 4.3 Documentation</a></li>
    <li><a href="contact-methods-saltbundle.html">Salt Bundle</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Salt Bundle</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_salt_bundle">1. What is Salt Bundle?</a></li>
<li><a href="#_client_registration_with_salt_bundle_as_a_minion">2. Client Registration with Salt Bundle as a Minion</a>
<ul class="sectlevel2">
<li><a href="#contact-methods-saltbundle-using">2.1. Using the Salt Bundle with the Salt Minion</a></li>
<li><a href="#_switching_from_salt_minion_to_salt_bundle">2.2. Switching from Salt Minion to Salt Bundle</a></li>
</ul>
</li>
<li><a href="#_salt_ssh_with_the_salt_bundle">3. Salt SSH with the Salt Bundle</a></li>
<li><a href="#_extend_salt_bundle_with_python_packages_using_pip">4. Extend Salt Bundle with Python packages using pip</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_what_is_salt_bundle"><a class="anchor" href="#_what_is_salt_bundle"></a><a class="link" href="#_what_is_salt_bundle">1. What is Salt Bundle?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Salt Bundle is a single binary package containing Salt Minion, Python 3, required Python modules, and libraries.</p>
</div>
<div class="paragraph">
<p>The Salt Bundle is shipped with Python 3 and all the requirements for Salt to run. Thus Salt Bundle does not use the Python version install on the client as system software.
The Salt Bundle can be installed on clients that do not meet the requirements for a given Salt version.</p>
</div>
<div class="paragraph">
<p>It is also possible to use the Salt Bundle on systems that run a Salt Minion connected to a Salt Master other than the SUSE Manager Salt Master.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_client_registration_with_salt_bundle_as_a_minion"><a class="anchor" href="#_client_registration_with_salt_bundle_as_a_minion"></a><a class="link" href="#_client_registration_with_salt_bundle_as_a_minion">2. Client Registration with Salt Bundle as a Minion</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The registration method with the Salt Bundle is the recommended registration method.
This section explains the advantages and limitations of the current implementation.
The Salt Bundle is provided as the <code class="package">venv-salt-minion</code> that consists of Salt, Python 3, and the Python modules Salt depends on.
Bootstrapping with Web UI is using Salt Bundle as well, so bootstrapping with Web UI is not Python dependant.
Using the Salt Bundle, it is no longer needed that the client provides any Python interpreter or modules.</p>
</div>
<div class="paragraph">
<p>If you bootstrap new clients, registration with the Salt Bundle is the default method.
You can switch existing clients to the Salt Bundle method.
If you switch, the <code class="package">salt-minion</code> package and its dependencies will stay installed.</p>
</div>
<div class="sect2">
<h3 id="contact-methods-saltbundle-using"><a class="anchor" href="#contact-methods-saltbundle-using"></a><a class="link" href="#contact-methods-saltbundle-using">2.1. Using the Salt Bundle with the Salt Minion</a></h3>
<div class="paragraph">
<p>The Salt Bundle can be used with the Salt Minion managed by the Salt Master other than SUSE Manager Server at the same time.
If the Salt Bundle is installed on a client SUSE Manager Server will manage the configuration files of the Salt Bundle, the configuration files of <code class="literal">salt-minion</code> will not be managed in this case.
For more information, see <a href="registration-cli.html#_salt_bundle_configuration" class="xref page">Salt Bundle configuration</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>To bootstrap a client with the Salt Minion managed by the Salt Master other than SUSE Manager Server it is recommended to use <code class="command">mgr-bootstrap</code> <code class="option">--force-bundle</code> when generating the bootstrap script, or to set <code class="option">FORCE_VENV_SALT_MINION</code> to <code>1</code> in the bootstrap script.</p>
</li>
<li>
<p>For bootstrapping with Web UI <code class="literal">mgr_force_venv_salt_minion</code> set to <code class="literal">true</code> pillar can be specified globally.
For more information, see <a href="../specialized-guides/salt/salt-states-and-pillars.html" class="xref page">Salt States and Pillars</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_switching_from_salt_minion_to_salt_bundle"><a class="anchor" href="#_switching_from_salt_minion_to_salt_bundle"></a><a class="link" href="#_switching_from_salt_minion_to_salt_bundle">2.2. Switching from Salt Minion to Salt Bundle</a></h3>
<div class="paragraph">
<p>The Salt state <code class="literal">util.mgr_switch_to_venv_minion</code> is available to switch from <code class="package">salt-minion</code> to <code class="package">venv-salt-minion</code>.
It is recommended to switch to <code class="package">venv-salt-minion</code> in two steps to avoid trouble with shifting processes:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Switching with <code class="literal">util.mgr_switch_to_venv_minion</code> state to <code class="package">venv-salt-minion</code></div>
<ol class="arabic">
<li>
<p>Apply <code class="literal">util.mgr_switch_to_venv_minion</code> with no pillar specified first.
This will result in the switch to <code class="package">venv-salt-minion</code> with copying configuration files etc.
It will not clean up the original <code class="package">salt-minion</code> configurations and its packages.</p>
<div class="listingblock">
<div class="content">
<pre>salt &lt;minion_id&gt; state.apply util.mgr_switch_to_venv_minion</pre>
</div>
</div>
</li>
<li>
<p>Apply <code class="literal">util.mgr_switch_to_venv_minion</code> with <code class="literal">mgr_purge_non_venv_salt</code> set to <code class="literal">True</code> to remove <code class="package">salt-minion</code> and with <code class="literal">mgr_purge_non_venv_salt_files</code> set to <code class="literal">True</code> to remove all the files related to <code class="package">salt-minion</code>.
This second step ensures the first step was processed, and then removes the old configuration files and the now obsolete <code class="package">salt-minion</code> package.</p>
<div class="listingblock">
<div class="content">
<pre>salt &lt;minion_id&gt; state.apply util.mgr_switch_to_venv_minion pillar='{"mgr_purge_non_venv_salt_files": True, "mgr_purge_non_venv_salt": True}'</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In case of running the second step of switching with skipping the first step, state apply process could fail as it requires stopping the <code class="systemitem">salt-minion</code> which is used to execute the command on the client side.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On the other hand, it is also possible to avoid installing the Salt Bundle and keep using <code class="package">salt-minion</code> instead.
In this case, specify one of these options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execute <code class="command">mgr-bootstrap</code> with  <code class="option">--no-bundle</code> option.</p>
</li>
<li>
<p>Set <code class="literal">AVOID_VENV_SALT_MINION</code> to <code class="literal">1</code> in the generated bootstrap script.</p>
</li>
<li>
<p>For bootstrap state set the <code class="literal">mgr_avoid_venv_salt_minion</code> pillar to  <code class="literal">True</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_salt_ssh_with_the_salt_bundle"><a class="anchor" href="#_salt_ssh_with_the_salt_bundle"></a><a class="link" href="#_salt_ssh_with_the_salt_bundle">3. Salt SSH with the Salt Bundle</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Salt Bundle is also used when performing Salt SSH actions to clients.</p>
</div>
<div class="paragraph">
<p>A shell script deploys the Salt Bundle onto the target system without installing <code class="package">venv-salt-minion</code> before any Salt command is executed. Since the Salt Bundle contains the whole Salt code base, no <code class="literal">salt-thin</code> is deployed. Salt SSH (including bootstrapping using the Web UI) uses the Python 3 interpreter within the bundle. The target system does not need to have any other Python interpreter installed.</p>
</div>
<div class="paragraph">
<p>The Python 3 deployed with the Bundle is used to handle Salt SSH session on the client, so Salt SSH (including bootstrapping with Web UI) is not dependant on Python installed on the system.</p>
</div>
<div class="paragraph">
<p>Using <code>salt-thin</code> can be enabled as a fallback method, but it requires Python 3 to be installed on the client.
This method is not recommended nor supported and exists for development purposes only.
Set <code class="option">web.ssh_use_salt_thin</code> to <code>true</code> in the <code class="path">/etc/rhn/rhn.conf</code> configuration file.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The bootstrap repository must be created before bootstrapping the client with Web UI.
Salt SSH is using the Salt Bundle taken from the bootstrap repository based on the detected target operating system.
For more information, see <a href="bootstrap-repository.html#_prepare_to_create_a_bootstrap_repository" class="xref page">client-configuration:bootstrap-repository.adoc#_prepare_to_create_a_bootstrap_repository</a>.</p>
</li>
<li>
<p>Salt SSH is using <code class="path">/var/tmp</code> to deploy Salt Bundle to and execute Salt commands on the client with the bundled Python.
Therefore you must not mount <code class="path">/var/tmp</code> with the <code class="option">noexec</code> option.
It is not possible to bootstrap the clients, which have <code class="path">/var/tmp</code> mounted with <code class="option">noexec</code> option, with the Web UI because the bootstrap process is using Salt SSH to reach a client.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extend_salt_bundle_with_python_packages_using_pip"><a class="anchor" href="#_extend_salt_bundle_with_python_packages_using_pip"></a><a class="link" href="#_extend_salt_bundle_with_python_packages_using_pip">4. Extend Salt Bundle with Python packages using pip</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Salt Bundle includes <code class="literal">pip</code> to make it possible to extend the functionality of the bundled Salt Minion with extra Python packages.</p>
</div>
<div class="paragraph">
<p>By default, <code class="command">salt &lt;minion_id&gt; pip.install &lt;package-name&gt;</code> installs the Python package specified by <code class="literal">&lt;package_name&gt;</code> into <code class="path">/var/lib/venv-salt-minion/local</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If needed, the path <code class="path">/var/lib/venv-salt-minion/local</code> can be overridden by setting the <code class="literal">VENV_PIP_TARGET</code> environment variable for the <code class="literal">venv-salt-minion.service</code>.
It is recommended to use a systemd drop-in configuration file for the service.
It could be done with the configuration file <code class="path">/etc/systemd/system/venv-salt-minion.service.d/10-pip-destination.conf</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[Service]
Environment=VENV_PIP_TARGET=/new/path/local/venv-salt-minion/pip</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Python packages installed through <code class="literal">pip</code> are not changing on updating the Salt Bundle.
To ensure that such packages are available and functional after an update, it is recommended to install them with a Salt state that is applied after Salt Bundle updates.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
<script src="../../_/js/vendor/langSelection.js"></script>

  </body>
</html>
