[[ref-cli-smdba]]
= Database CLIÂ Tools

{productname} provides the smdba command for managing the installed database.
It is the successor of [package]``db-control``, which is now *unsupported*.

The smdba command works on local databases only, not remote.
This utility allows you to do several administrative tasks like backing up and restoring the database.
It also allows you to create, verify, restore backups, obtaining database status, and restart the database if necessary.
The smdba command supports *PostgreSQL*.

Find basic information about *smdba* in the *smdba manpage*.

[NOTE]
.Restart Spacewalk Services When Connection is Lost
====
If you have stopped or restarted the database, Spacewalk services can lose their connections. In such a case, run the following command:

----
spacewalk-service restart
----
====



[[smdba.control.options]]
== Control Options

Depending on the database installed, smdba provides several subcommands:

----
backup-hot      Enable continuous archiving backup
backup-restore  Restore the {productname} Database from backup.
backup-status   Show backup status.
db-start        Start the {productname} Database.
db-status       Show database status.
db-stop         Stop the {productname} Database.
space-overview  Show database space report.
space-reclaim   Free disk space from unused object in tables and indexes.
space-tables    Show space report for each table.
system-check    Common backend healthcheck.
----

For a list of available commands on your particular appliance, call smdba help.
To display the help message for a specific subcommand, call [command]``smdba COMMAND help``.



[[starting.and.stopping.the.database]]
== Starting and Stopping the Database

There are three commands to start, stop, or get the status of the database.
Use the following commands:

----
# smdba db-status
Checking database core...       online
# smdba db-stop
Stopping the {productname} database...
Stopping listener:     done
Stopping core:         done
# smdba db-status
Checking database core...       offline
# smdba db-start
Starting listener:     done
Starting core...       done
----
