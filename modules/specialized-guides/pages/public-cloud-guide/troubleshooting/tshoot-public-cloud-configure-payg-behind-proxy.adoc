[[tshoot-public-cloud-configure-payg-behind-proxy]]
= Configure {payglongform} Behind Proxy
:description: To use a Proxy behind a pay-as-you-go systems in public cloud, ensure your machine's Proxy settings are correctly managed by adding a configuration file.
:revdate: 2025-02-26
:page-revdate: {revdate}
ifeval::[{uyuni-content} == true]

:noindex:
endif::[]

To identify if a machine is {payg} or not, {productname} needs to use [literal]``sudo`` to run [literal]``instance-flavor-check``tool.


If the customer is using a http proxy, they need to make sure this setting is correctly managed by [literal]``sudo``, because by default most environment variables are disregarded.

One way to do it, is to add a file [path]``/etc/sudoers.d/keep_proxy.conf`` with the following content:

----
# Preserve any possible proxy configuration
Defaults env_keep += "http_proxy https_proxy no_proxy"
----

This ensures the proxy related environment variables are preserved during the privileges escalation.