[[iss2]]
= Inter-Server Synchronization - Version 2

If you have more than one {productname} installation, you will need to copy contents between servers.
Inter-Server Synchronization (ISS) allows you to export data from one server (source) and import it on another (target) server.
This is useful for hub deployment scenarios or disconnected setups.

[NOTE]
====
With the versionÂ 2 ISS implementation {suse} removed the master/slave notion.
Contents can be exported and imported in any direction between any {productname} server.
====


== Install ISS Packages

To use ISS you need to install the [package]``inter-server-sync`` package on source and target servers.



== Content Synchronization


[IMPORTANT]
====
Use [literal]``mgrctl term`` before running steps inside the server container.
====

.Procedure: Export data on source server

. At the command prompt of the {productname} container host of the source server, as root, enter the server container:
+

----
mgrctl term
----

. Inside the container, execute the following steps:
+

--
.. Execute the ISS export command.
   The [option]``-h`` option provides detailed help:

+

[source,shell]
----
inter-server-sync export -h
----

--

The export procedure creates an output directory with all the needed data for the import procedure.
To avoid data loss or filling up the container file system, store the data on a persistent volume (preferably [path]``/var/spacewalk``).
For more information about persistent volumes, see xref:installation-and-upgrade:hardware-requirements.adoc#server-hardware-requirements[].



Contents from the source server needs to be synchronized to the target server.

.Procedure: Copy export directory to target server
. At the command prompt of the {productname} container host of the source server, as root, enter the server container:

+

----
mgrctl term
----

. Inside the container, execute the following steps:

+

--

.. Synchronize to the target server:

+

[source,shell]
----
rsync -r <PATH_EXPORTED_DIR> root@<TARGET_SERVER>:~/
----

+

When all contents is copied, start importing it.

--


.Procedure: Import data on target server
. At the command prompt of the {productname} container host of the target server, as root, enter the server container:

+

----
mgrctl term
----

. Inside the container, execute the following steps:

+

--
.. Execute the ISS import command.
   The [option]``-h`` option provides detailed help:

+

[source,shell]
----
inter-server-sync import -h
----

--


== Database connection configuration


Database connection configuration is loaded by default from ``/etc/rhn/rhn.conf``.
Properties file location can be overridden with parameter ``--serverConfig``.



== Known Limitations

* Source and target servers need to be on the same version.
* Export and import organization should have exactly the same name.
  The organization name is case sensitive.
