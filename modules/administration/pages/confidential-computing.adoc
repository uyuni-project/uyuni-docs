[[confidential_computing]]
= Confidential Computing 

{CoCo} is a technology which allows protection of data in use by using hardware-based Trusted Execution Environment (TEE), the type of environments that provide increased level of security for data integrity, data confidentiality, and code integrity.



== {CoCo} with {productname}

The trustworthiness of the TEE is checked with the attestation process.
{productname} can be used as an attestation server for the systems registered to it.
It generates a report page for the systems which run in this mode.
These systems need to be attested and checked on regular base.
The history of the past checks is also stored and available per request.

{CoCo} Attestation depends on the used hardware and environment where the attested systems are running on.



== Requirements

{CoCo} can be set up in an environment with the following characteristics:

* Attested system (virtual machine) is *SLES15 SP6* and bootstrapped to {productname}
* Hardware must have *AMD EPYC Milan CPU* or *AMD EPYC Genoa CPU*

//// 
This was from the testing guidelines, perhaps it is not needed in the documentation?
* [literal]``kernel-default`` must be installed instead of [literal]``kernel-default-base``.
  If necessary, run:
+
----
zypper install -- -kernel-default-base +kernel-default
----
////


=== Limitations

{CoCo}  Attestation is currently implemented only as a technology preview. 
//OM: (Do we state this explicitly in the documentation?)



== Use {CoCo} in {productname}

.Procedure: Enabling Attestation
[role=procedure]
. For the selected system, go to tab menu:Audit[Confidential Computing > Settings].
. Enable the attestation by selecting the toggle button. 
. In the field [literal]``Environment Type`` select the correct option from the drop-down list.
//. (PLACEHOLDER) Enable the automatic attestaion at reboot by selecting the toggle button [literal]``Execution``.
. Click button btn:[Save] to save the changes.
+
image::attestation1.jpg[]
//TODO: ALL images will be converted to PNG format when the latest versions are captured

.Procedure: Scheduling New Attestation
[role=procedure]
. For the selected system, go to tab menu:Audit[Confidential Computing > List Attestations].
. Click btn:[Schedule Attestation].
  The new form opens. 
. In the field [literal]``Earliest`` select the time of running the attestation.
. If needed, add the newly created attestation to the action chain by selecting [literal]``Add to`` option.
. Click button btn:[Schedule] to save and schedule the new attestation execution.
+
image::attestation2.jpg[]
+


.Procedure: Viewing Attestation Reports
[role=procedure]
. For the selected system, go to tab menu:Audit[Confidential Computing > List Attestations].
. Select the report you want to view.
+
image::attestation3.jpg[]
+
. In the column [literal]``Actions`` click the icon to open the report.
  Tab [literal]``Overview`` will open.
+
image::attestation4.jpg[]
+
. Move to the next tab [literal]``SEV-SNP``.
// This tab does or does not (NOTE: confirm dependance on the actual environment types) is available depending on the Environment Type selected at the time of scheduling.
+
image::attestation5.jpg[]
+
//. (PLACEHOLDER) To check the details about secure booting, open tab [literal]``Secure Boot``.
//+
//image::attestation6.jpg[]


=== Report statuses

Attestation reports can have one of the following statuses:

Pending::
This is the default status of the scheduled attestation.
The report is still not available, either because the process has not yet started or completed.

Successful::
When the scheduled attestation creates a report which can be viewed, the status of the process is [literal]``Successful``.

Failed::
When the scheduled fails and does not create a report as a result, the status of the process is [literal]``Failed``.



== Related topics

// * For more information about {CoCo}, see [link]``https://www.fortanix.com/platform/confidential-computing-manager/what-is-confidential-computing`` (external link).
* For more information about {CoCo}, see [link]``https://confidentialcomputing.io``[CCC](external link).
