[[recurring-actions]]
= Recurring Actions

You can schedule automated recurring highstate actions for Salt clients.
Recurring highstate actions apply the highstate to clients on a specified schedule.
You can apply recurring action to individual clients, to all clients in a system group, or to an entire organization.


[IMPORTANT]
====
Recurring actions can only be used with Salt clients.
You cannot schedule recurring actions on traditional clients.
====



.Procedure: Creating a New Recurring Action
. To apply a recurring action to an individual client, navigate to [guimenu]``Systems``, click the client to configure schedules for, and navigate to the menu:States[Recurring States] tab.
. To apply a recurring action to a system group, navigate to menu:Systems[System Groups], select the group to configure schedules for, and navigate to menu:States[Recurring States] tab.
. Click btn:[Create].
. Type a name for the new schedule.
. Choose the frequency of the recurring action:
+
* [guimenu]``Hourly:`` Type the minute of each hour.
For example, [parameter]``15`` will run the action at fifteen minutes past every hour.
* [guimenu]``Daily:`` Select the time of each day.
For example, [parameter]``01:00`` will run the action at 0100 every day, in the timezone of the {productname} Server.
* [guimenu]``Weekly:`` Select the day of the week and the time of the day, to execute the action every week at the specified time.
* [guimenu]``Monthly:`` Select the day of the month and the time of the day, to execute the action every month at the specified time.
* [guimenu]``Custom Quartz format:`` For more detailed options, enter a custom quartz string.
For example, to run a recurring action at 0215 every Saturday of every month, enter:
+
----
0 15 2 ? * 7
----
. OPTIONAL: Toggle the [guimenu]``Test mode`` switch on to run the schedule in test mode.
. Click btn:[Create Schedule] to save, and see the complete list of existing schedules.



== Recurring Actions in Organizations


Organization Administrators can set and edit recurring actions for all clients in the organization.
Navigate to menu:Home[My Organization > Recurring States] to see all recurring actions that apply to the entire organization.

{productname} Administrators can set and edit recurring actions for all clients in all organizations.
Navigate to menu:Admin[Organizations], select the organization to manage, and navigate to the menu:States[Recurring States] tab.

[NOTE]
====
Recurring actions can only be used with Salt clients.
Traditional clients in your group or organization are ignored.
====



== Action Chains

You can create action chains{mdash}or grouped actions{mdash}for example, in the menu:Main Menu[Software > Packages] or menu:Software[Packages] subtabs on a system details page (see: xref:reference:systems/system-details/sd-patches.adoc[SD Patches] or:
xref:reference:systems/system-details/sd-packages.adoc[SD Packages]) or in the menu:Configuration[Deploy Files] subtab on a system details page (see xref:reference:systems/system-details/sd-configuration.adoc#sd-config-deploy-files[Deploy Files]).

The following list of actions may be added to an action chain.
These actions are supported on both traditional clients and Salt clients.
Schedulable actions are located under a systems, [guimenu]``System Details`` page on the following subtabs.

.Chainable Actions
* menu:System Details[Remote Command]
* menu:System Details[Schedule System Reboot]
* menu:System Details[States > Highstate]
* menu:System Details[Software > Packages > List/Remove]
* menu:System Details[Software > Packages > Install]
* menu:System Details[Software > Packages > Upgrade]
* menu:System Details[Software > Patches]
* menu:System Details[Software > Software Channels]
* menu:System Details[Configuration]
* menu:Main Menu[Images > Build]

image::schedule_action_chains.png[scaledwidth=80%]

In the [guimenu]``Action Chain List`` you can click the label to view or edit an [guimenu]``Action Chain``.
In the top right corner is the [guimenu]``delete action chain`` link.
To add actions to an existing chain, pick up a "`chainable`" action (such as running a remote command) from a system details page (see:
xref:reference:systems/system-details.adoc[System Details]).

Then check [guimenu]``Add to Action Chain`` and select an action chain from the drop-down box.
Confirm with btn:[Schedule].

To create a new action chain, configure the first action, then select [guimenu]``Add to Action Chain`` instead of [guimenu]``Schedule no sooner than``.
Click the drop-down box, enter a name, and click btn:[Schedule] to save the chain.
Then proceed to the next action and add it to the new chain.

Action chains can be edited via the menu:Main Menu[Schedule > Action Chains] page.
Click a chain name to see the actions in the order they will be performed.
The following tasks can be carried out here:

* Change the order of actions by dragging the respective action to the right position and dropping it.
* Delete actions from the chain by clicking the [guimenu]``delete action`` link.
* Inspect the list of systems on which an action is run by clicking the [guimenu]``+`` sign.
* Delete a single system from an action chain by clicking the [guimenu]``delete system`` link.
* Delete the complete action chain with the [guimenu]``delete action chain`` link in the top-left corner.
* Change an action chain label by clicking it.
* Schedule an action chain for execution on a certain date by clicking the btn:[Save and Schedule] button.

.Unsaved Changes
[NOTE]
====
If you leave the page without clicking either btn:[Save] or btn:[Save and Schedule] all unsaved changes will be discarded.
In this case, a confirmation dialog will pop up.
====


Currently you cannot add an action to an action chain from the [guimenu]``Edit`` section of the action chain details page.
When a Chain is scheduled, the actions it contains will be displayed under [guimenu]``Schedule`` on the appropriate pages: [guimenu]``Pending Actions``, [guimenu]``Failed Actions``, or [guimenu]``Completed Actions`` depending on the status.
If one action fails on a system no other actions from the same chain will be executed on that systems.
Because of technical limitations it is not possible to reuse Action Chains.
