[[ptfs]]
= Using PTFs in {productname}

SUSE provide for their Enterprise Products temporary fixes shipped to individual customers.
These `PTFs` (Program Temporary Fixes) can now be made available as repositories which can be synced in {productname}.


== Understanding PTF packages

PTF packages are installed via a proxy package and are named `ptf-xxxxxx`.
They will depend on the correct version of the package that is known to include the correction in the software. This type of package

* cannot be installed accidentally (ie. zypper update will never suggest installing them),
* cannot be removed accidentally (ie. a newer package version will not replace the PTF one, unless the user makes it explicitly on the zypper command line),
* is only updated when the newer version is known to address the specific issue addressed first by the PTF,
* updates only packages already installed on the system (a software that is split in multiple packages will have only the packages currently installed on the system being replaced).

The correct ID of the package will be provided by SUSE Support during the course of the support case investigation, along with instruction on how to deploy/restart the affected services.


== Installing PTF packages


.Procedure: Enable and Synchronize PTF repositories using the command line

. On the console enter ``mgr-sync refresh``
. Enter ``mgr-sync list channel`` and look for channels starting with your SCC account name. E.g. `a123456-sles-15.3-ptfs-x86_64`
. Enable the PTF channel with ``mgr-sync add channel <label>``

Now this channel is available and can be added to every system which is using the same base channel.

PTF packages needs to be installed explicit. They are not automatically installed when updating a system.
The SUSE Customer Support will tell the ptf number to fix a specific problem.
In {productname} {webui} every system with PTFs available for installation has a page which list them.


.Procedure: Installation of PTF packages

. In the {productname} {webui}, navigate to menu:Systems[Systems List] and select the client you want to install a PTF.
. Navigate to the menu:Systems[Software > Packages > Software Channels] and select the [systemitem]``PTF channel``.
. Click btn:[Next], and [guimenu]``Confirm Software Channel Change`` with btn:[Confirm].
. To check if the channel assignment is finished, navigate to menu:Systems[Events > History] to see the results.
. Navigate to the menu:Systems[Software > PTFs > Install] sub tab
. Select the ptf package you want to install
. Click btn:[Install PTF], and [guimenu]``Confirm PTF Installation`` with btn:[Confirm].
. To see PTF installation results, navigate to menu:Systems[Events > History].


== After PTF installation

Once a PTF is confirmed to address the reported issue, the updated package will be tracked for inclusion
into a future maintenance update before being widely distributed as an regular maintenance update in the update repositories.

When this regular update with the fix is released, an updated version of the PTF will also be released into
the account-specific PTF repository. The updated PTF will remove the strict dependencies and allow updates to be installed again.

== Removing the patched version of a package

In cases where a PTF needs to be uninstalled and the non-patched version of the packages need to be installed on the system,
a simple package remove cannot be used. The ptf package is not selectable in the standard package list page.

. In the {productname} {webui}, navigate to menu:Systems[Systems List] and select the client you want to de-install a PTF.
. Navigate to the menu:Systems[Software > PTFs > Remove] sub tab
. Select the ptf package you want to de-install
. Click btn:[Deinstall PTF], and [guimenu]``Confirm PTF Deinstallation`` with btn:[Confirm].
. To see the results, navigate to menu:Systems[Events > History].


[NOTE]
====
De-installation requires a special version of libzypp/zypper to be installed on the client system.
The PTF Remove tab is only visible if this condition is met.
====

