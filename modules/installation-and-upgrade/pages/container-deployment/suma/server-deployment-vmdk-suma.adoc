[[install-vm]]
= Install {productname} in a Virtual Machine Environment Using {productname} VM Image



[[quickstart.sect.vmdk.settings]]
== Virtual Machine Manager Settings

You will find the VM images for {productname} {productnumber} in various formats.



== {productname} Virtual Machine Settings - VMware

This sections describes VMware configurations, focusing on the creation of an extra virtual disk essential for the {productname} storage partition within VMware environments.

.Procedure: Creating the VMware Virtual Machine

. Download {productname} Server [filename]``.vmdk`` file then transfer a copy to your VMware storage.

. Upload the prepared Ignition or Cloud Init disk file you created using the instructions above.

. Create and name a new virtual machine based on the Guest OS Family [systemitem]``Linux`` and Guest OS Version {sle} 15 (64-bit).

. In [guimenu]``Customize settings`` browse to the uploaded [filename]``.vmdk`` using [systemitem]``IDE controller 0`` storage device in the [systemitem]``Controller Location``.

. Add an additional [systemitem]``Hard Disk 2`` of 500 GB (or more).

. Configure RAM and number of CPUs (at least 16 GB RAM and 4 CPUs).

. Set the network adapter as required.

. Set the [systemitem]``CD/DVD Drive 1`` to use the uploaded configuration as a [systemitem]``Datastore ISO``.
  Tick the box next to btn:[Connect].
  This drive must be present when you power on the machine initially.

. Power on the VM, and log in using credentials set by configuration disk.


[[minimal.susemgr.prep]]
== Preparing Virtual Machine for {productname}

Before starting obtain your SUSE Manager Registration Code from SUSE Customer Center - https://scc.suse.com.



[[proc.minimal.susemgr.prep]]
.Procedure: Preparing for {productname} run

. Log in as `root`.

. Register {productname} with SCC.
  For example, replace `<productnumber>` with `{productnumber}` and `<architecture>` with `x86_64`:
+

----
SUSEConnect -e <EMAIL_ADDRESS> -r <SUSE_MANAGER_CODE> \
  -p SUSE-Manager-Server/<productnumber>/<architecture>
----

. Validate the authorized extensions by running the list extensions command:
+

----
SUSEConnect --list-extensions
----

. Add {productname} repositories:
+

----
SUSEConnect -p sle-module-basesystem/15.4/x86_64
SUSEConnect -p sle-module-server-applications/15.4/x86_64
SUSEConnect -p sle-module-web-scripting/15.4/x86_64
SUSEConnect -p sle-module-suse-manager-server/<productnumber>/x86_64
----

. Prepare {productname} storage:
  [path]``suma-storage`` command automatically prepares and configures previously created external storage for use with {productname}.
  In the following command the first parameter is the device for {productname} data, the second parameter is the device for the database.
+

----
suma-storage /dev/vdb /dev/vdc
----
+
// FIXME info about network configuration and applying update in readme

. The virtual machine is now ready for {productname} to be set up.

For proceeding with {productname} setup, see xref:installation-and-upgrade:server-setup.adoc[SUSE Manager Setup].
