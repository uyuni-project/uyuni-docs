== Migrate {sle-micro} 5.5 to {sl-micro} 6.1

This document provides the tested procedure to upgrade a {sle-micro} 5.5 host deployed with {productname} 5.0 Proxy to {sl-micro} 6.1 with {productname} {productnumber} Proxy.

=== Prerequisites

* {productname} 5.0 Proxy is installed and running on {sle-micro} 5.5.
* System is registered and has active subscriptions with {scc}.
* Proxy system is registered with the {productname} Server.

=== Migration Procedure: {sle-micro} 5.5 > {sl-micro} 6.1

.Procedure: Migrate {productname} 5.0 Proxy to {productname} {productnumber}
[role=procedure]
_____

. Verify System and Proxy Version

+

[source,console]
----
cat /etc/os-release
mgrpxy --version
----

+

**Confirm:**

- OS: `SLE Micro 5.5`
- Proxy: `mgrpxy version >= 0.1.29`

+

. Check Running Containers

+

[source,console]
----
podman ps
----

+

Ensure the following containers are running:

- `proxy-squid`
- `proxy-ssh`
- `proxy-httpd`
- `proxy-tftpd`
- `proxy-salt-broker`

+

. Synchronize Proxy Products in {productname} Server

+

Use the Web UI to synchronize:

- `SL-Micro 6.1`
- `{productname} {productnumber} Proxy Extension`

+

. Perform Proxy Product Migration

+

Use the Web UI to migrate from:

- `SLE Micro 5.5` + `{productname} Proxy 5.0 Extension`  
to  
- `SL Micro 6.1` + `{productname} Proxy {productnumber} Extension`

+

âš  When prompted, **do not select** optional channels unless you have confirmed they are required.

+

. Monitor the Migration Action

+

Check the Web UI for job status. If the migration fails, check for GPG key issues such as:

- `Signature verification failed [4-Signatures public key is not available]`

+

[source,console]
----
zypper refresh --gpg-auto-import-keys
----

+

Re-run the migration action if needed.

+

. Reboot the System

+

[source,console]
----
reboot
----

+

. Post-Reboot Validation

+

[source,console]
----
cat /etc/os-release
mgrpxy --version
----

+

Expected:

- OS: `SL Micro 6.1`
- Updated Proxy version

+

. Validate Proxy Containers

+

[source,console]
----
podman ps
----

+

All expected proxy containers should be up and running.
_____

[NOTE]
====
* If migration fails due to missing GPG keys (e.g. key ID `09D9EA69`), refer to Bug 1243373.
* Also check for issues like missing libraries (`liblua5.3.so.5`) as reported in Bug 1243457.
====
=== Migration Complete

The proxy system is now running on SL Micro 6.1 with {productname} {productnumber}. Proceed with post-migration validation and testing.
