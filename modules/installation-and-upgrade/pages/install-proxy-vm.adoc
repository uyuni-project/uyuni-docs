[[install-proxy-vm]]
= Install {productname} Proxy in a Virtual Machine Environment Using {productname} Proxy Image



== Virtual Machine Manager (virt-manager) Settings

This chapter provides the required Kernel Virtual Machine (KVM) settings for {productname} Proxy.
KVM combined with Virtual Machine Manager (_virt-manager_) will be used as a sandbox for this installation.



You will find the VM images for {productname} {productnumber} Proxy in various formats.
It includes the underlying OS bits ({sles}_{sles-version} {sp-base}) and the {productname} Proxy software current at the time of build.
Download the appropriate {productname} Proxy image for your environment from https://download.suse.com/.

[NOTE]
====
This table specifies the minimum requirements.
These are suitable for a quick test installation, such as a server with one client.
If you want to use a production environment, review the requirements listed in xref:installation-and-upgrade:hardware-requirements.adoc[].
====


[cols="1,1", options="header"]
|===
2+<| Virtual machine settings overview
| Installation Method | Import Existing Disk Image
| OS:                 | SUSE Linux Enterprise 15 SP4
| Memory:             | 8 GB
| CPU's:              | 2
| Virtual Disks:      |
| VirtIO Disk 1       | SUSE-Manager-Proxy.x86_64-4.3.13-KVM.qcow2
| VirtIO Disk 2       | 101 GB for [path]``/srv/``
| VirtIO Disk 3       | 100 GB for [path]``/srv/cache/``
| Name:               | suse-manager-proxy-setup
| Network             | Bridge _br0_
|===

[NOTE]
====
For more information on {sle} Virtualization, see https://documentation.suse.com/sles/15-SP4/html/SLES-all/book-virtualization.html.
====



== {productname} Proxy Virtual Machine Settings


Create three additional virtual disks required for the {productname} storage partitions.

.Procedure: Creating the Required Partitions with KVM
. Create a new virtual machine using the downloaded {productname} KVM image and select [guimenu]``Import existing disk image``.
. Set [literal]``SUSE Linux Enterprise 15 SP4`` as the installed operating system.
. Configure RAM and number of CPUs (at least 8 GB RAM and 2 CPUs).
. Name your KVM machine and select the [guimenu]``Customize configuration before install`` check box.
. Click btn:[Add Hardware] to create three new virtual disks with these specifications.
  These disks will be partitioned and mounted later.
+

// FIXME: enter proxy related storage devs instead

[cols="1,1,1", options="header"]
|===
| VirtIO Storage Disks | Name      | Sizing
| VirtIO Disk 2        | spacewalk | 500{nbsp}GB
| VirtIO Disk 3        | pgsql     | 100{nbsp}GB
| VirtIO Disk 4        | swap      | 4{nbsp}GB
|===


. Click btn:[Begin Installation] to boot the new VM from the {productname} Proxy image.
  Wait until the login prompt is presented.


== Run JeOS Firstboot Setup

. Confirm to start the setup.
. Select system locale such as [literal]``en_US``.
. Select keyboard layout such as [literal]``us`` or [literal]``us_intl``.
. Check end user license agreement.
. Select time zone such as [literal]``UTC`` or [literal]``America/New_York``.
. Enter and confirm root password.
  Keep note of the root password.




[[minimmal.susemgr.prep]]
== Preparing virtual machine for {productname}

Before starting obtain your Registration Code for this image from SUSE Customer Center - https://scc.suse.com.


[[proc.minimmal.susemgr.prep]]
.Procedure: Preparing for {productname} run

. Log in as `root`.

. Register {productname} with SCC:

+

----
SUSEConnect -e <EMAIL_ADDRESS> -r <SUSE_MANAGER_PROXY_CODE>
----

. The virtual machine is now ready for {productname} to be set up.


Continue with registering the installed {productname} Proxy as a client: xref:installation-and-upgrade:proxy-registration.adoc[].

