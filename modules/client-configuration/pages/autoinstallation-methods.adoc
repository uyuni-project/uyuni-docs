[[client-cfg-autoinstallation-methods]]
= Automate Client Installation


{ay} and Kickstart configuration files allow you to automate client system installations.
This is useful if you need to install a large number of clients.

For {sle} clients, use {ay}.
When you have created an {ay} file, you can upload and manage it using the {productname} {webui}.

For {rhel} clients, use Kickstart.
Kickstart files are created, modified, and managed within the {productname} {webui}.

We recommend that you use PXE boot for installing clients.
PXE booting requires a DHCP server that points to your {productname} Server.
The {productname} Server then acts as a TFTP server.
The TFTP environment is generated with Cobbler.
Cobbler can also generate a bootable ISO image.
The ISO image can be used to install machines when PXE boot is not an option.
For more information about Cobbler, see xref:client-configuration:cobbler.adoc[].




////

From the Ref Guide. --LKB 2020-09-08
See https://github.com/SUSE/spacewalk/issues/12355


== Autoinstall Clients with the System Set Manager


The menu:Provisioning[Autoinstallation] subtab lists all clients in the SSM available for autoinstallation, with their base channel.
To schedule autoinstallation, select an autoinstallable type, click btn:[Continue] and follow the prompts.



Set the options for provisioning systems via the following subtabs.



[[ref.webui.systems.ssm.provision_autoinst]]
=== SSM Provisioning - Autoinstallation


Use this subtab to reinstall clients.


image::systems_ssm_autoinstallation.png[scaledwidth=80%]


To schedule autoinstallations for these systems, select a distribution.
The autoinstallation profile used for each system in the set is determined via the [guimenu]``Autoinstallable Type`` radio buttons.

Choose [guimenu]``Select autoinstallation profile`` to apply the same profile to all systems in the set.
This is the default option.
You will see a list of available profiles to select from when you click btn:[Continue].

Choose [guimenu]``Autoinstall by IP Address`` to apply different autoinstallation profiles to different systems in the set, by IP address.
To do so, at least two autoinstallation profiles must be configured with associated IP ranges.

If you use [guimenu]``Autoinstall by IP Address``, {productname} will automatically pick a profile for each system so that the system's IP address will be in one of the IP ranges specified in the profile itself.
If such a profile cannot be found, {productname} will look for an organization default profile and apply that instead.
If no matching IP ranges nor organization default profiles can be found, no autoinstallation will be performed on the system.
You will be notified on the next page if that happens.

To use Cobbler system records for autoinstallation, select [guimenu]``Create PXE Installation Configuration``.
With PXE boot, you cannot only reinstall clients, but automatically install machines that do not have an operating system installed yet.
{productname} and its network must be properly configured to enable boot using PXE.
For more information on Cobbler and {kickstart} templates, see xref:client-configuration:cobbler.adoc[].


[NOTE]
====
If a system set contains bare-metal systems and installed clients, only features working for systems without an operating system installed will be available.
Full features will be enabled again when all bare-metal systems are removed from the set.
====


If any of the systems connect to {productname} via a proxy server, choose either the [guimenu]``Preserve Existing Configuration`` radio button or the [guimenu]``Use Proxy`` radio button.
If you choose to autoinstall through a proxy server, select from the available proxies listed in the drop-down box beside the [guimenu]``Use Proxy`` radio button.
All of the selected systems will autoinstall via the selected proxy.
Click the btn:[Schedule Autoinstall] button to confirm your selections.
When the autoinstallations for the selected systems are successfully scheduled, you will return to the [guimenu]``System Set Manager`` page.




[[sd-provisioning-autoinstallation]]
== Autoinstallation

The [guimenu]``Schedule`` subtab allows you to configure and schedule an autoinstallation for this system.
For background information about autoinstallation, see xref:reference:systems/autoinst-overview.adoc[].


image::system_details_traditional_provisioning_schedule_wizard.png[scaledwidth=80%]

In the [guimenu]``Schedule`` subtab, schedule the selected system for autoinstallation.
Choose from the list of available profiles.

[NOTE]
====
You must create a profile before it appears on this subtab.
For more information about profiles, see xref:reference:systems/autoinst-profiles.adoc[].
====

To alter autoinstallation settings, click the btn:[Advanced Configuration] button.
Configure the network connection and post-installation networking information.
You can aggregate multiple network interfaces into a single logical "bonded" interface.
In [guimenu]``Kernel Options`` specify kernel options to be used during autoinstallation. [guimenu]``Post Kernel Options`` are used after the installation is complete and the system is booting for the first time.
Configure package profile synchronization.

Select a time for the autoinstallation to begin and click btn:[Schedule Autoinstall and Finish] for all changes to take effect and to schedule the autoinstallation.

Alternatively, click [guimenu]``Create PXE Installation Configuration`` to create a Cobbler system record.
The selected autoinstallation profile will be used to automatically install the configured distribution next time that particular system boots from PXE.
In this case {productname} and its network must be properly configured to allow boot using PXE.

[NOTE]
====
Any settings changed on the [guimenu]``Advanced Configuration`` page will be ignored when creating a PXE installation configuration for Cobbler.
====


The [guimenu]``Variables`` subtab can be used to create Kickstart variables, which substitute values in Kickstart files.
To define a variable, create a name-value pair ([replaceable]``name/value``) in the text box.

For example, to {kickstart} a system that joins the network of a specific organization (for example the Engineering department) you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the [guimenu]``Variables`` text box:

----
IPADDR=192.168.0.28
GATEWAY=192.168.0.1
----

To use the system variable, use the name of the variable in the profile instead of the value.
For example, the [option]``network`` portion of a {kickstart} file could look like the following:

----
network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY
----

The [option]``$IPADDR`` will be ``192.168.0.28``, and the [option]``$GATEWAY`` will be ``192.168.0.1``.

[NOTE]
====
There is a hierarchy when creating and using variables in {kickstart} files.
System {kickstart} variables take precedence over profile variables, which in turn take precedence over distribution variables.
Understanding this hierarchy can alleviate confusion when using variables in {kickstart}.
====

Using variables are one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and {kickstart} templates, see xref:client-configuration:cobbler.adoc[].

////


////
More from the Ref Guide. LKB --2020-09-08



.Autoinstallation Types: {ay} and Kickstart
[NOTE]
====
In the following section, {ay} and {ay} features apply for {sle} client systems only.
For {rhela} systems, use Kickstart and Kickstart features.
====


.Auto-Installing Salt Clients Currently Not Supported
[IMPORTANT]
====
This procedure will work for traditionally  managed systems (system type [systemitem]``management``).
It is not currently available for systems using Salt (system type [systemitem]``salt``).
====

{ay} and Kickstart configuration files allow administrators to create an environment for automating otherwise time-consuming system installations, such as multiple servers or workstations.
{ay} files have to be uploaded to be managed with {productname}.
Kickstart files can be created, modified, and managed within the {productname} Web interface.

{productname} also features the Cobbler installation server.
For more information, see xref:client-configuration:cobbler.adoc[].


{productname} provides an interface for developing Kickstart and {ay} profiles that can be used to install {rhel} or {sle} on either new or already-registered systems automatically according to certain specifications.


[IMPORTANT]
====
If you have created Cobbler profiles, distributions, or systems using the {productname} {webui}, you must manage them in the {webui}.
If you make changes at the command prompt, the profiles will not synchronize correctly, and the {webui} will show incorrect values.
====



.Autoinstallation Overview
image::systems_kickstart_overview.png[scaledwidth=444]


This overview page displays the status of automated installations (Kickstart and {ay}) on your client systems: the types and number of profiles you have created and the progress of systems that are scheduled to be installed using Kickstart or {ay}.

In the upper right area is the menu:Autoinstallation Actions[] section, which contains a series of links to management actions for your Kickstart or {ay}  profiles.

* For more on {ay}, see xref:client-configuration:client-automating-installation.adoc[].
* For more on Kickstart, see xref:client-configuration:kickstart.adoc[].

////