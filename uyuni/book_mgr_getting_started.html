<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started :: Uyuni Documentation</title>
    <meta name="generator" content="Antora 1.1.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://infallible-goldberg-3dc8f3.netlify.com/uyuni/master/">Uyuni Project</a>
        <span class="separator">//</span>
        <a href="../..">Docs</a>
      </div>
      <div class="navbar-item">
        <input id="search-input" type="text" placeholder="Search docs">
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>Resources</strong></div>
            <a class="navbar-item" href="https://gitlab.com/jcayouette/uyuni-prototype">Repository</a>
            <a class="navbar-item" href="https://gitlab.com/jcayouette/uyuni-prototype/issues">Issue Tracker</a>
<!--
            <hr class="navbar-divider">
            <div class="navbar-item"><strong>Custom UI (coming soon!)</strong></div>
            <a class="navbar-item" href="https://gitlab.com/antora/antora-ui-default">Repository</a>
            <a class="navbar-item" href="https://gitlab.com/antora/antora-ui-default/issues">Issue Tracker</a>
            <hr class="navbar-divider">
          -->
            <a class="navbar-item" href="https://gitlab.com/jcayouette/uyuni-prototype/blob/master/contributing.adoc">Contributing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://gitter.im/uyuniproject/users">Uyuni Chat (Users)</a>
            <a class="navbar-item" href="https://gitter.im/uyuniproject/develop">Uyuni Chat (Dev)</a>
          </div>
        </div>
        <a class="navbar-item" href="https://twitter.com/uyuniproject">
          <span class="icon">
            <svg aria-hidden="true" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path fill="#57aaee" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="uyuni" data-version="3.2">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Uyuni</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="book_mgr_getting_started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_install_overview.html">Overview and Requirements</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq">Prerequisites for Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.scc">SUSE SCC Credentials</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.installmedia">Get Uyuni</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.hardware">Hardware Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.network">Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.clientos">Supported Client Systems</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_installation_jeos.html">Installation via JeOS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.kvm.settings">Configuring KVM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#jeos.kvm.settings">JeOS KVM Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#jeos.susemgr.prep">Preparing JeOS for Uyuni</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_installation_sles.html">Installation via SLES</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html">Setup and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html">Connecting Clients</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html">Introduction to Salt</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="book_mgr_best_practices.html">Best Practices</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="book_suma_reference_manual.html">WebUI Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="book_suma_advanced_topics.html">Advanced Topics</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Uyuni</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Uyuni</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../include-test/index.html">include-test</a>
        </li>
        <li class="version">
          <a href="../ia-rework/index.html">ia-rework</a>
        </li>
        <li class="version">
          <a href="../4.0/index.html">4.0</a>
        </li>
        <li class="version is-current">
          <a href="index.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../include-test/index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Uyuni</a></li>
    <li class="crumb"><a href="book_mgr_getting_started.html">Getting Started</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">3.2</button>
  <div class="versions-menu">
    <a class="version" href="../include-test/book_mgr_getting_started.html">include-test</a>
    <a class="version" href="../ia-rework/book_mgr_getting_started.html">ia-rework</a>
    <a class="version" href="../4.0/book_mgr_getting_started.html">4.0</a>
    <a class="version is-current" href="book_mgr_getting_started.html">3.2</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/uyuni-project/uyuni-docs/edit/3.2/docs/modules/ROOT/pages/book_mgr_getting_started.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Getting Started</h1>
<div class="sect1">
<h2 id="quickstart.chapt.overview.requirements"><a class="anchor" href="#quickstart.chapt.overview.requirements"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Getting Started Guide provides guidance on setting up  server with KVM.
You will learn the fundamentals of managing both traditional and Salt clients.</p>
</div>
<div class="paragraph">
<p>This guide is intended for system administrators.</p>
</div>
<div class="paragraph">
<p><a href="common_version_info.html#common-version-info" class="page">Version Info</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title"> Version Information</div>
<div class="paragraph">
<p>In this manual if not other specified,  version 3.2 is assumed and this version is required if a feature is discussed.
 3.2 and  3.2 Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the 3.2 host operating system are documented and not other specified version 12 SP3 is assumed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="quickstart.sect.introduction"><a class="anchor" href="#quickstart.sect.introduction"></a><a class="link" href="#quickstart.sect.introduction">1.1. Introduction to </a></h3>
<div class="paragraph">
<p> is a solution for organizations that require absolute control over maintenance and package deployment on their servers.
It lets you manage large sets of Linux systems and keep them up to date, with automated software management, asset management, and system provisioning.
 allows you to maintain a high level of security while effectively managing system life-cycle requirements.</p>
</div>
<div class="paragraph">
<p> uses <em>Salt</em> to provide event-driven configuration and management control.
The Salt-master orchestrates thousands of Salt-minions ( Clients) using remote execution.</p>
</div>
<div class="paragraph">
<p> is fully compatible with Red Hat Satellite Server and offers seamless management of both SUSE Linux Enterprise and Red Hat Linux Enterprise client systems.</p>
</div>
<div class="paragraph">
<p> can be integrated with your network infrastructure in multiple ways.
This book will guide you through an initial proof-of-concept setup, using these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install an operating system (either JeOS or SLES) for use with </p>
</li>
<li>
<p>Install  Server</p>
</li>
<li>
<p>Register  with SUSE Customer Center</p>
</li>
<li>
<p>Perform initial setup of your  Server</p>
</li>
<li>
<p>Register a traditional client</p>
</li>
<li>
<p>Register a Salt minion</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="quickstart.sect.prereq"><a class="anchor" href="#quickstart.sect.prereq"></a><a class="link" href="#quickstart.sect.prereq">1.2. Prerequisites for Installation</a></h3>
<div class="paragraph">
<p>Before you begin your installation, ensure you have fulfilled these prerequisites:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Current SUSE Customer Center organization credentials</p>
</li>
<li>
<p>Access to installation media for your chosen operating system</p>
</li>
<li>
<p>Your environment meets the hardware and networking requirements</p>
</li>
<li>
<p>You understand the supported client operating systems</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section contains more information on each of these prerequisites.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p> 3.2 is based on SLES 12 SP3 as the host operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="quickstart.sect.prereq.scc"><a class="anchor" href="#quickstart.sect.prereq.scc"></a><a class="link" href="#quickstart.sect.prereq.scc">1.2.1. Obtaining your SUSE Customer Center Credentials</a></h4>
<div class="paragraph">
<p>You will need to create an account with SUSE Customer Center before you install SUSE Linux Enterprise Server and .
To obtain your SUSE Customer Center credentials:</p>
</div>
<div id="creating.scc.account.mgr" class="olist arabic">
<div class="title">Procedure: Obtaining Your SCC Organization Credentials</div>
<ol class="arabic">
<li>
<p>Open a browser and direct it to <a href="https://scc.suse.com/login" class="bare">https://scc.suse.com/login</a>.</p>
</li>
<li>
<p>If you have not done so, create an account now.</p>
</li>
<li>
<p>Log in to your new SCC account.</p>
</li>
<li>
<p>Under the <b class="button">Management tools</b> widget select <b class="button">Manage Users</b>.</p>
</li>
<li>
<p>Click the <b class="button">Organization Credentials</b> tab.</p>
</li>
<li>
<p>Record your login information for use during  setup.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="quickstart.sect.prereq.installmedia"><a class="anchor" href="#quickstart.sect.prereq.installmedia"></a><a class="link" href="#quickstart.sect.prereq.installmedia">1.2.2. Obtaining Installation Media</a></h4>
<div class="paragraph">
<p>This book describes installation methods for both JeOS and SUSE Linux Enterprise Server.
The JeOS image provides the quickest installation and setup, and is suitable for a test or proof of concept installation.
Alternatively, SUSE Linux Enterprise Server provides a more robust installation, which requires a larger initial download.
Choose your preferred operating system based on the type of environment you want to install, and the amount of bandwidth and time you have available.</p>
</div>
<div class="paragraph">
<p>You can find installation images for JeOS and SLES in your SUSE Customer Center account.
Log in, then navigate to the URL for your chosen operating system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.suse.com/products/server/jeos/">JeOS - Media Download</a></p>
</li>
<li>
<p><a href="https://www.suse.com/products/server/download/">SUSE Linux Enterprise Server - Media Download</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="quickstart.sect.prereq.hardware"><a class="anchor" href="#quickstart.sect.prereq.hardware"></a><a class="link" href="#quickstart.sect.prereq.hardware">1.2.3. Hardware Requirements</a></h4>
<div class="paragraph">
<p>This table outlines hardware and software requirements on x86_64 and ppc64le architecture.
For installation on z Systems, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="advanced_topics_suma3_zsystems.html#at-zsystems" class="page">and z Systems</a></p>
</li>
<li>
<p><a href="#art.suma.install.zsystems">[art.suma.install.zsystems]</a></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Hardware Requirements for x86_64 Architecture</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Hardware</th>
<th class="tableblock halign-left valign-top">Recommended</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-core 64-bit CPU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Test Server</em> Minimum 8&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Base Installation</em> Minimum 16&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Production Server</em> Minimum 32&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Space:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/</code> <em>(root) The default JeOS root partition size of 24 GB is sufficient for this guide</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/lib/pgsql</code> Minimum 50&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/spacewalk</code> Minimum 50&#160;GB per SUSE product and 250&#160;GB per Red Hat product</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Hardware Requirements for IBM POWER8 or POWER9 Architecture</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Hardware</th>
<th class="tableblock halign-left valign-top">Recommended</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum 4 dedicated cores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Test Server</em> Minimum 8&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Base Installation</em> Minimum 16&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Production Server</em> Minimum 32&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Space:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/</code> Minimum 100&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/lib/pgsql</code> Minimum 50&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/spacewalk</code> Minimum 50&#160;GB per SUSE product and 250&#160;GB per Red Hat product</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="quickstart.sect.prereq.network"><a class="anchor" href="#quickstart.sect.prereq.network"></a><a class="link" href="#quickstart.sect.prereq.network">1.2.4. Network Requirements</a></h4>
<div class="paragraph">
<p>This section details the networking and port requirements for .</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Fully Qualified Domain Name (FQDN)</dt>
<dd>
<p>The  server must resolve its FQDN correctly or cookies will not work properly on the WebUI.
For more information about configuring the hostname and DNS, see <a href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_yast.html#sec_basicnet_yast_change_host">SUSE Linux Enterprise Server Documentation - Configuring Host Name and DNS</a></p>
</dd>
<dt class="hdlist1">Hostname and IP Address</dt>
<dd>
<p>To ensure that the  domain name can be resolved by its clients, both server and client machines must be connected to a working DNS server.
For more information about setting up a DNS server, see <a href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html">SUSE Linux Enterprise Server Documentation - The Domain Name System</a></p>
</dd>
<dt class="hdlist1">Using a Proxy When Installing from SUSE Linux Enterprise Media</dt>
<dd>
<p>If you are on an internal network and do not have access to SUSE Customer Center, you can set up and use a proxy during installation.
For more information about configuring a proxy for access to SUSE Customer Center during a SUSE Linux Enterprise installation, see <a href="https://www.suse.com/documentation/sled-12/singlehtml/book_sle_deployment/book_sle_deployment.html#sec.i.yast2.start.parameters.proxy">SUSE Linux Enterprise Server Documentation -  Using a Proxy During Installation</a></p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title=":heavy_exclamation_mark:"></i>
</td>
<td class="content">
<div class="title">Naming Your Server</div>
<div class="paragraph">
<p>The hostname of  must not contain uppercase letters as this may cause <em>jabberd</em> to fail.
Choose the hostname of your  server carefully.
Although changing the server name is possible, it is a complex process and unsupported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In a production environment,  server and its clients should always use a firewall.
This table gives an overview of required ports, to be used when you are setting up your firewall rules.</p>
</div>
<table id="tab.install.ports.server1" class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Required Server Ports</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">67</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">69</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TFTP, used to support PXE services</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP, used in some bootstrap cases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP time service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS, used for WebUI, client, Proxy server, and API traffic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4505</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Salt, used by the Salt-master to accept communication requests from minions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4506</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Salt, used by the Salt-master to accept communication requests from minions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5222</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XMPP client, used for communications with the <code class="systemitem">osad</code> daemon on traditional client systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5269</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XMPP server, used for pushing actions to  Proxy</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information on disconnected setup and port configuration, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#disconnect-setup">[disconnect-setup]</a></p>
</li>
<li>
<p><a href="#advanced.topics.app.ports.server">[advanced.topics.app.ports.server]</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="quickstart.sect.prereq.clientos"><a class="anchor" href="#quickstart.sect.prereq.clientos"></a><a class="link" href="#quickstart.sect.prereq.clientos">1.2.5. Supported Client Systems</a></h4>
<div class="paragraph">
<p>Supported operating systems for traditional and Salt clients are listed in this table.</p>
</div>
<table id="mgr.supported.clients" class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Supported Client Systems</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operating Systems</th>
<th class="tableblock halign-left valign-top">Architecture</th>
<th class="tableblock halign-left valign-top">Traditional Clients</th>
<th class="tableblock halign-left valign-top">Salt Clients</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUSE Linux Enterprise 11 SP4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86, x86_64, Itanium, IBM POWER, z Systems</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUSE Linux Enterprise 12 SP3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64, IBM POWER (ppc64le), z Systems, ARM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUSE Linux Enterprise 15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64, IBM POWER (ppc64le), z Systems, ARM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Latest minor release Red Hat Enterprise Linux Server 6</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86, x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Latest minor release Red Hat Enterprise Linux Server 7</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Enterprise Server 2015, 2015 SP1, 2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Supported Versions and SP Levels</div>
<div class="paragraph">
<p>Client operating system versions and SP levels must be under general support (normal or LTSS) to be supported with .
For details on supported product versions, see <a href="https://www.suse.com/lifecycle" class="bare">https://www.suse.com/lifecycle</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sles.installation.within.kvm.jeos"><a class="anchor" href="#sles.installation.within.kvm.jeos"></a><a class="link" href="#sles.installation.within.kvm.jeos">2. JeOS Installation</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="quickstart.sect.kvm.settings"><a class="anchor" href="#quickstart.sect.kvm.settings"></a><a class="link" href="#quickstart.sect.kvm.settings">2.1. Virtual Machine Manager (virt-manager) Settings</a></h3>
<div class="paragraph">
<p>This chapter provides the required (KVM) settings for installation of SUSE Linux Enterprise Just Enough Operating System (JeOS) 12 as the base for .
A kernel virtual machine (KVM) combined with Virtual Machine Manager (<em>virt-manager</em>) will be used as a sandbox for your first installation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">SUSEVirtualization Guide</div>
<div class="paragraph">
<p>For more information on virtualization, see: <a href="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">SUSE Linux Enterprise Virtualization Guide</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Enter the following settings when creating a new virtual machine using <strong>virt-manager</strong>.
In the following table replace <em>version</em> with the actual product version string.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2">KVM Settings</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation Method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import Existing Disk Image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLES&lt;VERSION&gt;-JeOS-for-kvm-and-xen.x86_64-GM.qcow2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4096 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU&#8217;s:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage Format:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>.qcow2</em> 24 GB (Default) JeOS Root Partition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual Disks:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101 GB for <code class="path">/var/spacewalk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50 GB for <code class="path">/var/lib/pgsql</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 GB for swap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-setup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bridge <em>br0</em></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">SUSE Virtualization Guide</div>
<div class="paragraph">
<p>For more information on virtualization, see: <a href="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">SUSE Linux Enterprise Virtualization Guide</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jeos.kvm.settings"><a class="anchor" href="#jeos.kvm.settings"></a><a class="link" href="#jeos.kvm.settings">2.2. JeOS KVM Settings</a></h3>
<div class="paragraph">
<p>Create three additional virtual disks required for the  storage partitions.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Creating the Required Partitions with KVM</div>
<ol class="arabic">
<li>
<p>Create a new virtual machine using the downloaded JeOS KVM image and select <b class="menuref">Import existing disk image</b> .</p>
</li>
<li>
<p>Configure RAM and number of CPUs (At least 4 GB RAM and 2 CPUs).</p>
</li>
<li>
<p>Name your KVM machine and select the <b class="menuref">Customize configuration before install</b> check box.</p>
</li>
<li>
<p>Select the <b class="button">Add Hardware</b> button and create three new virtual disks with the following specifications.
These disks will be partitioned and mounted in <a href="#proc.jeos.susemgr.prep">Procedure: Preparing JeOS for  Installation</a>.</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VirtIO Storage Disks</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Sizing</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spacewalk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pgsql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">swap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4&#160;GB</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <b class="menuref">Begin Installation</b> and your new VM will boot from the JeOS image.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Proceed through the basic JeOS installation prompts until you reach the command line.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Root Password</div>
<div class="paragraph">
<p>During the basic installation prompts you are asked to enter the root password.
Select a strong password and then in the next message box <b class="button">Confirm root Password</b>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jeos.susemgr.prep"><a class="anchor" href="#jeos.susemgr.prep"></a><a class="link" href="#jeos.susemgr.prep">2.3. Preparing JeOS for </a></h3>
<div id="proc.jeos.susemgr.prep" class="olist arabic">
<div class="title">Procedure: Preparing JeOS for  Installation</div>
<ol class="arabic">
<li>
<p>Register with SCC:</p>
<div class="listingblock">
<div class="content">
<pre>SUSEConnect -e`EMAIL_ADDRESS`-r`SUSE_MANAGER_CODE`</pre>
</div>
</div>
</li>
<li>
<p>Add  repositories:</p>
<div class="listingblock">
<div class="content">
<pre>SUSEConnect -p SUSE-Manager-Server/&lt;productnumber&gt;/x86_64 -r`SUSE_MANAGER_CODE`</pre>
</div>
</div>
</li>
<li>
<p>Install <span class="package">yast2-storage</span> with all required dependencies (approx. 40 packages, 30 MB when installed).
This basic administration package is required for preparing storage partitions:</p>
<div class="listingblock">
<div class="content">
<pre>zypper in -t package yast2-storage</pre>
</div>
</div>
</li>
<li>
<p>Partition and mount the virtual disks at the following locations using YaST Partitioner (<code class="command">yast2 disk</code>).</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VirtIO Storage Disks</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Storage Size</th>
<th class="tableblock halign-left valign-top">File System Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/spacewalk</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XFS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/lib/pgsql</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XFS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">swap</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>SLES by default uses the BTRFS file system.
A mount point is created automatically for <code class="path">/var/lib/pgsql/</code> (even when not installed).
This must be removed or commented out from the <code class="path">/etc/fstab</code> entries.
As root, edit <code class="path">/etc/fstab</code> and comment out or remove the line:</p>
<div class="listingblock">
<div class="content">
<pre>/var/lib/pgsql btrfs subvol=@/var/lib/pgsql 0 0</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Remove <code class="command">pgsql</code> from the fstab Configuration File</div>
<div class="paragraph">
<p>If you do not remove this line from fstab the first time you shut down the server you will lose your database.
This occurs because you will have duplicate entries in the fstab file. <em>Updated tools shipped with recent SPs will no longer require human intervention.</em></p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Exit the partitioner and install the  pattern:</p>
<div class="listingblock">
<div class="content">
<pre>zypper in -t pattern suma_server</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For proceeding with  setup, see:
<a href="#">suma-setup-with-yast-sumasetup.adoc#suma-setup-with-yast-sumasetup</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quickstart3.chap.suma.installation.sles"><a class="anchor" href="#quickstart3.chap.suma.installation.sles"></a><a class="link" href="#quickstart3.chap.suma.installation.sles">3. SUSE Linux Enterprise Server Installation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides the required KVM settings for installation of SUSE Linux Enterprise Server media as the base for .
A kernel virtual machine KVM combined with Virtual Machine Manager (<code class="command">virt-manager</code>) will be used as a sandbox for this installation.</p>
</div>
<div class="sect2">
<h3 id="_sles_kvm_requirements"><a class="anchor" href="#_sles_kvm_requirements"></a><a class="link" href="#_sles_kvm_requirements">3.1. SLES KVM Requirements</a></h3>
<div class="paragraph">
<p>Enter the following settings when creating a new virtual machine using <code class="command">virt-manager</code> (replace <code class="replaceable">version</code> with the actual version string):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">KVM Settings for SLES</th>
<th class="tableblock halign-left valign-top">Installation Method:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local install media (ISO image or CDROM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SLE-[replaceable]</code>version<code>-Server-x86_64-GM-DVD1.iso</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4096&#160;MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPUs:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage Format:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 3&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Space:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">234&#160;GB split between 4&#160;GB swap and 130&#160;GB mounted at <code class="path">/var/spacewalk/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Virtual Disk 1) and 50&#160;GB mounted at <code class="path">/var/lib/pgsql</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Virtual Disk 2).  The rest for the root partition (100&#160;GB+).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">example-server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="sles.installation.within.kvm.media"><a class="anchor" href="#sles.installation.within.kvm.media"></a><a class="link" href="#sles.installation.within.kvm.media">3.1.1. SLES KVM Settings</a></h4>
<div class="paragraph">
<p>This section provides guidance on installation of 
utilizing the full installation media with KVM and <code class="command">virt-manager</code>.
This section assumes you have previously setup an account with SCC and downloaded the SLES full installation media.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Preparing for SLES Installation</div>
<ol class="arabic">
<li>
<p>In <code class="command">virt-manager</code> select <span class="menuseq"><b class="menu">File</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">New Virtual Machine</b></span>.</p>
</li>
<li>
<p>Select <b class="button">Local install media (ISO image or CDROM)</b>.</p>
</li>
<li>
<p>Ensure <b class="button">Use ISO Image</b> is selected then click <b class="button">Browse</b> and locate the full SLES image you downloaded from your SCC account.</p>
</li>
<li>
<p>Configure your machine with at least 4096 MB RAM and a minimum of 2 CPUs.</p>
</li>
<li>
<p>Create a storage device with a minimum of 234 GB storage space for the installation.
During the partitioning setup of the SLES installation this disk should be partitioned into the following disks:</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Disk Space Requirements</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4&#160;GB Swap space</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">130&#160;GB XFS partition (or dedicated virtual disk) for <code class="path">/var/spacewalk/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">50&#160;GB XFS partition (or dedicated virtual disk) for <code class="path">/var/lib/pgsql/</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The remaining storage space will be used by the operating system for the root partition.
Select <b class="button">Finish</b> to begin the installation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Installation of SUSE Linux Enterprise Server will begin.
For more information on completing an installation of SUSE Linux Enterprise Server, see: <a href="https://www.suse.com/documentation/sles-12/book_quickstarts/data/sec_sle_installquick.html">SUSE Linux Enterprise Installation Quickstart</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="quickstart3.sec.suma.installation.sles.sumaext"><a class="anchor" href="#quickstart3.sec.suma.installation.sles.sumaext"></a><a class="link" href="#quickstart3.sec.suma.installation.sles.sumaext">3.2. Selecting the  Extension</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>During the SUSE Linux Enterprise Server installation you will be presented with the <b class="button">Extension and Module Selection</b>.</p>
</li>
<li>
<p>Select the  Extension and then click the <b class="button">Next</b> button.</p>
</li>
<li>
<p>Complete the SUSE Linux Enterprise Server installation.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/manager-extension.png" alt="manager extension">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="suma.setup.with.yast"><a class="anchor" href="#suma.setup.with.yast"></a><a class="link" href="#suma.setup.with.yast">4. SUSE Manager Setup</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="suma.setup.with.yast.setup"><a class="anchor" href="#suma.setup.with.yast.setup"></a><a class="link" href="#suma.setup.with.yast.setup">4.1. Topics</a></h3>
<div class="paragraph">
<p>This section covers  setup.
You will perform the following procedures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start  setup via YaST or command line</p>
</li>
<li>
<p>Create the main administration account with the  WebUI</p>
</li>
<li>
<p>Name your base organization and add login credentials</p>
</li>
<li>
<p>Sync the SUSE Linux Enterprise product channel from SUSE Customer Center</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="suma-setup-with-yast-sumasetup"><a class="anchor" href="#suma-setup-with-yast-sumasetup"></a><a class="link" href="#suma-setup-with-yast-sumasetup">4.2.  Setup</a></h3>
<div class="paragraph">
<p>This section will guide you through  setup procedures.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure:  Setup</div>
<ol class="arabic">
<li>
<p>Login to the  server desktop and perform one of the following actions to begin setup:</p>
<div class="ulist">
<ul>
<li>
<p>Select <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">System Tools</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">YaST</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">SUSE Manager Setup</b></span>.</p>
</li>
<li>
<p>Open a terminal as root and type <code class="command">yast2 susemanager_setup</code> to begin setup.</p>
</li>
</ul>
</div>
</li>
<li>
<p>From the introduction screen select <span class="menuseq"><b class="menu">SUSE Manager Setup</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Setup SUSE Manager from scratch</b></span>. Then click <b class="button">Next</b> to continue.</p>
</li>
<li>
<p>Enter the email address that should receive status notifications about .
The number of emails sent from  can be extensive, therefore notifications via email may be disabled from the WebUI after setup. Then click <b class="button">Next</b> to continue.</p>
</li>
<li>
<p>Enter your certificate information and a password. The password should be stored in a secure location.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title=":heavy_exclamation_mark:"></i>
</td>
<td class="content">
<div class="title">Certificate Password</div>
<div class="paragraph">
<p><em>Without this password it will not be possible to set up a  Proxy Server.</em></p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <b class="button">Next</b> to continue.</p>
<div class="imageblock">
<div class="content">
<img src="_images/quickstart-mgr-setup4.png" alt="quickstart mgr setup4">
</div>
</div>
</li>
<li>
<p>From the <span class="menuseq"><b class="menu">SUSE Manager Setup</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Database Settings</b></span> screen, enter a database user and password.
This password should be stored in a secure location.
Then click <b class="button">Next</b> to continue.</p>
<div class="imageblock">
<div class="content">
<img src="_images/quickstart-mgr-setup5.png" alt="quickstart mgr setup5">
</div>
</div>
</li>
<li>
<p>Enter your SUSE Customer Center<code class="systemitem">Organization Credentials</code>.
Open <a href="https://scc.suse.com/login" class="bare">https://scc.suse.com/login</a> to register or access to your organization credentials.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title"><b class="button">Skip</b></div>
<div class="paragraph">
<p>If you are using SUSE Enterprise products,  requires that you connect to SUSE Customer Center for software, updates and patches.
You will not be able to synchronize or provide Enterprise channels to your clients without this information.</p>
</div>
<div class="paragraph">
<p>However if you would like to work with open source software channels and repositories then click the <b class="button">Skip</b> button to continue.
You can setup your SUSE Customer Center credentials or configure inter-server sync at a later time.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/quickstart-mgr-setup9.png" alt="quickstart mgr setup9">
</div>
</div>
</li>
<li>
<p>Click <b class="button">Next</b> to continue.</p>
</li>
<li>
<p>Click <b class="button">Yes</b> to run setup when prompted.</p>
</li>
<li>
<p>Once setup has completed, click <b class="button">Next</b> to continue.
You will see the address of the  WebUI.</p>
</li>
<li>
<p>Click <b class="button">Finish</b> to complete  setup.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the next section you will create the administrator&#8217;s account and synchronize with SUSE Customer Center.</p>
</div>
<div class="sect3">
<h4 id="suma.setup.with.yast.admin"><a class="anchor" href="#suma.setup.with.yast.admin"></a><a class="link" href="#suma.setup.with.yast.admin">4.2.1. Creating the Main Administration Account</a></h4>
<div class="paragraph">
<p>This section will walk you through creating your organizations main administration account for .</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Admin and User Accounts</div>
<div class="paragraph">
<p>The main administration account is the <em>highest authority account</em> within  and therefore account access information should be stored in a secure location.</p>
</div>
<div class="paragraph">
<p>For security it is recommended that the main administrator creates <em>low level admin accounts</em> designated for administration of organizations and individual groups.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="suma.setup.admin.account" class="olist arabic">
<div class="title">Procedure: Setup the Main Administration Account</div>
<ol class="arabic">
<li>
<p>In the browser, enter the address provided after completing setup and open the  WebUI.</p>
</li>
<li>
<p>Add your organization name to the <span class="menuseq"><b class="menu">Create Organization</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Organization Name</b></span> field.</p>
</li>
<li>
<p>Add your username and password to the <span class="menuseq"><b class="menu">Create Organization</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Desired Login</b></span> and <span class="menuseq"><b class="menu">Create Organization</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Desired Password</b></span> fields.</p>
</li>
<li>
<p>Fill in the Account Information fields including an email for system notifications.</p>
</li>
<li>
<p>Select <b class="menuref">Create Organization</b> to finish creating your administration account.</p>
<div class="imageblock">
<div class="content">
<img src="_images/quickstart-mgr-setup-admin1.png" alt="quickstart mgr setup admin1">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You should now be presented with the  Front Page. In the next section you will prepare the server for connecting the first client.</p>
</div>
</div>
<div class="sect3">
<h4 id="quickstart.first.channel.sync"><a class="anchor" href="#quickstart.first.channel.sync"></a><a class="link" href="#quickstart.first.channel.sync">4.2.2. Syncing Products from SUSE Customer Center</a></h4>
<div class="paragraph">
<p>SUSE Customer Center (SCC) maintains a collection of repositories which contain packages, software and updates for all supported enterprise client systems.
These repositories are organized into channels each of which provide software specific to a distribution, release and architecture.
After synchronizing with SCC clients may receive updates, and be organized into groups and assigned to specific product software channels.</p>
</div>
<div class="paragraph">
<p>This section covers synchronizing with SCC from the WebUI and adding your first client channel.</p>
</div>
<div id="proc-quickstart-first-channel-sync" class="olist arabic">
<div class="title">Procedure: Synchronizing with SUSE Customer Center</div>
<ol class="arabic">
<li>
<p>From the  WebUI start page select <span class="menuseq"><b class="menu">Admin</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Setup Wizard</b></span>.</p>
</li>
<li>
<p>From the <span class="menuseq"><b class="menu">Main Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Admin</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Setup Wizard</b></span> page select the <b class="button">SUSE Products</b> tab.
Wait a moment for the products list to populate.
If you previously registered with SUSE Customer Center a list of products will populate the table.
This table lists architecture, channels, and status information.
For more information, see:
<a href="reference-webui-admin.html#ref-webui-product-wizard" class="page">Product Wizard</a></p>
<div class="imageblock">
<div class="content">
<img src="_images/admin_suse_products.png" alt="admin suse products">
</div>
</div>
</li>
<li>
<p>Since Your SUSE Linux Enterprise client is based on <code class="systemitem">x86_64</code> architecture scroll down the page and select the check box for this channel now.</p>
<div class="ulist">
<ul>
<li>
<p>Add channels to  by selecting the check box to the left of each channel.
Click the arrow symbol to the left of the description to unfold a product and list available modules.</p>
</li>
<li>
<p>Start product synchronization by clicking the <b class="button">Add Products</b> button.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After adding the channel  will schedule the channel to be copied.
This can take a long time as  will copy channel software sources from the SUSE repositories located at SUSE Customer Center to local <code class="path">/var/spacewalk/</code> directory of your server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">PostgreSQL and Transparant Huge Pages</div>
<div class="paragraph">
<p>In some environments, <em>Transparent Huge Pages</em> provided by the kernel may slow down PostgreSQL workloads significantly.</p>
</div>
<div class="paragraph">
<p>To disable <em>Transparant Huge Pages</em> set the <code class="option">transparent_hugepage</code> kernel parameter to <code class="option">never</code>.
This has to be changed in <code class="path">/etc/default/grub</code> and added to the line <code class="option">GRUB_CMDLINE_LINUX_DEFAULT</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda1 splash=silent quiet showopts elevator=noop transparent_hugepage=never"</pre>
</div>
</div>
<div class="paragraph">
<p>To write the new configuration run <code class="command">grub2-mkconfig -o /boot/grub2/grub.cfg</code>.
To update the grub2 during boot run <code class="command">grub2-install /dev/sda</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Monitor channel synchronization process in real-time by viewing channel log files located in the directory <code class="path">/var/log/rhn/reposync</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>tailf /var/log/rhn/reposync/&lt;CHANNEL_NAME&gt;.log</pre>
</div>
</div>
<div class="paragraph">
<p>After the channel sync process has completed proceed to:
<a href="quickstart3_chap_suma_keys_and_first_client.html#gs-registering-clients" class="page">Registering Clients</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing.and.registering.clients"><a class="anchor" href="#preparing.and.registering.clients"></a><a class="link" href="#preparing.and.registering.clients">5. Registering Clients</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="#_introduction"></a><a class="link" href="#_introduction">5.1. Introduction</a></h3>
<div class="paragraph">
<p>Releases prior to  2.1 were shipped with a <strong>traditional</strong> client management framework (which is still fully supported today).
SUSE Manager 3 and later include the Salt framework in addition to the <strong>traditional</strong> framework.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Salt</dt>
<dd>
<p>Is an end-to-end data-center automation tool which may also be used outside the scope of  to introduce reactive, real-time orchestration, and configuration management.
Managed systems can coexist using both <strong>traditional</strong> and <strong>Salt</strong> frameworks.
This functionality provides a safe learning environment when switching to <strong>Salt</strong> while you continue to maintain existing deployments.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="create.act.keys"><a class="anchor" href="#create.act.keys"></a><a class="link" href="#create.act.keys">5.2. Creating Activation Keys</a></h3>
<div class="paragraph">
<p>The following procedure will guide you through creating the activation keys for your test channels.
Activation keys can be used with both Salt and traditional clients.</p>
</div>
<div class="paragraph">
<p>Activation keys define the number of software entitlements, channels, and groups a client system is allowed to subscribe to.
This information is passed on to all systems registered with said key.
Each activation key is bound to the organization for which it has been created.</p>
</div>
<div id="create.activation.keys" class="olist arabic">
<div class="title">Procedure: Creating Activation Keys</div>
<ol class="arabic">
<li>
<p>As the administrator login to the  WebUI.</p>
</li>
<li>
<p>Switch to <span class="menuseq"><b class="menu">Systems</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Activation Keys</b></span>.</p>
</li>
<li>
<p>Click the <b class="button">Create Key</b> link at the upper right corner.</p>
<div class="imageblock">
<div class="content">
<img src="_images/systems_create_activation_key.png" alt="systems create activation key">
</div>
</div>
</li>
<li>
<p>Enter an <span class="menuseq"><b class="menu">Activation Key Details</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Description</b></span> to identify the generated activation key.</p>
</li>
<li>
<p>Enter a human readable <span class="menuseq"><b class="menu">Activation Key Details</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Key</b></span> string value such as <strong>SLES12-SP3</strong> to represent the distribution and service pack associated with the key.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Allowed Characters</div>
For all SUSE
Products do not use commas within the key string.
Red Hat Products require commas.
For more information, see <a href="#ref.webui.systems.activ-keys">[ref.webui.systems.activ-keys]</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select the SUSE Linux Enterprise channel that was added during
<a href="#">quickstart3_chap_sumasetup_with_yast.adoc#gs-syncing-with-scc</a>
from the <span class="menuseq"><b class="menu">Activation Key Details</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Base Channels</b></span> drop down.</p>
</li>
<li>
<p>For this guide leave <span class="menuseq"><b class="menu">Activation Key Details</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Contact Method</b></span> set to default.</p>
</li>
<li>
<p><span class="menuseq"><b class="menu">Activation Key Details</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Universal Default</b></span> should remain unchecked. Click <b class="button">Update Activation Key</b> to complete creation of the activation key.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create.tools.repository"><a class="anchor" href="#create.tools.repository"></a><a class="link" href="#create.tools.repository">5.3. Creating the  Tools Repository</a></h3>
<div class="paragraph">
<p>In this section you will create a tools repository on the  Server for providing client tools.
The client tools repository contains packages for installing Salt on minions as well as required packages for registering traditional clients during the bootstrapping procedure.
These packages will be installed from the newly generated repository during the registration process.
In the following procedure you will create the SUSE Linux Enterprise tools repository.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title=":heavy_exclamation_mark:"></i>
</td>
<td class="content">
<div class="title">Creating a Tools Repository when an SCC Channel has not been Synced</div>
<div class="paragraph">
<p>Before following the procedure to create the tools repository make sure the SUSE vendor channel you will be using with your client has been completely synced.
You can check this by running <code class="command">tail -f /var/log/rhn/reposync/</code>&lt;CHANNEL_NAME&gt;<code>.log</code> as <em>root</em>.
In the following example replace <code class="replaceable">version</code> with the actual version string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># tail -f /var/log/rhn/reposync/sles`version`-pool-x86_64.log</pre>
</div>
</div>
<div class="paragraph">
<p>Once completed you should see the following output in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2017/12/12 15:20:32 +02:00 Importing packages started.
2017/12/12 15:22:02 +02:00 1.07 %
...
2017/12/12 15:34:25 +02:00 86.01 %
2017/12/12 15:35:49 +02:00 Importing packages finished.
2017/12/12 15:35:49 +02:00 Linking packages to channel.
...
2017/12/12 15:35:59 +02:00 Sync completed.</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure: Generating the Tools Repository for SUSE Linux Enterprise</div>
<ol class="arabic">
<li>
<p>Open a terminal on the server as root and enter the following command to list available bootstrap repositories:</p>
<div class="listingblock">
<div class="content">
<pre>mgr-create-bootstrap-repo -l SLE-`version`-x86_64</pre>
</div>
</div>
</li>
<li>
<p>Then invoke the same command using the listed repository as the product label to actually create the bootstrap repository:</p>
<div class="listingblock">
<div class="content">
<pre>mgr-create-bootstrap-repo -c SLE-version-x86_64</pre>
</div>
</div>
</li>
<li>
<p> will create and add the client tools to the newly created <code class="path">repositories</code> directory located at <code class="path">/srv/www/htdocs/pub/repositories/</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This repository is suitable for both Server and Desktop of SUSE Linux Enterprise
.</p>
</div>
</div>
<div class="sect2">
<h3 id="registering.clients.traditional"><a class="anchor" href="#registering.clients.traditional"></a><a class="link" href="#registering.clients.traditional">5.4. Registering Traditional Clients</a></h3>
<div class="sect3">
<h4 id="generate.bootstrap.script"><a class="anchor" href="#generate.bootstrap.script"></a><a class="link" href="#generate.bootstrap.script">5.4.1. Generating a Bootstrap Script</a></h4>
<div class="paragraph">
<p>This section goes over generating a template bootstrap script which will be copied and modified for use with &#8220;traditional&#8221; clients.
Traditional clients register with  via a bootstrap script executed on the client which deploys all necessary packages to it.
The bootstrap script contains parameters which assigns a client system to its base channel.
Two of these important parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Activation Keys</p>
</li>
<li>
<p>GNU Privacy Guard (GPG) Keys</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">SLES 15 and Python 3</div>
<div class="paragraph">
<p>SLES 15 utilizes Python 3 by default.  Because of this change any older
bootstrap scripts (based on python 2) must be re-created for SLES 15 systems. Attempting to
register SLES 15 systems with SUSE Manager using Python 2 versions of the bootstrap script will
fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following procedure will guide you through generating a bootstrap script.</p>
</div>
<div id="create.boot.script" class="olist arabic">
<div class="title">Procedure: Creating a Bootstrap Script</div>
<ol class="arabic">
<li>
<p>From the  WebUI, browse to <span class="menuseq"><b class="menu">Main Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Admin</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Manager Configuration</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Bootstrap Script</b></span>. For more information, see <a href="#s3-sattools-config-bootstrap">[s3-sattools-config-bootstrap]</a>.</p>
</li>
<li>
<p>In the <code class="guimenu">SUSE Manager Configuration - Bootstrap</code> dialog disable <code class="guimenu">Bootstrap using Salt</code>.
Use default settings and click the <b class="button">Update</b> button.</p>
<div class="imageblock">
<div class="content">
<img src="_images/mgr_configuration_bootstrap_trad.png" alt="mgr configuration bootstrap trad">
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Using SSL</div>
<div class="paragraph">
<p>Unchecking <b class="menuref">Enable SSL</b> in the WebUI or setting <code>USING_SSL=0</code> in the bootstrap script is not recommended.
If you disable SSL nevertheless you will need to manage custom CA certificates to be able to run the registration process successfully.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>A template bootstrap script is generated and stored on the server&#8217;s file system in the <code class="path">/srv/www/htdocs/pub/bootstrap</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre>cd /srv/www/htdocs/pub/bootstrap</pre>
</div>
</div>
<div class="paragraph">
<p>The bootstrap script is also available at <code class="path"><a href="https://example.com/pub/bootstrap/bootstrap.sh" class="bare">https://example.com/pub/bootstrap/bootstrap.sh</a></code>
.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="#modify.bootstrap.script">Editing the Bootstrap Script</a> will cover copying and modifying your bootstrap template for use with each client.</p>
</div>
</div>
<div class="sect3">
<h4 id="modify.bootstrap.script"><a class="anchor" href="#modify.bootstrap.script"></a><a class="link" href="#modify.bootstrap.script">5.4.2. Editing the Bootstrap Script</a></h4>
<div class="paragraph">
<p>In this section you will copy and modify the template bootstrap script you created from <a href="#generate.bootstrap.script">Generating a Bootstrap Script</a>.</p>
</div>
<div class="paragraph">
<p>A minimal requirement when modifying a bootstrap script for use with  is the inclusion of an activation key.
Depending on your organizations security requirements it is strongly recommended to include one or more (GPG) keys (for example, your organization key, and package signing keys).
For this tutorial you will be registering with the activation keys created in the previous section.</p>
</div>
<div id="mod.bootstrap.script" class="olist arabic">
<div class="title">Procedure: Modifying the Bootstrap Script</div>
<ol class="arabic">
<li>
<p>Login as root from the command line on your  server.</p>
</li>
<li>
<p>Navigate to the bootstrap directory with:</p>
<div class="listingblock">
<div class="content">
<pre>cd /srv/www/htdocs/pub/bootstrap/</pre>
</div>
</div>
</li>
<li>
<p>Create and rename two copies of the template bootstrap script for use with each of your clients.</p>
<div class="listingblock">
<div class="content">
<pre>cp bootstrap.sh bootstrap-sles11.sh
cp bootstrap.sh bootstrap-sles12.sh</pre>
</div>
</div>
</li>
<li>
<p>Open <code class="path">sles12.sh</code> for modification.
Scroll down and modify both lines marked in green.
You must comment out <code>exit 1</code> with a hash mark (<code>\#</code>) to activate the script and then enter the name of the key for this script in the <code>ACTIVATION_KEYS=</code> field as follows:</p>
<div class="listingblock">
<div class="content">
<pre>echo "Enable this script: comment (with #'s) this block (or, at least just"
echo "the exit below)"
echo
#exit 1

# can be edited, but probably correct (unless created during initial install):
# NOTE: ACTIVATION_KEYS *must* be used to bootstrap a client machine.
ACTIVATION_KEYS=1-sles12
ORG_GPG_KEY=</pre>
</div>
</div>
</li>
<li>
<p>Once you have completed your modifications save the file and repeat this procedure for the second bootstrap script.
Proceed to <a href="#connect.first.client">Connecting Clients</a>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Finding Your Keys</div>
<div class="paragraph">
<p>To find key names you have created: In the WebUI, click <span class="menuseq"><b class="menu">Home</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Overview</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Manage Activation keys</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Key Field</b></span>.
All keys created for channels are listed on this page.
You must enter the full name of the key you wish to use in the bootstrap script exactly as presented in the key field.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="connect.first.client"><a class="anchor" href="#connect.first.client"></a><a class="link" href="#connect.first.client">5.4.3. Connecting Clients</a></h4>
<div class="paragraph">
<p>This section covers connecting your clients to  with the modified bootstrap script.</p>
</div>
<div id="run.bootstrap.script" class="olist arabic">
<div class="title">Procedure: Running the Bootstrap Script</div>
<ol class="arabic">
<li>
<p>From your  Server command line as root navigate to the following directory:</p>
<div class="listingblock">
<div class="content">
<pre>cd /srv/www/htdocs/pub/bootstrap/</pre>
</div>
</div>
</li>
<li>
<p>Run the following command to execute the bootstrap script on the client:</p>
<div class="listingblock">
<div class="content">
<pre>cat MODIFIED-SCRIPT.SH \
| ssh root@example.com /bin/bash</pre>
</div>
</div>
</li>
<li>
<p>The script will execute and proceed to download the required dependencies located in the repositories directory you created earlier.
Once the script has finished running, log in to the WebUI and click <span class="menuseq"><b class="menu">Systems</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Overview</b></span> to see the new client listed.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This concludes the bootstrap section of this guide. <a href="#preparing.and.registering.clients.salt">Registering Salt Clients</a> will go over registering Salt minions for use with .</p>
</div>
</div>
<div class="sect3">
<h4 id="sect.tradclient.packagelock"><a class="anchor" href="#sect.tradclient.packagelock"></a><a class="link" href="#sect.tradclient.packagelock">5.4.4. Package Locks</a></h4>
<div class="paragraph">
<p>Package locks are used to prevent unauthorized installation or upgrades to software packages on traditional clients.
When a package has been locked, it will display to users with a padlock icon, indicating that it can not be installed.
Any attempt to install a locked package will be reported as an error in the event log.</p>
</div>
<div class="paragraph">
<p>Locked packages can not be installed, upgraded, or removed, either through the  WebUI, or directly on the client machine using a package manager.
Locked packages will also indirectly lock any dependent packages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Package locks can only be used on traditional clients that use the Zypper package manager.
The feature is not currently supported on Red Hat Linux Enterprise or Salt clients.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure: Using Package Locks</div>
<ol class="arabic">
<li>
<p>On the client machine, install the <code class="package">zypp-plugin-spacewalk</code> package:</p>
<div class="listingblock">
<div class="content">
<pre># zypper in zypp-plugin-spacewalk</pre>
</div>
</div>
</li>
<li>
<p>Navigate to the <span class="menuseq"><b class="menu">Software</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Packages</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Lock</b></span> tab on the managed system to see a list of all available packages.</p>
</li>
<li>
<p>Select the packages to lock, and click <b class="button">Request Lock</b>.
You can also choose to enter a date and time for the lock to activate.
Note that even if you do not select a date and time, the lock might not activate immediately.</p>
</li>
<li>
<p>To remove a package lock, select the packages to unlock and click <b class="button">Request Unlock</b>.
You can also choose to enter a date and time for the lock to deactivate.
Note that even if you do not select a date and time, the lock might not deactivate immediately.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="preparing.and.registering.clients.salt"><a class="anchor" href="#preparing.and.registering.clients.salt"></a><a class="link" href="#preparing.and.registering.clients.salt">5.5. Registering Salt Clients</a></h3>
<div class="paragraph">
<p>There are currently three methods for registering Salt minions.
This section describes the first method and uses a bootstrap repository.
The second method uses bootstrap script, and is described in <a href="#registering.clients.traditional">Registering Traditional Clients</a>.
The third method uses the WebUI, and is described in <a href="#ref.webui.systems.bootstrapping">[ref.webui.systems.bootstrapping]</a>.</p>
</div>
<div class="paragraph">
<p>You can also use these methods to change existing traditional clients into Salt minions.</p>
</div>
<div class="paragraph">
<p>The following section assumes you have created a SUSE Manager tools repository.
You can review creating a tools repository in <a href="#create.tools.repository">Creating the  Tools Repository</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Ensure the Salt Master is Reachable During Bootstrap</div>
<div class="paragraph">
<p>The Salt master and its proxy should always be reachable via both IP address and the FQDN.
In the following rare scenario:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Salt master (SUSE Manager) is in some DNS.</p>
</li>
<li>
<p>Your Minions are in a different subnet bound to an alternate DNS and the Salt master record is absent.</p>
</li>
<li>
<p>The Salt master cannot know that the minion is not utilizing the same DNS record. The the Salt master nevertheless sends the FQDN of itself to the minion expecting it to join.</p>
</li>
<li>
<p>The minion looks for a different DNS, one where the master record does not exist therefore bootstrap fails.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you have fully synced a base channel from the WebUI
for clients to obtain software sources from, for example: <code>SLES12-SP3-Pool_for_x86_64</code> perform the following procedure to register a Salt minion.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Registering Salt Minions</div>
<ol class="arabic">
<li>
<p>On your minion as {rootuser} enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre>zypper ar http://`FQDN.SUSE.Manager.com`/pub/repositories/sle/12/3/bootstrap/ \
   sles12-sp3</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not use <code>HTTPS</code>.
Use <code>HTTP</code> instead to avoid errors.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After adding the repository containing the necessary Salt packages execute:</p>
<div class="listingblock">
<div class="content">
<pre>zypper in salt-minion</pre>
</div>
</div>
</li>
<li>
<p>Modify the minion configuration file to point to the fully qualified domain name (<code class="replaceable">FQDN</code>) of the  server (master):</p>
<div class="listingblock">
<div class="content">
<pre>vi /etc/salt/minion</pre>
</div>
</div>
<div class="paragraph">
<p>Find and change the line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>master: salt</pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>master:`FQDN.SUSE.Manager.com`</pre>
</div>
</div>
</li>
<li>
<p>Restart the Salt minion with:</p>
<div class="listingblock">
<div class="content">
<pre>systemctl restart salt-minion</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your newly registered minion should now show up within the WebUI under <span class="menuseq"><b class="menu">Salt</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Keys</b></span>.
Accept the <code class="guimenu">pending</code> key to begin management.</p>
</div>
<div class="paragraph">
<p>If you have used your hypervisor clone utility, and attempted to register the cloned Salt client, you might get this error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>We're sorry, but the system could not be found.</pre>
</div>
</div>
<div class="paragraph">
<p>This is caused by the new, cloned, system having the same machine ID as an existing, registered, system.
You can adjust this manually to correct the error and register the cloned system successfully.</p>
</div>
<div class="paragraph">
<p>For more information and instructions, see <a href="#">bp.chapt.suma3.troubleshooting.adoc#bp.chapt.suma3.troubleshooting.registering.cloned.salt.systems</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="salt.gs.guide.introduction"><a class="anchor" href="#salt.gs.guide.introduction"></a><a class="link" href="#salt.gs.guide.introduction">6. Getting Started with Salt</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="salt.gs.guide.intro"><a class="anchor" href="#salt.gs.guide.intro"></a><a class="link" href="#salt.gs.guide.intro">6.1. Introduction</a></h3>
<div class="paragraph">
<p>This section introduces you to the new Salt features added in  3.
This chapter assumes you have completed all previous Getting Started sections.
At a minimum have the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A freshly installed  server with a main admin account and a synced product channel</p>
</li>
<li>
<p>Preferably two registered Salt minions to experiment with.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you find yourself stuck at any point refer to the <em class="ref">SaltStack Get Started</em> tutorial located at <a href="https://docs.saltstack.com/en/getstarted/fundamentals/index.html" class="bare">https://docs.saltstack.com/en/getstarted/fundamentals/index.html</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This guide does not attempt to cover all that Salt has to offer.
This guide is a primer for using Salt with .
For comprehensive Salt documentation, see <a href="https://docs.saltstack.com/en/latest/contents.html" class="bare">https://docs.saltstack.com/en/latest/contents.html</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The current version of Salt in  is 2018.3.0.</p>
</div>
</div>
<div class="sect2">
<h3 id="salt.gs.guide.testing.first.minion"><a class="anchor" href="#salt.gs.guide.testing.first.minion"></a><a class="link" href="#salt.gs.guide.testing.first.minion">6.2. Understanding Salt Calls</a></h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Salt Calls</dt>
<dd>
<p>Salt calls are defined by three main properties:</p>
<div class="listingblock">
<div class="content">
<pre>salt 'target' &lt;function&gt; [arguments]</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Target</dt>
<dd>
<p>Use the second property in a Salt call to target a single machine or group of machines.
Specify the minion or group of minions you would like to run a function on.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">General Targeting</dt>
<dd>
<p>List available grains on all minions:</p>
<div class="listingblock">
<div class="content">
<pre>salt '*' grains.ls</pre>
</div>
</div>
<div class="paragraph">
<p>Ping a specific minion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt 'web1.example.com' test.ping</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Glob Targeting</dt>
<dd>
<p>Ping all minions using a domain:</p>
<div class="listingblock">
<div class="content">
<pre>salt '*example.com' test.ping</pre>
</div>
</div>
<div class="paragraph">
<p>Display the OS name of all minions with the <code>webserver</code> label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt 'webserver*' grains.item oscodename</pre>
</div>
</div>
</dd>
<dt class="hdlist1">List Targeting</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>salt -L 'webserver.example.com,db.example.com' test.ping</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Regular Expression Targeting</dt>
<dd>
<p>You may use PCRE-compliant regular expressions:</p>
<div class="listingblock">
<div class="content">
<pre>salt -E '(?!web)' test.ping</pre>
</div>
</div>
</dd>
<dt class="hdlist1">IP Address Targeting</dt>
<dd>
<p>List minion IP addresses:</p>
<div class="listingblock">
<div class="content">
<pre>salt '*' network.ip_addrs</pre>
</div>
</div>
<div class="paragraph">
<p>Ping a specific minion IP address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt -S '172.31.60.74' test.ping</pre>
</div>
</div>
<div class="paragraph">
<p>Ping all minions on a subnet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt -S 172.31.0.0/16 test.ping</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Lookup a Subnet Using the <code class="command">ip</code> Command</div>
<div class="paragraph">
<p>You can use the <code class="command">ip</code> command to find the subnet mask in the format of <code>192.168.1.1/24</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ip -o -f inet addr show | awk '/scope global/ {print $4}'</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Function</dt>
<dd>
<p>Once you have specified a target, provide the function you would like to call.
Functions also accept arguments.
Arguments are space-delimited, for example:</p>
<div class="listingblock">
<div class="content">
<pre>salt '*' cmd.run 'echo "Hello: $FIRST_NAME"' env='{FIRST_NAME: "John"}'</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Locating Additional Minion Functions</dt>
<dd>
<p>Find more functions which can be called on minions by running:</p>
<div class="listingblock">
<div class="content">
<pre>salt '*' sys.doc</pre>
</div>
</div>
<div class="paragraph">
<p>A full list of callable functions are located here: <a href="https://docs.saltstack.com/en/2015.8/ref/modules/all/index.html" class="bare">https://docs.saltstack.com/en/2015.8/ref/modules/all/index.html</a></p>
</div>
</dd>
<dt class="hdlist1">Arguments</dt>
<dd>
<p>Provides the extra data needed by a function you are calling.
The command <code class="command">pkg.install</code> requires an argument specifying a package to install. YaST has been selected for installation, for example:</p>
<div class="listingblock">
<div class="content">
<pre>salt '*' pkg.install yast2</pre>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="salt.gs.guide.term.overview"><a class="anchor" href="#salt.gs.guide.term.overview"></a><a class="link" href="#salt.gs.guide.term.overview">6.3. Common Salt Terminology</a></h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Grains</dt>
<dd>
<p>Grains provide information about the hardware of a minion.
For example, the operating system, IP addresses, network interfaces, memory, etc.
When running a Salt command from keep in mind any modules and functions called are run locally from the system being called.
Salt modules are stored on minions and master within the following directory:</p>
<div class="listingblock">
<div class="content">
<pre>/usr/lib/python2.7/site-packages/salt/</pre>
</div>
</div>
<div class="paragraph">
<p>List all available grains with the <code class="command">grains.ls</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt '*' grains.ls</pre>
</div>
</div>
<div class="paragraph">
<p>List collected grain system data by using the <code class="command">grains.ls</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt '*' grains.items</pre>
</div>
</div>
<div class="paragraph">
<p>For more information on grains, see <a href="https://docs.saltstack.com/en/latest/topics/grains/" class="bare">https://docs.saltstack.com/en/latest/topics/grains/</a>.</p>
</div>
</dd>
<dt class="hdlist1">States</dt>
<dd>
<p>States are templates which place systems into a known configuration, for example which applications and services are installed and running on those systems.
States are a way for you to describe what each of your systems should look like.
Once written, states are applied to target systems automating the process of managing and maintaining a large numbers of systems into a known state.
For more information on states, see <a href="https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html" class="bare">https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html</a>.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Updating Salt</div>
<div class="paragraph">
<p>Do not update <span class="package">salt</span> itself using Salt states.
First update all other system packages using Salt states then update <span class="package">salt</span> as a separate stand-alone step from the  WebUI.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Pillar</dt>
<dd>
<p>Pillars unlike grains are created on the master.
Pillar files contain information about a minion or group of minions.
Pillars allow you to send confidential information to a targeted minion or group of minions.
Pillars are useful for sensitive data, configuration of minions, variables, and any arbitrary data which should be defined.
For more information on pillars, see <a href="https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html" class="bare">https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html</a>.</p>
</dd>
<dt class="hdlist1">Beacons</dt>
<dd>
<p>Beacons allow an admin to use the event system in Salt to monitor non-Salt processes.
Minions may use beacons to hook into many types of system proceses for constant monitoring.
Once a targeted monitored activity occurs an event is sent on the Salt event bus that may be used to trigger a reactor.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title=":heavy_exclamation_mark:"></i>
</td>
<td class="content">
<div class="title">Enabling Beacons</div>
To work with beacons on Salt minions the package python-pyinotify must be installed for SUSE systems.
For RES systems install python-inotify.
This package is not installed automatically during the salt minion package installation.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Peer Communication with salt-broker</div>
<div class="paragraph">
<p>The salt-broker acts like a switch and not like a hub, therefore Peer communication will only work for minions behind the same broker/Proxy.
For more information on Salt and peer communication see: <a href="https://docs.saltstack.com/en/latest/ref/peer.html" class="bare">https://docs.saltstack.com/en/latest/ref/peer.html</a></p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="salt.gs.guide.useful.salt.commands"><a class="anchor" href="#salt.gs.guide.useful.salt.commands"></a><a class="link" href="#salt.gs.guide.useful.salt.commands">6.4. Useful Salt Commands</a></h3>
<div class="paragraph">
<p>The following list provides several useful Salt commands.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">salt-run</dt>
<dd>
<p>Print a list of all minions that are up:</p>
<div class="listingblock">
<div class="content">
<pre>salt-run manage.up</pre>
</div>
</div>
<div class="paragraph">
<p>Print a list of all minions that are down:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt-run manage.down</pre>
</div>
</div>
<div class="paragraph">
<p>Print a list with the current status of all Salt minions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt-run manage.status</pre>
</div>
</div>
<div class="paragraph">
<p>Check the version of Salt running on the master and active minions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>salt-run manage.versions</pre>
</div>
</div>
</dd>
<dt class="hdlist1">salt-cp</dt>
<dd>
<p>Copy a file to a minion or set of minions.</p>
<div class="listingblock">
<div class="content">
<pre>salt-cp '*' foo.conf /root</pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.saltstack.com/en/latest/ref/cli/salt-cp.html" class="bare">https://docs.saltstack.com/en/latest/ref/cli/salt-cp.html</a>.</p>
</div>
</dd>
<dt class="hdlist1">salt-key -l</dt>
<dd>
<p>List public keys:</p>
<div class="listingblock">
<div class="content">
<pre>salt-key -l</pre>
</div>
</div>
</dd>
<dt class="hdlist1">salt-key -A</dt>
<dd>
<p>Accept all pending keys:</p>
<div class="listingblock">
<div class="content">
<pre>salt-key -A</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="salt.gs.guide.salt.file.locations"><a class="anchor" href="#salt.gs.guide.salt.file.locations"></a><a class="link" href="#salt.gs.guide.salt.file.locations">6.5. Salt File Locations and Structure</a></h3>
<div class="paragraph">
<p>The following screen describes Salt file structures and their locations used by the  Server.
These files are listed in <code class="path">/etc/salt/master.d/susemanager.conf</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Configure different file roots

file_roots:
  base:
    - /usr/share/susemanager/salt    #Should not be touched by a user
    - /srv/susemanager/salt          #Should not be touched by a user
    - /srv/salt                      #Your custom states go here

# Configure different pillar roots

pillar_roots:
  base:
    - /usr/share/susemanager/pillar  #Should not be touched by a user
    - /srv/pillar                    #Custom pillars go here

# Extension modules path

extension_modules: /usr/share/susemanager/modules

# Master top configuration

master_tops:
  mgr_master_tops: True</pre>
</div>
</div>
<div class="paragraph">
<p>The following tips should be kept in mind when working with <code class="path">/etc/salt/master.d/susemanager.conf</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Files listed are searched in the order they appear.</p>
</li>
<li>
<p>The first file found is called.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="salt.gs.guide.salt.file.locations.file.roots"><a class="anchor" href="#salt.gs.guide.salt.file.locations.file.roots"></a><a class="link" href="#salt.gs.guide.salt.file.locations.file.roots">6.5.1. file_roots</a></h4>
<div class="paragraph">
<p> as the Salt master reads its state data from three specific file root directories.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">/usr/share/susemanager/salt</dt>
<dd>
<p>This directory is created by  and its content generated by the <code class="path">/usr/share/susemanager/modules/tops/mgr_master_tops.py</code> python module.
It is shipped and updated together with  and includes certificate setup and common state logic that will be applied to packages and channels.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Do Not Edit</div>
<div class="paragraph">
<p>You should not edit or add custom Salt data to this directory.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">/srv/susemanager/salt</dt>
<dd>
<p>This directory is created by  and contains assigned channels and packages for minions, groups, and organizations.
These files will be overwritten and regenerated.
A good analogy for this directory would be the SUSE Manager database translated into Salt directives.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Do Not Edit</div>
<div class="paragraph">
<p>You should not edit or add custom Salt data to this directory.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">/srv/salt</dt>
<dd>
<p>The directory <code class="path">/srv/salt</code> is for your custom state data, salt modules etc.
SUSE Manager does not perform any actions on this directory.
However the state data placed here affects the Highstate of minions and is merged with the result generated by .</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Editable</div>
<div class="paragraph">
<p>Place custom Salt data here.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="salt.gs.guide.salt.file.locations.pillar.roots"><a class="anchor" href="#salt.gs.guide.salt.file.locations.pillar.roots"></a><a class="link" href="#salt.gs.guide.salt.file.locations.pillar.roots">6.5.2. pillar_roots</a></h4>
<div class="paragraph">
<p> as the Salt master reads its pillar data from two specific pillar root directories.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">/usr/share/susemanager/pillar</dt>
<dd>
<p>This directory is generated by .
It is shipped and updated together with .</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Do Not Edit</div>
<div class="paragraph">
<p>You should not edit or add custom Salt data to this directory.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">/srv/pillar</dt>
<dd>
<p> by default does not touch or do anything with this directory.
However the custom pillar data placed here is merged with the pillar result created by .</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Editable Directory</div>
<div class="paragraph">
<p>Place your custom Salt pillar data here.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_install_the_suse_manager_locale_formula"><a class="anchor" href="#_install_the_suse_manager_locale_formula"></a><a class="link" href="#_install_the_suse_manager_locale_formula">6.6. Install the SUSE Manager Locale Formula</a></h3>
<div class="paragraph">
<p>The following section provides guidance on installing and using SUSE provided Salt formulas.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Installing the Locale Formula</div>
<ol class="arabic">
<li>
<p>Install the locale formula with:</p>
<div class="listingblock">
<div class="content">
<pre>zypper install locale-formula</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
This installs the package contents to <code class="path">/usr/share/susemanager/formulas/{metadata,states}</code>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After installing the RPM, log in to the  WebUI.</p>
</li>
<li>
<p>Browse to the <span class="menuseq"><b class="menu">Main Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">System Details</b></span> page of any minion you would like to apply the formula to.</p>
</li>
<li>
<p>On the <span class="menuseq"><b class="menu">Main Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">System Details</b></span> page you will see a new <b class="button">Formulas</b> tab.
Select it to view a list of installed formulas.</p>
</li>
<li>
<p>From the <b class="button">Formulas</b> list select <span class="menuseq"><b class="menu">Formulas</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Locale</b></span> and click <b class="button">Save</b>.</p>
</li>
<li>
<p>A new tab will appear next to the <span class="menuseq"><b class="menu">Formula</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Locale</b></span> subtab. Select the new <span class="menuseq"><b class="menu">Formulas</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Locale</b></span> tab.</p>
</li>
<li>
<p>The <span class="menuseq"><b class="menu">Formalas</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Locale</b></span> tab contains options for setting the language, keyboard layout, timezone, and whether hardware clock is set to UTC. Select the desired options and click <b class="button">Save</b>.</p>
</li>
<li>
<p>Run the following command to verify pillar settings. The output has been truncated.</p>
<div class="listingblock">
<div class="content">
<pre>salt '$your_minion' pillar.items</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>...
   keyboard_and_language:
       ----------
       keyboard_layout:
           English (US)
       language:
           English (US)
   machine_password:
       foobar
   mgr_server:
       manager_server
   org_id:alt '$your_minion_here'
       1
   timezone:
       ----------
       hardware_clock_set_to_utc:
           True
       name:
           CET
    ...</pre>
</div>
</div>
</li>
<li>
<p>Apply this state to your minion by applying the highstate from the command line with:</p>
<div class="listingblock">
<div class="content">
<pre>salt '$your_minion' state.highstate</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also apply the highstate from the previous formula tab from the  WebUI by selecting <span class="menuseq"><b class="menu">System Details</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">States</b></span> and clicking <b class="button">Apply Highstate</b>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>Copyright (C) 2017-2018 <a href="https://gitlab.com/jcayouette/uyuni-prototype">Uyuni Project</a></p>
  <p>Testing Disclaimer...</p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
<script>
function focusSearchInput () { document.querySelector('#search-input').focus() }
var search = docsearch({
  appId: '3F9C504TVA',
  apiKey: '72c8bc420354328a066360837f11319e',
  indexName: 'uyuni-project',
  inputSelector: '#search-input',
  autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
  algoliaOptions: { hitsPerPage: 10 }
}).autocomplete
search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
focusSearchInput()
window.addEventListener('load', focusSearchInput)
</script>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
