<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uyuni Server Migration :: Uyuni Documentation</title>
    <meta name="generator" content="Antora 1.0.3">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://infallible-goldberg-3dc8f3.netlify.com/uyuni/master/">Uyuni Project</a>
        <span class="separator">//</span>
        <a href="../..">Docs</a>
      </div>
      <div class="navbar-item">
        <input id="search-input" type="text" placeholder="Search docs">
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>Resources</strong></div>
            <a class="navbar-item" href="https://gitlab.com/jcayouette/uyuni-prototype">Repository</a>
            <a class="navbar-item" href="https://gitlab.com/jcayouette/uyuni-prototype/issues">Issue Tracker</a>
<!--
            <hr class="navbar-divider">
            <div class="navbar-item"><strong>Custom UI (coming soon!)</strong></div>
            <a class="navbar-item" href="https://gitlab.com/antora/antora-ui-default">Repository</a>
            <a class="navbar-item" href="https://gitlab.com/antora/antora-ui-default/issues">Issue Tracker</a>
            <hr class="navbar-divider">
          -->
            <a class="navbar-item" href="https://gitlab.com/jcayouette/uyuni-prototype/blob/master/contributing.adoc">Contributing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://gitter.im/uyuniproject/users">Uyuni Chat (Users)</a>
            <a class="navbar-item" href="https://gitter.im/uyuniproject/develop">Uyuni Chat (Dev)</a>
          </div>
        </div>
        <a class="navbar-item" href="https://twitter.com/uyuniproject">
          <span class="icon">
            <svg aria-hidden="true" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path fill="#57aaee" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="uyuni" data-version="ia-rework">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Uyuni</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_install_overview.html">Overview and Requirements</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.prereq">Prerequisites for Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.prereq.scc">SUSE SCC Credentials</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.prereq.installmedia">Get Uyuni</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.prereq.hardware">Hardware Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.prereq.network">Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_install_overview.html#quickstart.sect.prereq.clientos">Supported Client Systems</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_installation_jeos.html">Installation via JeOS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_installation_jeos.html#quickstart.sect.kvm.settings">Configuring KVM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_installation_jeos.html#jeos.kvm.settings">JeOS KVM Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_installation_jeos.html#jeos.susemgr.prep">Preparing JeOS for Uyuni</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_installation_sles.html">Installation via SLES</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_installation_sles.html#sles-kvm-requirements">SLES KVM Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_installation_sles.html#sles.installation.within.kvm.media">SLES KVM Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_installation_sles.html#quickstart3.sec.suma.installation.sles.sumaext">Selecting the Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html">Setup and Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html#suma.setup.with.yast.setup">Topics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html#suma-setup-with-yast-sumasetup">Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html#suma.setup.with.yast.admin">Administration Account</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html#quickstart.first.channel.sync">Syncing Products</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html">Connecting Clients</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#create.act.keys">Creating Activation Keys</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#create.tools.repository">Creating the Tools Repository</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#registering.clients.traditional">Registering Traditional Clients</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#generate.bootstrap.script">Generating a Bootstrap Script</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#modify.bootstrap.script">Editing the Bootstrap Script</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#connect.first.client">Connecting Clients</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#sect.tradclient.packagelock">Package Locks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html#preparing.and.registering.clients.salt">Registering Salt Clients</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html">Introduction to Salt</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.intro">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.testing.first.minion">Understanding Salt Calls</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.term.overview">Common Salt Terminology</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.useful.salt.commands">Useful Salt Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.salt.file.locations">Salt File Locations and Structure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.salt.file.locations.file.roots">file_roots</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#salt.gs.guide.salt.file.locations.pillar.roots">pillar_roots</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html#install-the-suse-manager-locale-formula">Install the SUSE Manager Locale Formula</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Best Practices</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="bp_chap_intro.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bp_chap_intro.html#bp-what-is-covered">What is Covered?</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bp_chap_intro.html#bp-prerequisites">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bp_chap_intro.html#bp.chapt.intro.network.requires">Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bp_chap_intro.html#bp-hardware-recommendations">Hardware Recommendations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_choosing_dist_scheme.html#bp-selecting-a-dist-scheme">Choosing a Distribution Method</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_expanded_support.html#bp-expanded-support">Expanded Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_getting_started_with_salt_formulas.html#bp-introduction-to-salt-formulas">Working with Salt Formulas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_config_management_with_salt.html#bp-salt-configuration-management">Salt Configuration Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_salt_minion_onboarding_scaleability.html#bp-salt-minion-scaleability">Scaling with Salt</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_activation_key_management.html#bp-activation-key-management">Activation Key Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_systems_management.html#bp-systems-management">Contact Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_susecom_lifecycle_management.html#bp-lifecycle-management">Patch Lifecycle Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_live_patching.html#bp-live-patching">Live Patching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#bp-server-migration">Migrate Uyuni Server to a Newer Version</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_client_migration.html#bp-client-migration">Migrate Clients to a Newer Version</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_postgresql_database_migration.html#bp-database-migration">PostreSQL Database Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_suma_backup.html#bp-backup">Backup and Restore Uyuni Sever</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_authentication_with_pam_and_ad.html#bp-authentication-pam-ad">Authentication Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_bring_your_own_cert.html#bp-using-custom-certificates">Custom Certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bp_chap_troubleshooting.html#bp-troubleshooting">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mgr_additional_resources.html#bp-additional-resources">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mgr_product_comparison.html#bp-product-comparison">Feature Comparison</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common_legal.html#bp-legal">Legal</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">WebUI Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-intro.html#ref-introduction">About This Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="reference-webui-overview.html">Overview and Navigation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.intro">Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.notifications">Notification Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#notification.messages.tabs">Notification Messages Tabs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#notification.messages.buttons">Notification Messages Buttons</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#notification.messages.legend">Notification Messages Legend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.account">User Account</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.account.your">Your Account</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.account.addresses">Addresses</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.account.email">Email Settings</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.account.deactivate">Account Deactivation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.prefs">Your Preferences</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.org">Your Organization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.org.config">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.org.trust">Organization Trusts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-overview.html#ref.webui.overview.org.cfgch">Configuration Channels</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="#reference-webui-systems.adoc ">Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.intro">System Conventions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.overview">Systems Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.x">Systems &gt; Systems</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.all">All</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.physical">Physical Systems</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.virtual">Virtual Systems</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.baremetal">Bare Metal</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.ood">Out of Date</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.reboot">Requiring Reboot</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.non_compliant">Non-compliant Systems</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.wst">Without System Type</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.ungrp">Ungrouped</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.inact">Inactive</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.rregistered">Recently Registered</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.proxy">Proxy</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.dup">Duplicate Systems</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.currency">System Currency</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reference-webui-systems.html#ref.webui.systems.systems.types">System Types</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="reference-webui-systems.html#s3-sm-system-details">System Details</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-salt.html#ref-salt">Salt</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-images.html#ref-images">Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-patches.html#ref-patches">Patches</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-channels.html#ref-channels">Channels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-audit.html#ref-audit">Audit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-configuration.html#ref-configuration">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-schedule.html#ref-schedule">Schedule</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-users.html#ref-users">Users</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-admin.html#ref-admin">Admin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference-webui-help.html#ref-help">Help</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text">Advanced Topics</span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Uyuni</span>
    <span class="version">ia-rework</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Uyuni</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../include-test/index.html">include-test</a>
        </li>
        <li class="version is-current">
          <a href="index.html">ia-rework</a>
        </li>
        <li class="version">
          <a href="../4.0/index.html">4.0</a>
        </li>
        <li class="version">
          <a href="../3.2/index.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../include-test/index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Uyuni</a></li>
    <li class="crumb">Best Practices</li>
    <li class="crumb"><a href="#bp-server-migration">Migrate Uyuni Server to a Newer Version</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">ia-rework</button>
  <div class="versions-menu">
    <a class="version" href="../include-test/bp_sp_migration.html">include-test</a>
    <a class="version is-current" href="bp_sp_migration.html">ia-rework</a>
    <a class="version" href="../4.0/bp_sp_migration.html">4.0</a>
    <a class="version" href="../3.2/bp_sp_migration.html">3.2</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/uyuni-project/uyuni-docs/edit/ia-rework/docs/modules/ROOT/pages/bp_sp_migration.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Uyuni Server Migration</h1>
<div class="sect1">
<h2 id="bp.sp.migration.sp.intro"><a class="anchor" href="#bp.sp.migration.sp.intro"></a><a class="link" href="#bp.sp.migration.sp.intro">Service Pack Migration Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can upgrade the underlying operating system and also migrate Uyuni server from one patch level to the other (SP migration) or from one version to the next.
This works for migrating Uyuni server 3.0 to version 3.1, or version 3.1 to version 3.2.
For migrating version 3.0 to version 3.1, see the product documentation for Uyuni 3.1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>https://www.suse.com/documentation/suse-manager-3/</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bp.sp.migration.sp"><a class="anchor" href="#bp.sp.migration.sp"></a><a class="link" href="#bp.sp.migration.sp">Service Pack Migration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>SUSE Manager uses SUSE Linux Enterprise Server 12 as its underlying operating system.
Therefore Service Pack migration (for example, from version 12 SP1 to 12 SP3) may be performed in the same way as a typical SLES migration.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Upgrading PostgreSQL to Version 9.6 Before Migrating to SLES12 SP3</div>
<div class="paragraph">
<p>Before migrating the underlying system to SUSE Linux Enterprise 12 SP3 you must upgrade PostgreSQL to version 9.6.</p>
</div>
<div class="paragraph">
<p>The migration needs PostgreSQL 9.4 and 9.6 installed in parallel and PostgreSQL 9.4 is only available in SUSE Linux Enterprise 12 SP2.
For more information, see <a href="#sp.migration.postgresql">Upgrading PostgreSQL to Version 9.6</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>SUSE offers a graphical and command line tool for upgrading to a new service pack.
Comprehensive documentation for executing service pack migration scenarios is located in the SUSE Linux Enterprise Server documentation chapter <a href="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_update_sle.html" class="bare">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_update_sle.html</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sp.migration.postgresql"><a class="anchor" href="#sp.migration.postgresql"></a><a class="link" href="#sp.migration.postgresql">Upgrading PostgreSQL to Version 9.6</a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Migrating to SLES 12 SP3</div>
<div class="paragraph">
<p>Uyuni Server 3.1 must <em>not</em> be migrated to SLES 12 SP3 before upgrading PostgreSQL to version 9.6.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The upgrade needs PostgreSQL 9.4 and 9.6 installed in parallel.
PostgreSQL 9.4 is only available in SLES 12 SP2.</p>
</div>
<div class="paragraph">
<p>Before starting the update, prepare an up-to-date backup of your database.</p>
</div>
<div class="paragraph">
<p>On existing installations of Uyuni Server 3.1 you must migrate from PostgreSQL 9.4 to version 9.6.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/usr/lib/susemanager/bin/pg-migrate.sh</pre>
</div>
</div>
<div class="paragraph">
<p>During the upgrade your Uyuni Server will not be accessible.</p>
</div>
<div class="paragraph">
<p>The upgrade will create a copy of the database under <code class="path">/var/lib/pgsql</code> and thus needs sufficient disk space to hold two copies (versions 9.4 and 9.6) of the database.
Because it does a full copy of the database, it also needs considerable time depending on the size of the database and the I/O speed of the storage system.</p>
</div>
<div class="paragraph">
<p>If your system is short on disk space you can do a fast, in-place upgrade by running</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/usr/lib/susemanager/bin/pg-migrate.sh fast</pre>
</div>
</div>
<div class="paragraph">
<p>The fast upgrade usually only takes a few minutes and uses no additional disk space.
However, if the upgrade fails, you will need to restore the database from a backup.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://wiki.microfocus.com/index.php?title=SUSE_Manager/postgresql96" class="bare">https://wiki.microfocus.com/index.php?title=SUSE_Manager/postgresql96</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update.suse.manager"><a class="anchor" href="#update.suse.manager"></a><a class="link" href="#update.suse.manager">Updating Uyuni</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides information on performing regular updates and running a <code class="command">spacewalk-schema-upgrade</code> on your PostgreSQL database.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Updating Uyuni</div>
<ol class="arabic">
<li>
<p>As the root user, stop Spacewalk services:</p>
<div class="listingblock">
<div class="content">
<pre>spacewalk-service stop</pre>
</div>
</div>
</li>
<li>
<p>Apply the latest patches:</p>
<div class="listingblock">
<div class="content">
<pre>zypper patch</pre>
</div>
</div>
</li>
<li>
<p>You will be informed if a new database schema was included in the latest patch. Ensure the database service is running:</p>
<div class="listingblock">
<div class="content">
<pre>rcpostgresql start</pre>
</div>
</div>
</li>
<li>
<p>Perform the upgrade:</p>
<div class="listingblock">
<div class="content">
<pre>spacewalk-schema-upgrade</pre>
</div>
</div>
</li>
<li>
<p>Restart Spacewalk services:</p>
<div class="listingblock">
<div class="content">
<pre>spacewalk-service start</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title=":heavy_exclamation_mark:"></i>
</td>
<td class="content">
<div class="title">Restart of Services and Applications</div>
<div class="paragraph">
<p>Services affected by a package update are not automatically restarted after an update.
You need to restart these services manually to avoid potential failures.</p>
</div>
<div class="paragraph">
<p>You may use <code class="command">zypper ps</code> to check for any applications which may be using old code.
Restart these applications.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bp.sp.migration.version"><a class="anchor" href="#bp.sp.migration.version"></a><a class="link" href="#bp.sp.migration.version">Migrating Uyuni version 3.1 to 3.2</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The migration can either be done with the Online Migration tool (YaST) or with the Zypper command line tool.</p>
</div>
<div class="paragraph">
<div class="title">Requirements</div>
<p>Uyuni 3.2 requires SLES 12 SP3, with PostgreSQL version 9.6.
Check the release notes for more information about these requirements.
If you want to upgrade from an earlier version of Uyuni, check the relevant product documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Reduce Installation Size</div>
<div class="paragraph">
<p>When performing the migration, YaST will install all recommended packages.
Especially in the case of custom minimal installations, this may increase the installation size of the system significantly.</p>
</div>
<div class="paragraph">
<p>To change this default behavior and allow only required packages, adjust <code class="path">/etc/zypp/zypp.conf</code> and set the following variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>solver.onlyRequires = true
installRecommends=false # or commented</pre>
</div>
</div>
<div class="paragraph">
<p>This changes the behavior of all package operations, such as the installation of patches or new packages.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="bp.sp.migration.version.yast"><a class="anchor" href="#bp.sp.migration.version.yast"></a><a class="link" href="#bp.sp.migration.version.yast">Using YaST</a></h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Checking PostgreSQL Version</div>
<div class="paragraph">
<p>Before migrating to SLES 12 SP3, check whether PostgreSQL is already updated to version 9.6.
For more information, see <a href="#sp.migration.postgresql">Upgrading PostgreSQL to Version 9.6</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To perform the migration with YaST, use the <b class="menuref">Online Migration</b> tool:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Migrating using YaST</div>
<ol class="arabic">
<li>
<p>If you are logged into a GNOME session running on the machine you are going to update, switch to a text console.
Running the update from within a GNOME session is not recommended.
This does not apply when being logged in from a remote machine (unless you are running a VNC session with GNOME).</p>
</li>
<li>
<p>Start in YaST<span class="menuseq"><b class="menu">System</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Online Migration</b></span> (<code class="command">yast2 migration</code>).
YaST will show possible migration targets with detailed summaries.</p>
<div class="paragraph">
<p>In case of trouble, resolve the following issues first:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <b class="menuref">Online Migration</b> is not available, install the <span class="package">yast2-migration</span> package and its dependencies.
Restart YaST , otherwise the newly installed module will not be shown in the control center.</p>
</li>
<li>
<p>If there are &#8220;old&#8221; online updates available for installation, the migration tool will warn and ask to install them now before starting the actual migration.
It is recommended to install all updates before proceeding.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="bp.sp.migration.version.zypper"><a class="anchor" href="#bp.sp.migration.version.zypper"></a><a class="link" href="#bp.sp.migration.version.zypper">Using zypper</a></h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Checking PostgreSQL Version</div>
<div class="paragraph">
<p>Before migrating to SLES 12 SP3, check whether PostgreSQL is already updated to version 9.6.
For more information, see <a href="#sp.migration.postgresql">Upgrading PostgreSQL to Version 9.6</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To perform the migration with Zypper on the command-line, use the <code class="command">zypper migration</code> subcommand tool:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Migrating using <code class="command">zypper migration</code></div>
<ol class="arabic">
<li>
<p>If you are logged into a GNOME session running on the machine you are going to update, switch to a text console.
Running the update from within a GNOME session is not recommended.
This does not apply when being logged in from a remote machine (unless you are running a VNC session with GNOME).</p>
</li>
<li>
<p>The <code class="command">zypper migration</code> subcommand show possible migration targets and a summary.</p>
<div class="paragraph">
<p>In case of trouble, resolve the following issues first:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code class="command">migration</code> subcommand is not available install the <span class="package">zypper-migration-plugin</span> package and its dependencies.</p>
</li>
<li>
<p>If there are &#8220;old&#8221; online updates available for installation, the migration tool will warn and ask to install them now before starting the actual migration.
It is recommended to install all updates before proceeding.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If more than one migration target is available for your system, select one from the list (specify the number).</p>
</li>
<li>
<p>Read the notification and update the Uyuni database schema as described (<code class="command">spacewalk-schema-upgrade</code>).</p>
</li>
<li>
<p>Make sure Uyuni is up and running (<code class="command">spacewalk-service start</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After finishing the migration procedure Uyuni 3.2 on SLES 12 SP3 is available to be used.</p>
</div>
<div class="paragraph">
<p>&lt;div id="preamble"&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The migration from Uyuni 2.1 to Uyuni 3 works in the same way as a migration from Red Hat Satellite to Uyuni.
The migration happens from the original machine to a new one.
There is no in-place migration.
While this has the drawback that you temporarily need two machines, it also has the advantage that the original machine will remain fully functional in case something goes wrong.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="admonitionblock important"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-important" title=":heavy_exclamation_mark:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Migration Process&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The whole process may be tricky, so it is strongly advised that the migration is done by an experienced consultant.&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Given the complexity of the product, the migration is an &#8220;all-or-nothing&#8221;
 procedure{mdash}
if something goes wrong you will need to start all over.
Error handling is very limited.
Nevertheless it should work more or less out of the box if all the steps are carefully executed as documented.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="admonitionblock note"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-note" title=":information_source:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Time-Consuming Operation&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The migration involves dumping the whole database on the source machine and restoring it on the target machine.
Also all of the channels and packages need to be copied to the new machine, so expect the whole migration to take several hours,&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.prereq"&gt;&lt;a class="anchor" href="<mark>bp.sec.mgr.migration.prereq"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.prereq"&gt;Prerequisites&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="admonitionblock warning"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-warning" title=":warning:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Latest Updates&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The source machine needs to run Uyuni 2.1 with all the latest updates applied.
Before starting the migration process, make sure that the machine is up to date and all updates have been installed sucessfully.&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Only machines running with the embedded PostgreSQL database may be migrated in one go.
For the migration of an Oracle based installation, a two-step migration is required: First the installation needs to get migrated from Oracle to PostgreSQL (by means of a separate tool) and afterwards the migration to Uyuni 3 can be performed as documented here.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Uyuni 3 no longer supports {ncc} but only SCC (SUSE Customer Center).
Therefore, you can migrate a machine only after it has been switched to SCC.
The migration script will check if the installation has already been switched to SCC and will terminate if this is not the case.
Switch to SCC on the source machine and repeat the migration.
During migration the database from the source machine needs to get dumped and this dump needs to be temporarily stored on the target system.
The dump gets compressed with &lt;code class="command"&gt;gzip&lt;/code&gt; using the default compression options (maximum compression only yields about 10% of space savings but costs a lot of runtime); so check the disk usage of the database with:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre&gt;{prompt.root}du -sch /var/lib/pgsql/data&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This will ensure that you have at least 30 % of this value available in &lt;code class="path"&gt;/var/spacewalk/tmp&lt;/code&gt;
.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;These values from a test migration should aid in illustrating space requirements:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre&gt;suma21:/var/lib/pgsql</mark> du -sch data
1,8G    data
1,8G    total
suma21:/var/spacewalk/tmp# ls -lh susemanager.dmp.gz
-rw-r&#8212;&#8203;r-- 1 root root 506M Jan 12 14:58 susemanager.dmp.gz&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This is a small test installation; for bigger installations the ratio might be better (space required for the database dump might be less than 30%). The dump will be written to the directory &lt;code class="path"&gt;/var/spacewalk/tmp&lt;/code&gt;
, the directory will be created if it does not exist yet.
If you want the dump to be stored somewhere else, change the definition of the variable &lt;code class="var"&gt;$TMPDIR&lt;/code&gt; on the beginning of the script to suit your needs.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.setup.target"&gt;&lt;a class="anchor" href="<mark>bp.sec.mgr.migration.setup.target"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.setup.target"&gt;Setup the Target Machine&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To prepare the target machine (with the example host name &lt;code&gt;suma30&lt;/code&gt;) proceed as follows:&lt;/p&gt;
&lt;/div&gt;
&lt;div id="proc.mgr.migration.setup.target" class="olist arabic"&gt;
&lt;div class="title"&gt;Procedure: Setup Target Machine&lt;/div&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;
&lt;p&gt;On the target machine install SUSE Linux Enterprise Server 12 SP2 including the extension product &#8220;Uyuni&#8221; .&lt;/p&gt;
&lt;div class="admonitionblock important"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-important" title=":heavy_exclamation_mark:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Background Information on Required Target Machine&lt;/div&gt;
It is actually required to install version 12 SP2 on the target machine.
On that version you will upgrade the PostgreSQL database from version_9.4 to 9.6.
For more information about the PostgreSQL upgrade, see &lt;a href="#sp.migration.postgresql"&gt;[sp.migration.postgresql]&lt;/a&gt;.
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Initiate &lt;code class="command"&gt;yast2 susemanagersetup&lt;/code&gt; as you would normally do for an installation of Uyuni.&lt;/p&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;For more information about installing Uyuni, see &lt;a href="#sles.installation.within.kvm.jeos"&gt;[sles.installation.within.kvm.jeos]&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;On the first Uyuni setup screen, ensure that &lt;span class="menuseq"&gt;&lt;b class="menu"&gt;Migrate a SUSE Manager compatible server&lt;/b&gt;&#160;&lt;i class="fa fa-angle-right caret"&gt;&lt;/i&gt; &lt;b class="menuitem"&gt;] is marked instead of menu:Set up SUSE Manager from scratch[&lt;/b&gt;&lt;/span&gt; .&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;On the second screen, enter the name of the source system as &lt;b class="menuref"&gt;Hostname of source SUSE Manager Server&lt;/b&gt; as well as the domain name. Also enter the database credentials of the source system.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;On the next screen, you will need to specify the IP address of the Uyuni 3 target system. Normally this value should be pre-set to the correct value and you only should need to press &lt;kbd&gt;Enter&lt;/kbd&gt; . Only in the case of multiple IP addresses you might need to specify the one that should be used during migration.&lt;/p&gt;
&lt;div class="admonitionblock important"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-important" title=":heavy_exclamation_mark:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Faking the Host Name&lt;/div&gt;
During the migration process, the target system will fake its host name to be the same as the source system, this is necessary as the host name of a Uyuni installation is vital and should not be changed once set.
Therefore do not be confused when logging in to your systems during migration; they both will present you with the same host name.
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Continue by following the normal installation steps.&lt;/p&gt;
&lt;div class="admonitionblock important"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-important" title=":heavy_exclamation_mark:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Database Parameters&lt;/div&gt;
Specify the database parameters using the same database parameters as the source system is recommended.
At least, using the the same database credentials as when creating the source or original Uyuni database is mandatory.
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Enter your SCC credentials.
After all the data has been gathered, YaST
will terminate.&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The actual migration will not start automatically but needs to be triggered manually as outlined in &lt;a href="#bp.sec.mgr.migration.performing"&gt;Performing the Migration&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.performing"&gt;&lt;a class="anchor" href="#bp.sec.mgr.migration.performing"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.performing"&gt;Performing the Migration&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;A migration is performed by excecuting the following command:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre&gt;/usr/lib/susemanager/bin/mgr-setup -m&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This command reads the data gathered during &lt;a href="#proc.mgr.migration.setup.target"&gt;Procedure: Setup Target Machine&lt;/a&gt;, sets up Uyuni onto a new target machine and transfers all of the data from the source machine.
As several operations need to be performed on the source machine via SSH, you will be prompted once for the root password of the source machine.
A temporary SSH key named &lt;code&gt;migration-key&lt;/code&gt; is created and installed on the source machine, so you need to give the {rootuser}
 password only once.
The temporary SSH key will be deleted after successful migration.
Ideally, this is all you will need to do.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Depending on the size of the installation, the actual migration will take up to several hours.
Once finished, you will be prompted to shutdown the source machine, re-configure the network of the target machine to use the same IP address and host name as the original machine and restart it.
It should now be a fully functional replacement for your previous Uyuni 2.1 installation.
The following numbers illustrate the runtime for dumping and importing a small database:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre&gt;14:53:37   Dumping remote database to /var/spacewalk/tmp/susemanager.dmp.gz on target system. Please wait&#8230;&#8203;
14:58:14   Database successfully dumped. Size is: 506M
14:58:29   Importing database dump. Please wait&#8230;&#8203;
15:05:11   Database dump successfully imported.&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;For this example dumping the database takes around five minutes to complete.
Importing the dump onto the target system will take an additional seven minutes.
For big installations this can take up to several hours.
You should also account for the time it takes to copy all the package data to the new machine.
Depending on your network infrastructure and hardware, this can also take a significant amount of time.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.speedup"&gt;&lt;a class="anchor" href="#bp.sec.mgr.migration.speedup"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.speedup"&gt;Speeding up the Migration&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;A complete migration can consume a lot of time.
This is caused by the amount of data that must be copied.
Total migration time can be greatly decreased by eliminating the need to copy data prior to performing the migration (for example, channels, packages, auto-install images, and any additional data). You can gather all data via YaST
by running the command &lt;code class="command"&gt;mgr-setup -r&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Executing &lt;code class="command"&gt;mgr-setup -r&lt;/code&gt; will copy the data from the old server to the new one.
This command may be run at any time and your current server will remain fully functional.
Once the migration has been initiated only data changed since running &lt;code class="command"&gt;mgr-setup -r&lt;/code&gt; will need to be transferred which will significantly reduces downtime.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;On large installations transfering the database (which involves dumping the database onto the source machine and then importing the dump onto the target system) will still take some time.
During the database transfer no write operations should occur therefore the migration script will shut down any Uyuni database services running on the source machine.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.pkg.extern"&gt;&lt;a class="anchor" href="#bp.sec.mgr.migration.pkg.extern"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.pkg.extern"&gt;Packages on External Storage&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Some installations may store the package data on external storage (for example, NFS mount on &lt;code class="path"&gt;/var/spacewalk/packages&lt;/code&gt;
). You do not need to copy this data to the new machine.
Edit the script located in &lt;code class="path"&gt;/usr/lib/susemanager/bin/mgr-setup&lt;/code&gt;
 and remove the respective &lt;code class="command"&gt;rsync&lt;/code&gt; command (located around line 345).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="admonitionblock important"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;i class="fa icon-important" title=":heavy_exclamation_mark:"&gt;&lt;/i&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
&lt;div class="title"&gt;Mounting External Storage&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Make sure your external storage is mounted on the new machine before starting the system for the first time.
Analogue handling for &lt;code class="path"&gt;/srv/www/htdocs/pub&lt;/code&gt;
 if appropriate.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;In general, all needed files and directories, not copied by the migration tool, should be copied to the new server manually.&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.trouble"&gt;&lt;a class="anchor" href="#bp.sec.mgr.migration.trouble"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.trouble"&gt;Troubleshooting a Broken WebUI after Migration&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It is possible that the WebUI
may break during migration.
This behavior is not a bug, but a browser caching issue.
The new machine has the same host name and IP address as the old machine.
This duplication can confuse some Web browsers.
If you experience this issue reload the page.
For example, in Firefox pressing the key combination &lt;span class="keyseq"&gt;&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;F5&lt;/kbd&gt;&lt;/span&gt;
 should resume normal functionality.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bp.sec.mgr.migration.example"&gt;&lt;a class="anchor" href="#bp.sec.mgr.migration.example"&gt;&lt;/a&gt;&lt;a class="link" href="#bp.sec.mgr.migration.example"&gt;Example Session&lt;/a&gt;&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This is the output of a typical migration:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre&gt;suma30</mark> /usr/lib/susemanager/bin/mgr-setup -m
  Filesystem type for /var/spacewalk is ext4 - ok.
  Open needed firewall ports&#8230;&#8203;
  Migration needs to execute several commands on the remote machine.
  Please enter the root password of the remote machine.
Password:
  Remote machine is SUSE Manager
  Remote system is already migrated to SCC. Good.
  Shutting down remote spacewalk services&#8230;&#8203;
  Shutting down spacewalk services&#8230;&#8203;
  Stopping Taskomatic&#8230;&#8203;
  Stopped Taskomatic.
  Stopping cobbler daemon: ..done</p>
</div>
<div class="literalblock">
<div class="content">
<pre>  Stopping rhn-search...
  Stopped rhn-search.
  Stopping MonitoringScout ...
  [ OK ]
  Stopping Monitoring ...
  [ OK ]
  Shutting down osa-dispatcher: ..done
  Shutting down httpd2 (waiting for all children to terminate) ..done
  Shutting down Tomcat (/usr/share/tomcat6)
  ..done
  Terminating jabberd processes...
        Stopping router ..done
        Stopping sm ..done
        Stopping c2s ..done
        Stopping s2s ..done
  Done.
  CREATE ROLE
  * Loading answer file: /root/spacewalk-answers.
  ** Database: Setting up database connection for PostgreSQL backend.
  ** Database: Populating database.
  ** Database: Skipping database population.
  * Configuring tomcat.
  * Setting up users and groups.
  ** GPG: Initializing GPG and importing key.
  * Performing initial configuration.
  * Configuring apache SSL virtual host.
  ** /etc/apache2/vhosts.d/vhost-ssl.conf has been backed up to vhost-ssl.conf-swsave
  * Configuring jabberd.
  * Creating SSL certificates.
  ** Skipping SSL certificate generation.
  * Deploying configuration files.
  * Setting up Cobbler..
  * Setting up Salt Master.
  11:26:47   Dumping remote database. Please wait...
  11:26:50   Database successfully dumped.
  Copy remote database dump to local machine...
  Delete remote database dump...
  11:26:50   Importing database dump. Please wait...
  11:28:55   Database dump successfully imported.
  Schema upgrade: [susemanager-schema-2.1.50.14-3.2.devel21] -&amp;gt; [susemanager-schema-3.0.5-5.1.develHead]
  Searching for upgrade path to: [susemanager-schema-3.0.5-5.1]
  Searching for upgrade path to: [susemanager-schema-3.0.5]
  Searching for upgrade path to: [susemanager-schema-3.0]
  Searching for start path:  [susemanager-schema-2.1.50.14-3.2]
  Searching for start path:  [susemanager-schema-2.1.50.14]
  The path: [susemanager-schema-2.1.50.14] -&amp;gt; [susemanager-schema-2.1.50.15] -&amp;gt; [susemanager-schema-2.1.51] -&amp;gt; [susemanager-schema-3.0]
  Planning to run schema upgrade with dir '/var/log/spacewalk/schema-upgrade/schema-from-20160112-112856'
  Executing spacewalk-sql, the log is in [/var/log/spacewalk/schema-upgrade/schema-from-20160112-112856-to-susemanager-schema-3.0.log].
(248/248) apply upgrade [schema-from-20160112-112856/99_9999-upgrade-end.sql]        e-suse-channels-to-public-channel-family.sql.postgresql]
  The database schema was upgraded to version [susemanager-schema-3.0.5-5.1.develHead].
  Copy files from old SUSE Manager...
  receiving incremental file list
  ./
  packages/</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sent 18 bytes  received 66 bytes  168.00 bytes/sec
total size is 0  speedup is 0.00
receiving incremental file list
./
RHN-ORG-TRUSTED-SSL-CERT
res.key
rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm
suse-307E3D54.key
suse-39DB7C82.key
suse-9C800ACA.key
bootstrap/
bootstrap/bootstrap.sh
bootstrap/client-config-overrides.txt
bootstrap/sm-client-tools.rpm</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sent 189 bytes  received 66,701 bytes  44,593.33 bytes/sec
total size is 72,427  speedup is 1.08
receiving incremental file list
./
.mtime
lock
web.ss
config/
config/distros.d/
config/images.d/
config/profiles.d/
config/repos.d/
config/systems.d/
kickstarts/
kickstarts/autoyast_sample.xml
loaders/
snippets/
triggers/
triggers/add/
triggers/add/distro/
triggers/add/distro/post/
triggers/add/distro/pre/
triggers/add/profile/
triggers/add/profile/post/
triggers/add/profile/pre/
triggers/add/repo/
triggers/add/repo/post/
triggers/add/repo/pre/
triggers/add/system/
triggers/add/system/post/
triggers/add/system/pre/
triggers/change/
triggers/delete/
triggers/delete/distro/
triggers/delete/distro/post/
triggers/delete/distro/pre/
triggers/delete/profile/
triggers/delete/profile/post/
triggers/delete/profile/pre/
triggers/delete/repo/
triggers/delete/repo/post/
triggers/delete/repo/pre/
triggers/delete/system/
triggers/delete/system/post/
triggers/delete/system/pre/
triggers/install/
triggers/install/post/
triggers/install/pre/
triggers/sync/
triggers/sync/post/
triggers/sync/pre/</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sent 262 bytes  received 3,446 bytes  7,416.00 bytes/sec
total size is 70,742  speedup is 19.08
receiving incremental file list
kickstarts/
kickstarts/snippets/
kickstarts/snippets/default_motd
kickstarts/snippets/keep_system_id
kickstarts/snippets/post_delete_system
kickstarts/snippets/post_reactivation_key
kickstarts/snippets/redhat_register
kickstarts/snippets/sles_no_signature_checks
kickstarts/snippets/sles_register
kickstarts/snippets/sles_register_script
kickstarts/snippets/wait_for_networkmanager_script
kickstarts/upload/
kickstarts/wizard/</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sent 324 bytes  received 1,063 bytes  2,774.00 bytes/sec
total size is 12,133  speedup is 8.75
receiving incremental file list
ssl-build/
ssl-build/RHN-ORG-PRIVATE-SSL-KEY
ssl-build/RHN-ORG-TRUSTED-SSL-CERT
ssl-build/index.txt
ssl-build/index.txt.attr
ssl-build/latest.txt
ssl-build/rhn-ca-openssl.cnf
ssl-build/rhn-ca-openssl.cnf.1
ssl-build/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm
ssl-build/rhn-org-trusted-ssl-cert-1.0-1.src.rpm
ssl-build/serial
ssl-build/d248/
ssl-build/d248/latest.txt
ssl-build/d248/rhn-org-httpd-ssl-archive-d248-1.0-1.tar
ssl-build/d248/rhn-org-httpd-ssl-key-pair-d248-1.0-1.noarch.rpm
ssl-build/d248/rhn-org-httpd-ssl-key-pair-d248-1.0-1.src.rpm
ssl-build/d248/rhn-server-openssl.cnf
ssl-build/d248/server.crt
ssl-build/d248/server.csr
ssl-build/d248/server.key
ssl-build/d248/server.pem</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sent 380 bytes  received 50,377 bytes  101,514.00 bytes/sec
total size is 90,001  speedup is 1.77
SUSE Manager Database Control. Version 1.5.2
Copyright (c) 2012 by SUSE Linux Products GmbH</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>INFO: Database configuration has been changed.
INFO: Wrote new general configuration. Backup as /var/lib/pgsql/data/postgresql.2016-01-12-11-29-42.conf
INFO: Wrote new client auth configuration. Backup as /var/lib/pgsql/data/pg_hba.2016-01-12-11-29-42.conf
INFO: New configuration has been applied.
Database is online
System check finished</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>============================================================================
Migration complete.
Please shut down the old SUSE Manager server now.
Reboot the new server and make sure it uses the same IP address and hostname
as the old SUSE Manager server!</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  IMPORTANT: Make sure, if applicable, that your external storage is mounted
  in the new server as well as the ISO images needed for distributions before
  rebooting the new server!
  ============================================================================&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>Copyright (C) 2017-2018 <a href="https://gitlab.com/jcayouette/uyuni-prototype">Uyuni Project</a></p>
  <p>Testing Disclaimer...</p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
<script>
function focusSearchInput () { document.querySelector('#search-input').focus() }
var search = docsearch({
  appId: '3F9C504TVA',
  apiKey: '72c8bc420354328a066360837f11319e',
  indexName: 'uyuni-project',
  inputSelector: '#search-input',
  autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
  algoliaOptions: { hitsPerPage: 10 }
}).autocomplete
search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
focusSearchInput()
window.addEventListener('load', focusSearchInput)
</script>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
