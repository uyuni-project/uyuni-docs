# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2021-02-10 09:16+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title =
#: modules/large-deployments/nav-large-deployments-guide.adoc:1
#, no-wrap
msgid "Large Deployments Guide: {productname} {productnumber}"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:2
msgid "xref:large-deployments-overview.adoc[Large Deployments Guide]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:3
msgid "xref:hardware-reqs.adoc[Hardware Requirements]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:4
msgid "xref:single-server.adoc[Single Server]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:5
msgid "xref:operation-reqs.adoc[Operation Requirements]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:6
msgid "xref:multi-server.adoc[Multiple Servers with Hub]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:7
msgid "xref:hub-reqs.adoc[Hub Operation Requirements]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:8
msgid "xref:hub-install.adoc[Hub Installation]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:9
msgid "xref:hub-api.adoc[Hub API]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:10
msgid "xref:hub-namespaces.adoc[Hub Namespaces]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:11
msgid "xref:hub-auth.adoc[Hub Authentication]"
msgstr ""

#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:12
msgid "xref:retail-large-scale.adoc[Large Retail Environments]"
msgstr ""

#.  * xref:monitoring.adoc[Monitoring Large Installation]
#. type: Plain text
#: modules/large-deployments/nav-large-deployments-guide.adoc:13
msgid "xref:tuning.adoc[Tuning Large Installations]"
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/hardware-reqs.adoc:1
#, no-wrap
msgid "Hardware Requirements"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:2
msgid ""
"Not all problems can be solved with better hardware, but choosing the right "
"hardware is an absolute necessity for large scale deployments."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:3
msgid "The minimum requirements for the {productname} Server are:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:4
msgid "Eight or more recent {x86_64} CPU cores."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:5
msgid "32{nbsp}GiB RAM."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:6
msgid "For installations with thousands of clients, use 64{nbsp}GB or more."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:7
msgid "Fast I/O storage devices, such as locally attached SSDs."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:8
msgid "For PostgreSQL data directories, we recommend locally attached RAID-0 SSDs."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:9
msgid ""
"If the {productname} Server is virtualized, enable the `elevator=noop` "
"kernel command line option, for the best input/output performance.  You can "
"check the current status with [command]``cat "
"/sys/block/<DEVICE>/queue/scheduler``.  This command will display a list of "
"available schedulers with the currently active one in brackets.  To change "
"the scheduler before a reboot, use [command]``echo noop > "
"/sys/block/<DEVICE>/queue/scheduler``."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:10
msgid "The minimum requirements for the {productname} Proxy are:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:11
msgid ""
"One {productname} Proxy per 500-1000 clients, depending on available network "
"bandwidth."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:12
msgid "Two or more recent {x86_64} CPU cores."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:13
msgid "16{nbsp}GB RAM, and sufficient storage for caching."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:14
msgid ""
"Clients should never be directly attached to the {productname} Server in "
"production systems."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:15
msgid ""
"In large scale installations, the {productname} Proxy is used primarily as a "
"local cache for content between the server and clients.  Using proxies in "
"this way can substantially reduce download time for clients, and decrease "
"Server egress bandwidth use."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:16
msgid ""
"The number of clients per proxy will affect the download time.  Always take "
"network structure and available bandwidth into account."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:17
msgid ""
"We recommend you estimate the download time of typical usage to determine "
"how many clients to connnect to each proxy.  To do this, you will need to "
"estimate the number of package upgrades required in every patch cycle.  You "
"can use this formula to calculate the download time:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hardware-reqs.adoc:18
#, no-wrap
msgid "Size of updates * Number of clients / Theoretical download speed / 60\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hardware-reqs.adoc:19
msgid ""
"For example, the total time needed to transfer 400{nbsp}MB of upgrades "
"through a physical link speed of 1{nbsp}GB/s to 3000 clients:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hardware-reqs.adoc:20
#, no-wrap
msgid "400 MB  * 3000 / 119 MB/s / 60 = 169 min\n"
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/hub-api.adoc:1
#, no-wrap
msgid "Using the Hub API"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-api.adoc:2
msgid "Make sure the ``hub-xmlrpc-api`` service is started:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-api.adoc:3
#, no-wrap
msgid "systemctl start hub-xmlrpc-api\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-api.adoc:4
msgid ""
"Once it is running, connect to the service at port 2830 using any "
"XMLRPC-compliant client libraries."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-api.adoc:5
msgid "For examples, see xref:large-deployments:hub-auth.adoc[]."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-api.adoc:6
msgid ""
"Logs are saved in ``/var/logs/hub/hub-xmlrpc-api.log``.  Logs are rotated "
"weekly, or when the log file size reaches the specified limit.  By default, "
"the log file size limit is 10{nbsp}MB."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/hub-auth.adoc:1
#, no-wrap
msgid "Hub XMLRPC API Authentication Modes"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:2
msgid "The Hub XMLRPC API supports three different authentication modes:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:3
msgid ""
"Manual mode (default): API credentials must be explicitly provided for each "
"server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:4
msgid ""
"Relay mode: the credentials used to authenticate with the Hub are also used "
"to authenticate to each server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:5
msgid "You must provide a list of servers to connect to."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:6
msgid ""
"Auto-connect mode: credentials are reused for each server, and any "
"peripheral server you have access to is automatically connected."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/hub-auth.adoc:7
#, no-wrap
msgid "Authentication Examples"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:8
msgid "This section provides examples of each authentication method."
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-auth.adoc:9
#, no-wrap
msgid "Example: Manual Authentication"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:10
msgid ""
"In manual mode, credentials have to be explicitly provided for each "
"peripheral server before you can connect to it."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:11
msgid "A typical workflow for manual authentication is:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:12
msgid ""
"Credentials for the Hub are passed to the ``login`` method, and a session "
"key for the Hub is returned (``hubSessionKey``)."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:13
msgid ""
"Using the session key from the previous step, {productname} Server IDs are "
"obtained for all the peripheral servers attached to the Hub via the "
"``hub.listServerIds`` method."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:14
msgid ""
"Credentials for each peripheral server are provided to the "
"``attachToServers`` method."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:15
#: modules/large-deployments/pages/hub-auth.adoc:40
msgid "This performs authentication against each server's XMLRPC API endpoint."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:16
#: modules/large-deployments/pages/hub-auth.adoc:41
#: modules/large-deployments/pages/hub-auth.adoc:61
msgid "A ``multicast`` call is performed on a set of servers."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:17
msgid ""
"This is defined by ``serverIds``, which contains the IDs of the servers to "
"target.  In the background, ``system.list_system`` is called on each "
"server's XMLRPC API"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:18
#: modules/large-deployments/pages/hub-auth.adoc:43
#: modules/large-deployments/pages/hub-auth.adoc:63
msgid ""
"Hub aggregates the results and returns the response in the form of a "
"``map``."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:19
#: modules/large-deployments/pages/hub-auth.adoc:44
#: modules/large-deployments/pages/hub-auth.adoc:64
msgid "The map has two entries:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:20
#: modules/large-deployments/pages/hub-auth.adoc:45
#: modules/large-deployments/pages/hub-auth.adoc:65
msgid ""
"``Successful``: list of responses for those peripheral servers where the "
"call succeeded."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:21
#: modules/large-deployments/pages/hub-auth.adoc:66
msgid ""
"``Failed``: list of responses for those peripheral servers where the call "
"failed."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/hub-auth.adoc:22
msgid ""
"If you want to call a method on just one {productname} Server, then Hub API "
"also provides a ``unicast`` namespace.  In this case, the response will be a "
"single value and not a map, in the same way as if you called that "
"{productname} server's API directly."
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-auth.adoc:23
#, no-wrap
msgid "Example Python Script for Manual Authentication:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:24
#: modules/large-deployments/pages/hub-auth.adoc:48
#: modules/large-deployments/pages/hub-auth.adoc:68
#, no-wrap
msgid ""
"#!/usr/bin/python\n"
"import xmlrpclib\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:25
#: modules/large-deployments/pages/hub-auth.adoc:49
#: modules/large-deployments/pages/hub-auth.adoc:69
#, no-wrap
msgid ""
"HUB_XMLRPC_API_URL = \"<HUB_XMLRPC_API_URL>\"\n"
"HUB_USERNAME = \"<USERNAME>\"\n"
"HUB_PASSWORD = \"<PASSWORD>\"\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:26
#: modules/large-deployments/pages/hub-auth.adoc:70
#, no-wrap
msgid "client = xmlrpclib.Server(HUB_XMLRPC_API_URL, verbose=0)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:27
#, no-wrap
msgid "hubSessionKey = client.hub.login(HUB_USERNAME, HUB_PASSWORD)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:28
#, no-wrap
msgid ""
"# Get the server IDs\n"
"serverIds = client.hub.listServerIds(hubSessionKey)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:29
#, no-wrap
msgid ""
"# Authenticate each server with its own credentials\n"
"usernames = [HUB_LOGIN for s in serverIds]\n"
"passwords = [HUB_PASSWORD for s in serverIds]\n"
"client.hub.attachToServers(hubSessionKey, serverIds, usernames, passwords)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:30
#, no-wrap
msgid ""
"# Perform the operation\n"
"systemsPerServer = client.multicast.system.list_systems(hubKey, serverIds)\n"
"successfulResponses = systemsPerServer[\"Successful\"][\"Responses\"]\n"
"failedResponses = systemsPerServer[\"Failed\"][\"Responses\"]\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:31
#: modules/large-deployments/pages/hub-auth.adoc:55
#: modules/large-deployments/pages/hub-auth.adoc:74
#, no-wrap
msgid ""
"for system in successfulResponses:\n"
"  print (system)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:32
#, no-wrap
msgid ""
"#logout\n"
"client.hub.logout(hubSessionKey)\n"
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-auth.adoc:33
#, no-wrap
msgid "Example: Relay Authentication"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:34
msgid ""
"In relay authentication mode, the credentials used to sign in to the Hub API "
"are also used to sign in into the APIs of the peripheral servers the user "
"wants to work with.  In this authentication mode, it is assumed that the "
"same credentials are valid for every server, and that they correspond to a "
"user with appropriate permissions."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:35
msgid ""
"After signing in, you must call the ``attachToServers`` method.  This method "
"defines the servers to target in all subsequent calls."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:36
msgid "A typical workflow for relay authentication is:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:37
msgid ""
"Credentials for the Hub are passed to the ``loginWithAuthRelayMode`` method, "
"and a session key for the Hub is returned (``hubKey``)."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:38
msgid ""
"Using the session key from the previous step, {productname} Server IDs are "
"obtained for all the peripheral servers attached to the Hub via the "
"``hub.listServerIds`` method"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:39
msgid ""
"A call to `attachToServers` is made, and the same credentials used to sign "
"in to the Hub are passed to each server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:42
#: modules/large-deployments/pages/hub-auth.adoc:62
msgid ""
"This is defined by ``serverIds``, which contains the IDs of the servers to "
"target.  In the background, ``system.list_system`` is called on each "
"server's XMLRPC API."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:46
msgid "``Failed``: list of responses for those peripheral servers the call failed."
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-auth.adoc:47
#, no-wrap
msgid "Example Python Script for Relay Authentication:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:50
#, no-wrap
msgid "client = xmlrpclib.Server(<HUB_XMLRPC_API_URL>, verbose=0)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:51
#, no-wrap
msgid ""
"hubSessionKey = client.hub.loginWithAuthRelayMode(<HUB_USERNAME>, "
"<HUB_PASSWORD>)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:52
#: modules/large-deployments/pages/hub-auth.adoc:72
#, no-wrap
msgid ""
"#Get the server IDs\n"
"serverIds = client.hub.listServerIds(hubSessionKey)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:53
#, no-wrap
msgid ""
"#authenticate those servers(same credentials will be used as of hub to "
"authenticate)\n"
"client.hub.attachToServers(hubSessionKey, serverIds)\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:54
#: modules/large-deployments/pages/hub-auth.adoc:73
#, no-wrap
msgid ""
"# perform the needed operation\n"
"systemsPerServer = client.multicast.system.list_systems(hubSessionKey, "
"serverIds)\n"
"successfulResponses = systemsPerServer[\"Successful\"][\"Responses\"]\n"
"failedResponses = systemsPerServer[\"Failed\"][\"Responses\"]\n"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:56
#: modules/large-deployments/pages/hub-auth.adoc:75
#, no-wrap
msgid ""
"#logout\n"
"client.hub.logout(hubKey)\n"
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-auth.adoc:57
#, no-wrap
msgid "Example: Auto-Connect Authentication"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:58
msgid ""
"Auto-connect mode is similar to relay mode, it uses the Hub credentials to "
"sign in in to all peripheral servers.  However, there is no need to use the "
"``attachToServers`` method, as auto-connect mode connects to all available "
"peripheral servers.  This occurs at the same time as you sign in to the Hub."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:59
msgid "A typical workflow for auto-connect authentication is:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-auth.adoc:60
msgid ""
"Credentials for the Hub are passed to the ``loginWithAutoconnectMode`` "
"method, and a session key for the Hub is returned (``hubKey``)."
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-auth.adoc:67
#, no-wrap
msgid "Example Python Script for Auto-Connect Authentication:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-auth.adoc:71
#, no-wrap
msgid ""
"loginResponse = client.hub.loginWithAutoconnectMode(<HUB_USERNAME>, "
"<HUB_PASSWORD>)\n"
"hubSessionKey = loginResponse[\"SessionKey\"]\n"
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/hub-install.adoc:1
#, no-wrap
msgid "Hub Installation"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:2
msgid ""
"Before you begin, you need to install the ``hub-xmlrpc-api`` package, and "
"configure the Hub Server to use the API."
msgstr ""

#. type: Block title
#: modules/large-deployments/pages/hub-install.adoc:3
#, no-wrap
msgid "Procedure: Installing and Configuring the Hub XMLRPC API"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:4
msgid ""
"On the Hub Server, or on a host that has access to all peripheral servers' "
"XMLRPC APIs, install the ``hub-xmlrpc-api`` package."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:5
msgid "The package is available in the {productname} {productnumber} repositories."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:6
#, no-wrap
msgid ""
"OPTIONAL: Set the Hub XMLRPC API service to start automatically at boot "
"time, and start it immediately:\n"
"---\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:7
#, no-wrap
msgid ""
"sudo systemctl enable hub-xmlrpc-api.service\n"
"sudo systemctl start hub-xmlrpc-api.service\n"
"---\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:8
msgid ""
"OPTIONAL: Check that these parameters in the [path]``/etc/hub/hub.conf`` "
"configuration file are correct:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:9
msgid "``HUB_API_URL``: URL to the Hub Server XMLRPC API endpoint."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:10
msgid ""
"Use the default value if you are installing `hub-xmlrpc-api` on the Hub "
"Server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:11
msgid ""
"``HUB_CONNECT_TIMEOUT``: the maximum number of seconds to wait for a "
"response when connecting to a Server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:12
#: modules/large-deployments/pages/hub-install.adoc:14
msgid "Use the default value in most cases."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:13
msgid ""
"``HUB_REQUEST_TIMEOUT``: the maximum number of seconds to wait for a "
"response when calling a Server method."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:15
msgid ""
"``HUB_CONNECT_USING_SSL``: use HTTPS instead of HTTP for communicating with "
"peripheral Servers."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:16
msgid "Recommended for a secure environment."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-install.adoc:17
msgid "Restart services to pick up configuration changes."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/hub-install.adoc:18
msgid ""
"To use HTTPS to connect to peripheral Servers, you must set the "
"``HUB_CONNECT_USING_SSL`` parameter to ``true``, and ensure that the SSL "
"certificates for all the peripheral Servers are installed on the machine "
"where the ``hub-xmlrpc-api`` service runs.  Do this by copying the "
"``RHN-ORG-TRUSTED-SSL-CERT`` certificate file from each peripheral Server's "
"[path]``http://<server-url>/pub/`` directory to "
"[path]``/etc/pki/trust/anchors/``, and run "
"[command]``update-ca-certificates``."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/hub-namespaces.adoc:1
#, no-wrap
msgid "Hub XMLRPC API Namespaces"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:2
msgid ""
"The Hub XMLRPC API operates in a similar way to the {productname} API.  For "
"{productname} API documentation, see https://documentation.suse.com/suma."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:3
msgid ""
"The Hub XMLRPC API exposes the same methods that are available from the "
"server's XMLRPC API, with a few differences in parameter and return types.  "
"Additionally, the Hub XMLRPC API supports some Hub-specific end points which "
"are not available in the {productname} API."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:4
msgid "The Hub XMLRPC API supports three different namespaces:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:5
msgid "The ``hub`` namespace is used to target the Hub XMLRPC API Server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:6
msgid ""
"It supports Hub-specific XMLRPC endpoints which are primarily related to "
"authentication."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:7
msgid ""
"The ``unicast`` namespace is used to target a single server registered in "
"the hub."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:8
msgid ""
"It redirects any call transparently to one specific server and returns any "
"value as if the server's XMLRPC API endpoint was used directly."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:9
msgid ""
"The ``multicast`` namespace is used to target multiple peripheral servers "
"registered in the hub."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:10
msgid ""
"It redirects any call transparently to all the specified servers and returns "
"the results in the form of a ``map``."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:11
msgid ""
"If you do not specify a namespace, all calls are transparently redirected to "
"the underlying {productname} Server XMLRPC API of the Hub Server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:12
msgid ""
"This allows you to call all available methods on the {productname} Server "
"XMLRPC API."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:13
msgid ""
"Methods called without specifying any of the above namespaces will be "
"forwarded to the normal XMLRPC API of the hub.  This is the API exposed on "
"ports 80 and 443."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:14
msgid "Some important considerations for hub namespaces:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:15
msgid ""
"Individual server IDs can be obtained using "
"``client.hub.listServerIds(hubSessionKey)``."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:16
msgid ""
"The ``unicast`` namespace assumes all methods receive ``hubSessionKey`` and "
"serverID as their first two parameters, then any other parameter as "
"specified by the regular Server API."
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-namespaces.adoc:17
#, no-wrap
msgid ""
"client.unicast.[namespace].[methodName](hubSessionKey, serverId, param1, "
"param2)\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:18
msgid ""
"The ``hubSessionKey`` can be obtained using different authentication "
"methods."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:19
msgid "For more information, see xref:large-deployments:hub-auth.adoc[]."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:20
msgid ""
"The ``multicast`` namespace assumes all methods receive ``hubSessionKey``, a "
"list of ``ServerID`` values, then lists of per-server parameters as "
"specified by the regular server XMLRPC API."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-namespaces.adoc:21
msgid ""
"The return value is a ``map``, with ``Successful`` and ``Failed`` entries "
"for each server involved in the call."
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/hub-namespaces.adoc:22
#, no-wrap
msgid ""
"client.multicast.[namespace].[methodname](hubSessionKey, [serverId1, "
"serverId2], [param1_s1, param1_s2], [param2_s1, param2_s2])\n"
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/hub-reqs.adoc:1
#, no-wrap
msgid "Hub Requirements"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:2
msgid "To set up a Hub installation, you require:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:3
msgid "One central {productname} Server, which acts as the Hub Server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:4
msgid ""
"One or more additional {productname} Servers, registered to the Hub as Salt "
"clients."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:5
msgid "This document refers to these as peripheral servers."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:6
msgid "Any number of clients registered to the peripheral servers."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:7
msgid ""
"Ensure the Hub Server and all peripheral servers are running "
"{productname}{nbsp}4.1 or higher."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/hub-reqs.adoc:8
msgid ""
"The Hub Server must not have clients registered to it.  Clients should only "
"be registered to the peripheral servers."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/hub-reqs.adoc:9
#, no-wrap
msgid "Peripheral Servers"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:10
msgid ""
"Peripheral servers must be registered to the Hub Server as Salt clients.  "
"When you register the peripheral servers, assign them the appropriate "
"``SUSE Manager Server`` software channel as their base channel.  "
"Additionally, they must be registered to the Hub Server directly, do not use "
"a proxy."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:11
msgid ""
"For more information about registering clients, see "
"xref:client-configuration:registration-webui.adoc[]."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/hub-reqs.adoc:12
msgid ""
"You need credentials to access the XMLRPC APIs on each server, including the "
"Hub Server."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/large-deployments-overview.adoc:1
#, no-wrap
msgid "Large Deployments Guide Overview"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/large-deployments-overview.adoc:2
#, no-wrap
msgid "**Updated:** {docdate}\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/large-deployments-overview.adoc:3
#: modules/large-deployments/pages/tuning.adoc:2
msgid ""
"{productname} is designed by default to work on small and medium scale "
"installations.  For installations with more than 1000 clients per "
"{productname} Server, adequate hardware sizing and parameter tuning must be "
"performed."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/large-deployments-overview.adoc:4
msgid ""
"There is no hard maximum number of supported systems.  Many factors can "
"affect how many clients can reliably be used in a particular installation.  "
"Factors can include which features are used, and how the hardware and "
"systems are configured."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/large-deployments-overview.adoc:5
msgid ""
"Large installations require standard Salt clients.  These instructions "
"cannot be used in environments using traditional clients or Salt SSH "
"minions."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/large-deployments-overview.adoc:6
msgid ""
"There are two main ways to manage large scale deployments.  You can manage "
"them with a single {productname} Server, or you can use multiple servers in "
"a hub.  Both methods are described in this book."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/large-deployments-overview.adoc:7
msgid ""
"Additionally, if you are operating within a Retail environment, you can use "
"{productname} {smr} to manage large deployments of point-of-service "
"terminals.  There is an introduction to {productname} {smr} in this book."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/large-deployments-overview.adoc:8
msgid ""
"Tuning and monitoring large scale deployments can differ from smaller "
"installations.  This book contains guidance for both tuning and monitoring "
"within larger installations."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/monitoring.adoc:1
#, no-wrap
msgid "Monitoring Large Scale Deployments"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/monitoring.adoc:2
msgid ""
"You can monitor your {productname} environment using Prometheus and "
"Grafana.  {productname} Server and Proxy are able to provide self-health "
"metrics.  You can also install and manage a number of Prometheus exporters "
"on Salt clients."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/monitoring.adoc:3
msgid ""
"Prometheus and Grafana packages are included in the {productname} Client "
"Tools for"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/monitoring.adoc:4
#, no-wrap
msgid ""
" {sle}{nbsp}12, {sle}{nbsp}15, {rhel}{nbsp} 6, {rhel}{nbsp} 7, {rhel}{nbsp} "
"8 and openSUSE 15.x.\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/monitoring.adoc:5
#, no-wrap
msgid ""
" {sle}{nbsp}12, {sle}{nbsp}15, {centos}{nbsp} 6, {centos}{nbsp} 7, "
"{centos}{nbsp} 8 and openSUSE 15.x.\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/monitoring.adoc:6
msgid ""
"You need to install Prometheus and Grafana on a machine separate from the "
"{productname} Server.  We recommend you use a managed Salt client as your "
"monitoring server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/monitoring.adoc:7
msgid ""
"For more information on monitoring, see "
"xref:administration:monitoring.adoc[]."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/multi-server.adoc:1
#, no-wrap
msgid "Using Multiple Servers to Manage Large Scale Deployments"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/multi-server.adoc:2
msgid ""
"If you need to manage a large number of clients, in most cases you can do so "
"with a single {productname} Server, tuned appropriately.  However, if you "
"need to manage tens of thousands of clients, you might find it easier to use "
"multiple {productname} Servers, in a hub, to manage them."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/multi-server.adoc:3
msgid ""
"{productname} Hub helps you manage very large deployments.  The typical Hub "
"topology looks like this:"
msgstr ""

#. type: Target for macro image
#: modules/large-deployments/pages/multi-server.adoc:4
#, no-wrap
msgid "typical-hub-architecture-overview.svg"
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/operation-reqs.adoc:1
#, no-wrap
msgid "Operation Recommendations"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:2
msgid ""
"This section contains a range of recommendations for large scale "
"deployments."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/operation-reqs.adoc:3
msgid ""
"Always start small and scale up gradually.  Monitor the server as you scale "
"to identify problems early."
msgstr ""

#.  Might be worth alphabetising these. LKB 2018-08-09
#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:4
#, no-wrap
msgid "Salt Client Onboarding Rate"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:5
msgid ""
"The rate at which {productname} can onboard clients is limited and depends "
"on hardware resources.  Onboarding clients at a faster rate than "
"{productname} is configured for will build up a backlog of unprocessed "
"keys.  This slows down the process and can potentially exhaust resources.  "
"We recommend that you limit the acceptance key rate programmatically.  A "
"safe starting point would be to onboard a client every 15 seconds.  You can "
"do that with this command:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/operation-reqs.adoc:6
#, no-wrap
msgid ""
"for k in $(salt-key -l un|grep -v Unaccepted); do salt-key -y -a $k; sleep "
"15; done\n"
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:7
#, no-wrap
msgid "Salt Clients and the RNG"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:8
msgid ""
"All communication to and from Salt clients is encrypted.  During client "
"onboarding, Salt uses asymmetric cryptography, which requires available "
"entropy from the Random Number Generator (RNG) facility in the kernel.  If "
"sufficient entropy is not available from the RNG, it will significantly slow "
"down communications.  This is especially true in virtualized environments.  "
"Ensure enough entropy is present, or change the virtualization host options."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:9
msgid ""
"You can check the amount of available entropy with the [command]``cat "
"/proc/sys/kernel/random/entropy_avail``.  It should never be below 100-200."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:10
#, no-wrap
msgid "Clients Running with Unaccepted Salt Keys"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:11
msgid ""
"Idle clients which have not been onboarded, that is clients running with "
"unaccepted Salt keys, consume more resources than idle clients that have "
"been onboarded.  Generally, this consumes about an extra 2.5 Kb/s of inbound "
"network bandwidth per client.  For example, 1000 idle clients will consume "
"about 2.5 Mb/s extra.  This consumption will reduce almost to zero when "
"onboarding has been completed for all clients.  Limit the number of "
"non-onboarded clients for optimal performance."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:12
#, no-wrap
msgid "Disabling the Salt Mine"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:13
msgid ""
"In older versions, {productname} used a tool called Salt mine to check "
"client availability.  The Salt mine would cause clients to contact the "
"server every hour, which created significant load.  With the introduction of "
"a more efficient mechanism in {productname}{nbsp}3.2, the Salt mine is no "
"longer required.  Instead, the {productname} Server uses Taskomatic to ping "
"only the clients that appear to have been offline for twelve hours or more, "
"with all clients being contacted at least once in every twenty four hour "
"period by default.  You can adjust this by changing the "
"[systemitem]``web.system_checkin_threshold`` parameter in "
"[path]``rhn.conf``.  The value is expressed in days, and the default value "
"is [literal]``1``."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:14
msgid ""
"Newly registered Salt clients will have the Salt mine disabled by default.  "
"If the Salt mine is running on your system, you can reduce load by disabling "
"it.  This is especially effective if you have a large number of clients."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:15
msgid "Disable the Salt mine by running this command on the server:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/operation-reqs.adoc:16
#, no-wrap
msgid "salt '*' state.sls util.mgr_mine_config_clean_up\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:17
msgid ""
"This will restart the clients and generate some Salt events to be processed "
"by the server.  If you have a large number of clients, handling these events "
"could create excessive load.  To avoid this, you can execute the command in "
"batch mode with this command:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/operation-reqs.adoc:18
#, no-wrap
msgid "salt --batch-size 50 '*' state.sls util.mgr_mine_config_clean_up\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:19
msgid ""
"You will need to wait for this command to finish executing.  Do not end the "
"process with kbd:[Ctrl+C]."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:20
#, no-wrap
msgid "Disable Unnecessary Taskomatic jobs"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:21
msgid ""
"To minimize wasted resources, you can disable non-essential or unused "
"Taskomatic jobs."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:22
msgid ""
"You can see the list of Taskomatic jobs in the {productname} {webui}, at "
"menu:Admin[Task Schedules]."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:23
msgid ""
"To disable a job, click the name of the job you want to disable, select "
"[guimenu]``Disable Schedule``, and click btn:[Update Schedule]."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:24
msgid ""
"To delete a job, click the name of the job you want to delete, and click "
"btn:[Delete Schedule]."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:25
msgid "We recommend disabling these jobs:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:26
msgid ""
"Daily comparison of configuration files: "
"[systemitem]``compare-configs-default``"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:27
msgid ""
"Hourly synchronization of Cobbler files: "
"[systemitem]``cobbler-sync-default``"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:28
msgid ""
"Daily gatherer and subscription matcher: "
"[systemitem]``gatherer-matcher-default``"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:29
msgid ""
"Do not attempt to disable any other jobs, as it could prevent {productname} "
"from functioning correctly."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:30
#, no-wrap
msgid "Swap and Monitoring"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:31
msgid ""
"It is especially important in large scale deployments that you keep your "
"{productname} Server constantly monitored and backed up."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:32
msgid ""
"Swap space use can have significant impacts on performance.  If significant "
"non-transient swap usage is detected, you can increase the available "
"hardware RAM."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:33
msgid ""
"You can also consider tuning the Server to consume less memory.  For more "
"information on tuning, see xref:salt:large-scale-tuning.adoc[]."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/operation-reqs.adoc:34
#, no-wrap
msgid "AES Key Rotation"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:35
msgid ""
"Communications from the Salt Master to clients is encrypted with a single "
"AES key.  The key is rotated when:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:36
msgid "The ``salt-master`` process is restarted, or"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:37
msgid ""
"Any minion key is deleted (for example, when a client is deleted from "
"{productname})"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:38
msgid ""
"After the AES key has been rotated, all clients must re-authenticate to the "
"master.  By default, this happens next time a client receives a message.  If "
"you have a large number of clients (several thousands), this can cause a "
"high CPU load on the {productname} Server.  If the CPU load is excessive, we "
"recommend that you delete keys in batches, and in off-peak hours if "
"possible, to avoid overloading the server."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:39
msgid "For more information, see:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:40
msgid "https://docs.saltstack.com/en/latest/topics/tutorials/intro_scale.html#too-many-minions-re-authing"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/operation-reqs.adoc:41
msgid "https://docs.saltstack.com/en/getstarted/system/communication.html"
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/retail-large-scale.adoc:1
#, no-wrap
msgid "Managing Large Scale Deployments in a Retail Environment"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/retail-large-scale.adoc:2
msgid ""
"{productname} {smr} {productnumber} is an open source infrastructure "
"management solution, optimized and tailored specifically for the retail "
"industry.  It uses the same technology as {susemgr}, but is customized to "
"address the needs of retail organizations."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/retail-large-scale.adoc:3
msgid ""
"{productname} {smr} is designed for use in retail situations where customers "
"can use point-of-service terminals to purchase or exchange goods, take part "
"in promotions, or collect loyalty points.  In addition to retail "
"installations, it can also be used for novel purposes, such as maintaining "
"student computers in an educational environment, or self-service kiosks in "
"banks or hospitals."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/retail-large-scale.adoc:4
msgid ""
"{productname} {smr} is intended for use in installations that include "
"servers, workstations, point-of-service terminals, and other devices.  It "
"allows administrators to install, configure, and update the software on "
"their servers, and manage the deployment and provisioning of "
"point-of-service machines."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/retail-large-scale.adoc:5
msgid ""
"Point-of-Service (POS) terminals can come in many different formats, such as "
"point-of-sale terminals, kiosks, digital scales, self-service systems, and "
"reverse-vending systems.  Every terminal, however, is provided by a vendor, "
"who set basic information about the device in the firmware.  {productname} "
"{smr} accesses this vendor information to determine how best to work with "
"the terminal in use."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/retail-large-scale.adoc:6
msgid ""
"In most cases, different terminals will require a different operating system "
"(OS) image to ensure they work correctly.  For example, an information kiosk "
"has a high-resolution touchscreen, where a cashier terminal might only have "
"a very basic display.  While both of these terminals require similar "
"processing and network functionality, they will require different OS "
"images.  The OS images ensure that the different display mechanisms work "
"correctly."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/retail-large-scale.adoc:7
msgid ""
"For more information about setting up and using {productname} {smr}, see "
"xref:retail:retail-overview.adoc[]."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/single-server.adoc:1
#, no-wrap
msgid "Using a Single Server to Manage Large Scale Deployments"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/single-server.adoc:2
msgid ""
"This section discusses how to set up a single {productname} Server to manage "
"a large number of clients.  It contains some recommendations for hardware "
"and networking, and an overview of the tuning parameters that you need to "
"consider in a large scale deployment."
msgstr ""

#. type: Title =
#: modules/large-deployments/pages/tuning.adoc:1
#, no-wrap
msgid "Tuning Large Scale Deployments"
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/tuning.adoc:3
msgid ""
"The instructions in this section can have severe and catastrophic "
"performance impacts when improperly used.  In some cases, they can cause "
"{productname} to completely cease functioning.  Always test changes before "
"implementing them in a production environment.  During implementation, take "
"care when changing parameters.  Monitor performance before and after each "
"change, and revert any steps that do not produce the expected result."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/tuning.adoc:4
msgid ""
"We strongly recommend that you contact SUSE Consulting for assistance with "
"tuning."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/tuning.adoc:5
msgid ""
"SUSE will not provide support for catastrophic failure when these advanced "
"parameters are modified without consultation."
msgstr ""

#. type: delimited block =
#: modules/large-deployments/pages/tuning.adoc:6
msgid ""
"Tuning is not required on installations of fewer than 1000 clients.  Do not "
"perform these instructions on small or medium scale installations."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/tuning.adoc:7
#, no-wrap
msgid "The Tuning Process"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:8
msgid ""
"Any {productname} installation is subject to a number of design and "
"infrastructure constraints that, for the purposes of tuning, we call "
"environmental variables.  Environmental variables can include the total "
"number of clients, the number of different operating systems under "
"management, and the number of software channels."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:9
msgid ""
"Environmental variables influence, either directly or indirectly, the value "
"of most configuration parameters.  During the tuning process, the "
"configuration parameters are manipulated to improve system performance."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:10
msgid ""
"Before you begin tuning, you will need to estimate the best setting for each "
"environment variable, and adjust the configuration parameters to suit."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:11
msgid ""
"To help you with the estimation process, we have provided you with a "
"dependency graph.  Locate the environmental variables on the dependency "
"graph to determine how they will influence other variables and parameters."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:12
msgid ""
"Environmental variables are represented by graph nodes in a rectangle at the "
"top of the dependency graph.  Each node is connected to the relevant "
"parameters that might need tuning.  Consult the relevant sections in this "
"document for more information about recommended values."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:13
msgid ""
"Tuning one parameter might require tuning other parameters, or changing "
"hardware, or the infrastructure.  When you change a parameter, follow the "
"arrows from that node on the graph to determine what other parameters might "
"need adjustment.  Continue through each parameter until you have visited all "
"nodes on the graph."
msgstr ""

#.  missing file?
#. type: Positional ($1) AttributeList argument for macro 'image'
#: modules/large-deployments/pages/tuning.adoc:14
#, no-wrap
msgid "Tuning dependency graph"
msgstr ""

#.  missing file?
#. type: Target for macro image
#: modules/large-deployments/pages/tuning.adoc:15
#, no-wrap
msgid "parameter_graph.svg"
msgstr ""

#.  Arghh! My eyes! LKB 2019-08-09
#. type: Block title
#: modules/large-deployments/pages/tuning.adoc:16
#, no-wrap
msgid "Key to the Dependency Graph"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:17
msgid "3D boxes are hardware design variables or constraints"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:18
msgid "Oval-shaped boxes are software or system design variables or constraints"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:19
msgid ""
"Rectangle-shaped boxes are configurable parameters, color-coded by "
"configuration file:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:20
msgid "Red: Apache `httpd` configuration files"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:21
msgid "Blue: Salt configuration files"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:22
msgid "Brown: Tomcat configuration files"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:23
msgid "Grey: PostgreSQL configuration files"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:24
msgid "Purple: `/etc/rhn/rhn.conf`"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:25
msgid ""
"Dashed connecting lines indicate a variable or constraint that might require "
"a change to another parameter"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:26
msgid ""
"Solid connecting lines indicate that changing a configuration parameter "
"requires checking another one to prevent issues"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:27
msgid ""
"After the initial tuning has been completed, you will need to consider "
"tuning again in these cases:"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:28
msgid "If your tuning inputs change significantly"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:29
msgid "If special conditions arise that require a certain parameter to be changed."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:30
msgid "For example, if specific warnings appear in a log file."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:31
msgid "If performance is not satisfactory"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:32
msgid ""
"To re-tune your installation, you will need to use the dependency graph "
"again.  Start from the node where significant change has happened."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/tuning.adoc:33
#, no-wrap
msgid "Environmental Variables"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:34
msgid ""
"This section contains information about environmental variables (inputs to "
"the tuning process)."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:35
#, no-wrap
msgid "Network Bandwidth"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:36
msgid ""
"A measure of the typically available egress bandwith from the {productname} "
"Server host to the clients or {productname} Proxy hosts.  This should take "
"into account network hardware and topology as well as possible capacity "
"limits on switches, routers, and other network equipment between the server "
"and clients."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:37
#, no-wrap
msgid "Channel count"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:38
msgid ""
"The number of expected channels to manage.  Includes any vendor-provided, "
"third-party, and cloned or staged channels."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:39
#, no-wrap
msgid "Client count"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:40
msgid ""
"The total number of actual or expected clients.  It is important to tune any "
"parameters in advance of a client count increase, whenever possible."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:41
#, no-wrap
msgid "OS mix"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:42
msgid ""
"The number of distinct operating system versions that managed clients have "
"installed.  This is ordered by family ({sle}, openSUSE, {rhel}, or {ubuntu} "
"based).  Storage and computing requirements are different in each case."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:43
#, no-wrap
msgid "User count"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:44
msgid ""
"The expected maximum amount of concurrent users interacting with the {webui} "
"plus the number of programs simultaneously using the XMLRPC API.  Includes "
"`spacecmd`, `spacewalk-clone-by-date`, and similar."
msgstr ""

#. type: Title ==
#: modules/large-deployments/pages/tuning.adoc:45
#, no-wrap
msgid "Parameters"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:46
msgid "This section contains information about the available parameters."
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:47
#, no-wrap
msgid "`MaxClients`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:48
#, no-wrap
msgid ""
"| Description          | The maximum number of HTTP requests served "
"simultaneously by Apache httpd.\n"
"                         Proxies, {webui}, and XMLRPC API clients each "
"consume one.\n"
"                         Requests exceeding the parameter will be queued and "
"might result in timeouts.\n"
"| Tune when            | xref:user-count[User count] and proxy count "
"increase significantly and this line appears in "
"[path]``/var/log/apache2/error_log``: [systemitem]``[...] "
"[mpm_prefork:error] [pid ...] AH00161: server reached MaxRequestWorkers "
"setting, consider raising the MaxRequestWorkers setting``.\n"
"| Value default        | 150\n"
"| Value recommendation | 150-500\n"
"| Location             | [path]``/etc/apache2/server-tuning.conf``, in the "
"`prefork.c` section\n"
"| Example              | `MaxClients = 200`\n"
"| After changing       | Immediately change xref:server-limit[`ServerLimit`] "
"and check xref:max-threads[`maxThreads`] for possible adjustment.\n"
"| Notes                | This parameter was renamed to `MaxRequestWorkers`, "
"both names are valid.\n"
"| More information     | "
"https://httpd.apache.org/docs/2.4/en/mod/mpm_common.html#maxrequestworkers\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:49
#, no-wrap
msgid "`ServerLimit`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:50
#, no-wrap
msgid ""
"| Description          | The number of Apache httpd processes serving HTTP "
"requests simultaneously.\n"
"                         The number must equal "
"xref:max-clients[`MaxClients`].\n"
"| Tune when            | xref:max-clients[`MaxClients`] changes\n"
"| Value default        | 150\n"
"| Value recommendation | The same value as xref:max-clients[`MaxClients`]\n"
"| Location             | [path]``/etc/apache2/server-tuning.conf``, in the "
"`prefork.c` section\n"
"| Example              | `ServerLimit = 200`\n"
"| More information     | "
"https://httpd.apache.org/docs/2.4/en/mod/mpm_common.html#serverlimit\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:51
#, no-wrap
msgid "`maxThreads`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:52
#, no-wrap
msgid ""
"| Description          | The number of Tomcat threads dedicated to serving "
"HTTP requests\n"
"| Tune when            | xref:max-clients[`MaxClients`] changes.\n"
"                         `maxThreads` must always be equal or greater than "
"xref:max-clients[`MaxClients`]\n"
"| Value default        | 150\n"
"| Value recommendation | The same value as xref:max-clients[`MaxClients`]\n"
"| Location             | [path]``/etc/tomcat/server.xml``\n"
"| Example              | `<Connector port=\"8009\" protocol=\"AJP/1.3\" "
"redirectPort=\"8443\" URIEncoding=\"UTF-8\" address=\"127.0.0.1\" "
"maxThreads=\"200\" connectionTimeout=\"20000\"/>`\n"
"| More information     | "
"https://tomcat.apache.org/tomcat-9.0-doc/config/http.html\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:53
#, no-wrap
msgid "Tomcat's `-Xmx`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:54
#, no-wrap
msgid ""
"| Description          | The maximum amount of memory Tomcat can use\n"
"| Tune when            | "
"xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] "
"is increased or\n"
"`OutOfMemoryException` errors appear in `/var/log/rhn/rhn_web_ui.log`\n"
"| Value default        | 1{nbsp}GiB\n"
"| Value recommendation | 4-8{nbsp}GiB\n"
"| Location             | [path]``/etc/sysconfig/tomcat``\n"
"| Example              | `JAVA_OPTS=\"... -Xmx8G ...\"`\n"
"| After changing       | Check xref:memory-usage[memory usage]\n"
"| More information     | "
"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:55
#, no-wrap
msgid "`java.message_queue_thread_pool_size`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:56
#, no-wrap
msgid ""
"| Description          | The maximum number of threads in Tomcat dedicated "
"to asynchronous operations, including handling of incoming Salt events\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly\n"
"| Value default        | 5\n"
"| Value recommendation | 50 - 150\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `java.message_queue_thread_pool_size = 50`\n"
"| After changing       | Check "
"xref:hibernate-c3p0-max-size[`hibernate.c3p0.max_size`], as each thread "
"consumes a PostgreSQL connection, starvation might happen if the allocated "
"connection pool is insufficient.\n"
"                         Check xref:thread-pool[`thread_pool`], as each "
"thread might perform Salt API calls, starvation might happen if the "
"allocated Salt thread pool is insufficient.\n"
"                         Check xref:tomcat-xmx[Tomcat's `-Xmx`], as each "
"thread consumes memory, `OutOfMemoryException` might be raised if "
"insufficient.\n"
"| More information     | `man rhn.conf`\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:57
#, no-wrap
msgid "`java.salt_batch_size`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:58
#, no-wrap
msgid ""
"| Description          | The maximum number of minions concurrently "
"executing a scheduled action.\n"
"| Tune when            | xref:client-count[Client count] reaches several "
"thousands and actions are not executed quickly enough.\n"
"| Value default        | 200\n"
"| Value recommendation | 200-500\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `java.salt_batch_size = 300`\n"
"| After changing       | Check xref:memory-usage[memory usage].\n"
"                         Monitor memory usage closely before and after the "
"change.\n"
"| More information     | xref:salt:salt-rate-limiting.adoc[Salt Rate "
"Limiting]\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:59
#, no-wrap
msgid "`java.salt_presence_ping_timeout`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:60
#, no-wrap
msgid ""
"| Description          | Before any action is executed on a client, a "
"presence ping is executed to make sure the client is reachable.\n"
"                         This parameter sets the amount of time before a "
"second command (`find_job`) is sent to the client to verify its presence.\n"
"                         Having many clients typically means some will "
"respond faster than others, so this timeout could be raised to accommodate "
"for the slower ones.\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly, or some clients are responding correctly but too slowly, and "
"{productname} excludes them from calls.\n"
"                         This line appears in "
"[path]``/var/log/rhn/rhn_web_ui.log``: [systemitem]``\"Got no result for "
"<COMMAND> on minion <MINION_ID> (minion did not respond in time)\"``\n"
"| Value default        | 4 seconds\n"
"| Value recommendation | 4-400 seconds\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `java.salt_presence_ping_timeout = 40`\n"
"| More information     | xref:salt:salt-timeouts.adoc[Salt Timeouts]\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:61
#, no-wrap
msgid "`java.salt_presence_ping_gather_job_timeout`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:62
#, no-wrap
msgid ""
"| Description          | Before any action is executed on a client, a "
"presence ping is executed to make sure the client is reachable.\n"
"                         After "
"xref:java-salt-presence-ping-timeout[`java.salt_presence_ping_timeout`] "
"seconds have elapsed without a response, a second command (`find_job`) is "
"sent to the client for a final check.\n"
"                         This parameter sets the number of seconds after the "
"second command after which the client is definitely considered offline.\n"
"                         Having many clients typically means some will "
"respond faster than others, so this timeout could be raised to accommodate "
"for the slower ones.\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly, or some clients are responding correctly but too slowly, and "
"{productname} excludes them from calls.\n"
"                         This line appears in "
"[path]``/var/log/rhn/rhn_web_ui.log``: [systemitem]``\"Got no result for "
"<COMMAND> on minion <MINION_ID> (minion did not respond in time)\"``\n"
"| Value default        | 1 second\n"
"| Value recommendation | 1-100 seconds\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `java.salt_presence_ping_gather_job_timeout = 10`\n"
"| More information     | xref:salt:salt-timeouts.adoc[Salt Timeouts]\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:63
#, no-wrap
msgid "`java.taskomatic_channel_repodata_workers`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:64
#, no-wrap
msgid ""
"| Description          | Whenever content is changed in a software channel, "
"its metadata needs to be recomputed before clients can use it.\n"
"                         Channel-altering operations include the addition of "
"a patch, the removal of a package or a repository synchronization run.\n"
"                         This parameter specifies the maximum number of "
"Taskomatic threads that {productname} will use to recompute the channel "
"metadata.\n"
"                         Channel metadata computation is both CPU-bound and "
"memory-heavy, so raising this parameter and operating on many channels "
"simultaneously could cause Taskomatic to consume significant resources, but "
"channels will be available to clients sooner.\n"
"| Tune when            | xref:channel-count[Channel count] increases "
"significantly (more than 50), or more concurrent operations on channels are "
"expected.\n"
"| Value default        | 2\n"
"| Value recommendation | 2-10\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `java.taskomatic_channel_repodata_workers = 4`\n"
"| After changing       | Check "
"xref:taskomatic-java-maxmemory[`taskomatic.java.maxmemory`] for adjustment, "
"as every new thread will consume memory\n"
"| More information     | `man rhn.conf`\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:65
#, no-wrap
msgid "`taskomatic.java.maxmemory`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:66
#, no-wrap
msgid ""
"| Description          | The maximum amount of memory Taskomatic can use.\n"
"                         Generation of metadata, especially for some OSs, "
"can be memory-intensive, so this parameter might need raising depending on "
"the managed xref:os-mix[OS mix].\n"
"| Tune when            | "
"xref:java-taskomatic-channel-repodata-workers[`java.taskomatic_channel_repodata_workers`] "
"increases, OSs are added to {productname} (particularly {rhel} or {ubuntu}), "
"or `OutOfMemoryException` errors appear in "
"`/var/log/rhn/rhn_taskomatic_daemon.log`.\n"
"| Value default        | 4096 MiB\n"
"| Value recommendation | 4096-16384 MiB\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `taskomatic.java.maxmemory = 8192`\n"
"| After changing       | Check xref:memory-usage[memory usage].\n"
"| More information     | `man rhn.conf`\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:67
#, no-wrap
msgid "`org.quartz.threadPool.threadCount`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:68
#, no-wrap
msgid ""
"| Description          | The number of Taskomatic worker threads.\n"
"                         Increasing this value allows Taskomatic to serve "
"more clients in parallel.\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly\n"
"| Value default        | 20\n"
"| Value recommendation | 20-200\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `org.quartz.threadPool.threadCount = 100`\n"
"| After changing       | Check "
"xref:hibernate-c3p0-max-size[`hibernate.c3p0.max_size`] and "
"xref:thread-pool[`thread_pool`] for adjustment\n"
"| More information     | "
"http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/configuration.html\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:69
#, no-wrap
msgid "`org.quartz.scheduler.idleWaitTime`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:70
#, no-wrap
msgid ""
"| Description          | Cycle time for Taskomatic.\n"
"                         Decreasing this value lowers the latency of "
"Taskomatic.\n"
"| Tune when            | xref:client-count[Client count] is in the "
"thousands.\n"
"| Value default        | 5000 ms\n"
"| Value recommendation | 1000-5000 ms\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `org.quartz.scheduler.idleWaitTime = 1000`\n"
"| More information     | "
"http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/configuration.html\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:71
#, no-wrap
msgid "`MinionActionExecutor.parallel_threads`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:72
#, no-wrap
msgid ""
"| Description          | Number of Taskomatic threads dedicated to sending "
"commands to Salt clients as a result of actions being executed.\n"
"| Tune when            | xref:client-count[Client count] is in the "
"thousands.\n"
"| Value default        | 1\n"
"| Value recommendation | 1-10\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | "
"`taskomatic.com.redhat.rhn.taskomatic.task.MinionActionExecutor.parallel_threads "
"= 10`\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:73
#, no-wrap
msgid "`SSHMinionActionExecutor.parallel_threads`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:74
#, no-wrap
msgid ""
"| Description          | Number of Taskomatic threads dedicated to sending "
"commands to Salt SSH clients as a result of actions being executed.\n"
"| Tune when            | xref:client-count[Client count] is in the "
"hundreds.\n"
"| Value default        | 20\n"
"| Value recommendation | 20-100\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | "
"`taskomatic.com.redhat.rhn.taskomatic.task.SSHMinionActionExecutor.parallel_threads "
"= 40`\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:75
#, no-wrap
msgid "`hibernate.c3p0.max_size`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:76
#, no-wrap
msgid ""
"| Description          | Maximum number of PostgreSQL connections "
"simultaneously available to both Tomcat and Taskomatic.\n"
"                         If any of those components requires more concurrent "
"connections, their requests will be queued.\n"
"| Tune when            | "
"xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] "
"or xref:max-threads[`maxThreads`] increase significantly, or when "
"xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`] "
"has changed significantly.\n"
"                         Each thread consumes one connection in Taskomatic "
"and Tomcat, having more threads than connections might result in starving.\n"
"| Value default        | 20\n"
"| Value recommendation | 100 to 200, higher than the maximum of "
"xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] "
"+ xref:max-threads[`maxThreads`] and "
"xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`]\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `hibernate.c3p0.max_size = 100`\n"
"| After changing       | Check xref:max-connections[`max_connections`] for "
"adjustment.\n"
"| More information     | "
"https://www.mchange.com/projects/c3p0/#maxPoolSize\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:77
#, no-wrap
msgid "`rhn-search.java.maxmemory`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:78
#, no-wrap
msgid ""
"| Description          | The maximum amount of memory that the `rhn-search` "
"service can use.\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly, and `OutOfMemoryException` errors appear in `journalctl -u "
"rhn-search`.\n"
"| Value default        | 512 MiB\n"
"| Value recommendation | 512-4096 MiB\n"
"| Location             | [path]``/etc/rhn/rhn.conf``\n"
"| Example              | `rhn-search.java.maxmemory = 4096`\n"
"| After changing       | Check xref:memory-usage[memory usage].\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:79
#, no-wrap
msgid "`shared_buffers`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:80
#, no-wrap
msgid ""
"| Description          | The amount of memory reserved for PostgreSQL shared "
"buffers, which contain caches of database tables and index data.\n"
"| Tune when            | RAM changes\n"
"| Value default        | 25% of total RAM\n"
"| Value recommendation | 25-40% of total RAM\n"
"| Location             | [path]``/var/lib/pgsql/data/postgresql.conf``\n"
"| Example              | `shared_buffers = 8192MB`\n"
"| After changing       | Check xref:memory-usage[memory usage].\n"
"| More information     | "
"https://www.postgresql.org/docs/10/runtime-config-resource.html#GUC-SHARED-BUFFERS\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:81
#, no-wrap
msgid "`max_connections`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:82
#, no-wrap
msgid ""
"| Description          | Maximum number of PostgreSQL connections available "
"to applications.\n"
"                         More connections allow for more concurrent "
"threads/workers in various components (in particular Tomcat and Taskomatic), "
"which generally improves performance.\n"
"                         However, each connection consumes resources, in "
"particular xref:work-mem[`work_mem`] megabytes per sort operation per "
"connection.\n"
"| Tune when            | "
"xref:hibernate-c3p0-max-size[`hibernate.c3p0.max_size`] changes "
"significantly, as that parameter determines the maximum number of "
"connections available to Tomcat and Taskomatic\n"
"| Value default        | 400\n"
"| Value recommendation | 2 * "
"xref:hibernate-c3p0-max-size[hibernate.c3p0.max_size] + 50, if less than "
"1000\n"
"| Location             | [path]``/var/lib/pgsql/data/postgresql.conf``\n"
"| Example              | `max_connections = 250`\n"
"| After changing       | Check xref:memory-usage[memory usage].\n"
"                         Monitor memory usage closely before and after the "
"change.\n"
"| More information     | "
"https://www.postgresql.org/docs/10/runtime-config-connection.html#GUC-MAX-CONNECTIONS\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:83
#, no-wrap
msgid "`work_mem`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:84
#, no-wrap
msgid ""
"| Description          | The amount of memory allocated by PostgreSQL every "
"time a connection needs to do a sort or hash operation.\n"
"                         Every connection (as specified by "
"xref:max-connections[`max_connections`]) might make use of an amount of "
"memory equal to a multiple of `work_mem`.\n"
"| Tune when            | Database operations are slow because of excessive "
"temporary file disk I/O.\n"
"To test if that is happening, add ``log_temp_files = 5120`` to "
"[path]``/var/lib/pgsql/data/postgresql.conf``, restart PostgreSQL, and "
"monitor the PostgreSQL log files.\n"
"If you see lines containing ``LOG:  temporary file:`` try raising this "
"parameter's value to help reduce disk I/O and speed up database "
"operations.\n"
"| Value recommendation | 2-20 MB\n"
"| Location             | [path]``/var/lib/pgsql/data/postgresql.conf``\n"
"| Example              | `work_mem = 10MB`\n"
"| After changing       | check if the {productname} Server might need "
"additional RAM.\n"
"| More information     | "
"https://www.postgresql.org/docs/10/runtime-config-resource.html#GUC-WORK-MEM\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:85
#, no-wrap
msgid "`effective_cache_size`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:86
#, no-wrap
msgid ""
"| Description          | Estimation of the total memory available to "
"PostgreSQL for caching.\n"
"                         It is the explicitly reserved memory "
"(xref:shared-buffers[`shared_buffers`]) plus any memory used by the kernel "
"as cache/buffer.\n"
"| Tune when            | Hardware RAM or memory usage increase "
"significantly\n"
"| Value recommendation | Start with 75% of total RAM.\n"
"                         For finer settings, use "
"xref:shared-buffers[`shared_buffers`] + free memory + buffer/cache memory.\n"
"                         Free and buffer/cache can be determined via the "
"`free -m` command (`free` and `buff/cache` in the output respectively)\n"
"| Location             | [path]``/var/lib/pgsql/data/postgresql.conf``\n"
"| Example              | `effective_cache_size = 24GB`\n"
"| After changing       | Check xref:memory-usage[memory usage]\n"
"| Notes                | This is an estimation for the query planner, not an "
"allocation.\n"
"| More information     | "
"https://www.postgresql.org/docs/10/runtime-config-query.html#GUC-EFFECTIVE-CACHE-SIZE\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:87
#, no-wrap
msgid "`thread_pool`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:88
#, no-wrap
msgid ""
"| Description          | The number of worker threads serving Salt API HTTP "
"requests.\n"
"                         A higher number can improve parallelism of "
"{productname} Server-initiated Salt operations, but will consume more "
"memory.\n"
"| Tune when            | "
"xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] "
"or "
"xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`] "
"are changed.\n"
"                         Starvation can occur when there are more Tomcat or "
"Taskomatic threads making simultaneous Salt API calls than there are Salt "
"API worker threads.\n"
"| Value default        | 100\n"
"| Value recommendation | 100-500, but should be higher than the sum of "
"xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] "
"and "
"xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`]\n"
"| Location             | [path]``/etc/salt/master.d/susemanager.conf``, in "
"the `rest_cherrypy` section.\n"
"| Example              | `thread_pool: 100`\n"
"| After changing       | Check xref:worker-threads[`worker_threads`] for "
"adjustment.\n"
"| More information     | "
"https://docs.saltstack.com/en/latest/ref/netapi/all/salt.netapi.rest_cherrypy.html#performance-tuning\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:89
#, no-wrap
msgid "`worker_threads`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:90
#, no-wrap
msgid ""
"| Description          | The number of `salt-master` worker threads that "
"process commands and replies from minions and the Salt API.\n"
"                         Increasing this value, assuming sufficient "
"resources are available, allows Salt to process more data in parallel from "
"minions without timing out, but will consume significantly more RAM "
"(typically about 70 MiB per thread).\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly, xref:thread-pool[`thread_pool`] increases significantly, or "
"`SaltReqTimeoutError` or `Message timed out` errors appear in "
"`/var/log/salt/master`.\n"
"| Value default        | 8\n"
"| Value recommendation | 8-200\n"
"| Location             | [path]``/etc/salt/master.d/tuning.conf``\n"
"| Example              | `worker_threads: 50`\n"
"| After changing       | Check xref:memory-usage[memory usage].\n"
"                         Monitor memory usage closely before and after the "
"change.\n"
"| More information     | "
"https://docs.saltstack.com/en/latest/ref/configuration/master.html#worker-threads\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:91
#, no-wrap
msgid "`pub_hwm`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:92
#, no-wrap
msgid ""
"| Description          | The maximum number of outstanding messages sent by "
"`salt-master`. If more than this number of messages need to be sent "
"concurrently, communication with clients slows down, potentially resulting "
"in timeout errors during load peaks.\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly and ``Salt request timed out. The master is not responding.`` "
"errors appear when pinging minions during a load peak.\n"
"| Value default        | 1000\n"
"| Value recommendation | 10000-100000\n"
"| Location             | [path]``/etc/salt/master.d/tuning.conf``\n"
"| Example              | `pub_hwm: 10000`\n"
"| More information     | "
"https://docs.saltstack.com/en/latest/ref/configuration/master.html#pub-hwm, "
"https://zeromq.org/socket-api/#high-water-mark\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:93
#, no-wrap
msgid "`zmq_backlog`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:94
#, no-wrap
msgid ""
"| Description          | The maximum number of allowed client connections "
"that have started but not concluded the opening process. If more than this "
"number of clients connects in a very short time frame, connections are "
"dropped and clients experience a delay re-connecting.\n"
"| Tune when            | xref:client-count[Client count] increases "
"significantly and very many clients reconnect in a short time frame, TCP "
"connections to the `salt-master` process get dropped by the kernel.\n"
"| Value default        | 1000\n"
"| Value recommendation | 1000-5000\n"
"| Location             | [path]``/etc/salt/master.d/tuning.conf``\n"
"| Example              | `zmq_backlog: 2000`\n"
"| More information     | "
"https://docs.saltstack.com/en/latest/ref/configuration/master.html#zmq-backlog, "
"http://api.zeromq.org/3-0:zmq-getsockopt (`ZMQ_BACKLOG`)\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:95
#, no-wrap
msgid "`swappiness`"
msgstr ""

#. type: Table
#: modules/large-deployments/pages/tuning.adoc:96
#, no-wrap
msgid ""
"| Description          | How aggressively the kernel moves unused data from "
"memory to the swap partition.\n"
"                         Setting a lower parameter typically reduces swap "
"usage and results in better performance, especially when RAM memory is "
"abundant.\n"
"| Tune when            | RAM increases, or swap is used when RAM memory is "
"sufficient.\n"
"| Value default        | 60\n"
"| Value recommendation | 1-60. For 128{nbsp}GB of RAM, 10 is expected to "
"give good results.\n"
"| Location             | [path]``/etc/sysctl.conf``\n"
"| Example              | `vm.swappiness = 20`\n"
"| More information     | "
"https://documentation.suse.com/sles/15-SP2/html/SLES-all/cha-tuning-memory.html#cha-tuning-memory-vm\n"
msgstr ""

#. type: Title ===
#: modules/large-deployments/pages/tuning.adoc:97
#, no-wrap
msgid "Memory Usage"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:98
msgid ""
"Adjusting some of the parameters listed in this section can result in a "
"higher amount of RAM being used by various components.  It is important that "
"the amount of hardware RAM is adequate after any significant change."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:99
msgid ""
"To determine how RAM is being used, you will need to check each process that "
"consumes it."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:100
#, no-wrap
msgid "Operating system"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:101
msgid ""
"Stop all {productname} services and inspect the output of [command]``free "
"-h``."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:102
#, no-wrap
msgid "Java-based components"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:103
msgid ""
"This includes Taskomatic, Tomcat, and `rhn-search`.  These services support "
"a configurable memory cap."
msgstr ""

#. type: Labeled list
#: modules/large-deployments/pages/tuning.adoc:104
#, no-wrap
msgid "The {productname} Server"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:105
msgid ""
"Depends on many factors and can only be estimated.  Measure PostgreSQL "
"reserved memory by checking xref:shared-buffers[`shared_buffers`], "
"permanently.  You can also multiply xref:work-mem[`work_mem`] and "
"xref:max-connections[`max_connections`], and multiply by three for a worst "
"case estimate of per-query RAM.  You will also need to check the operating "
"system buffers and caches, which are used by PostgreSQL to host copies of "
"database data.  These often automatically occupy any available RAM."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:106
msgid ""
"It is important that the {productname} Server has sufficient RAM to "
"accommodate all of these processes, especially OS buffers and caches, to "
"have reasonable PostgreSQL performance.  We recommend you keep several "
"gigabytes available at all times, and add more as the database size on disk "
"increases."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:107
msgid ""
"Whenever the expected amount of memory available for OS buffers and caches "
"changes, update the `effective_cache_size` parameter to have PostgreSQL use "
"it correctly.  You can calculate the total available by finding the total "
"RAM available, less the expected memory usage."
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:108
msgid ""
"To get a live breakdown of the memory used by services on the {productname} "
"Server, use this command:"
msgstr ""

#. type: delimited block -
#: modules/large-deployments/pages/tuning.adoc:109
#, no-wrap
msgid "pidstat -p ALL -r --human 1 60 | tee pidstat-memory.log\n"
msgstr ""

#. type: Plain text
#: modules/large-deployments/pages/tuning.adoc:110
msgid ""
"This command will save a copy of displayed data in the `pidstat-memory.log` "
"file for later analysis."
msgstr ""
