# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2021-03-05 10:21+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title =
#: modules/salt/nav-salt-guide.adoc:1
#, no-wrap
msgid "Salt Guide: {productname} {productnumber}"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:2
msgid "xref:salt-overview.adoc[Salt Guide]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:3
msgid "xref:salt-terminology.adoc[Terminology]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:4
msgid "xref:salt-command.adoc[The Salt Command]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:5
msgid "xref:salt-useful-commands.adoc[Common Salt Commands]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:6
msgid "xref:salt-states.adoc[Salt States and Pillars]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:7
msgid "xref:salt-file-locations.adoc[File Locations]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:8
msgid "xref:salt-gitfs.adoc[GitFS Fileserver Backend]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:9
msgid "xref:yomi.adoc[Install Using Yomi]"
msgstr ""

#.  Formulas
#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:10
msgid "xref:config-modules.adoc[Configuration Modules]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:11
msgid "xref:formulas-intro.adoc[Salt Formulas]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:12
msgid "xref:formulas-suma.adoc[Formulas provided by {productname}]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:13
msgid "xref:formula-bind.adoc[Bind Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:14
msgid "xref:formula-branchnetwork.adoc[Branch Network Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:15
msgid "xref:formula-dhcpd.adoc[DHCPd Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:16
msgid "xref:formula-imagesync.adoc[Image Sync Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:17
msgid "xref:formula-monitoring.adoc[Monitoring Formulas]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:18
msgid "xref:formula-pxe.adoc[PXE Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:19
msgid "xref:formula-saltboot.adoc[Saltboot Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:20
msgid "xref:formula-tftpd.adoc[TFTPd Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:21
msgid "xref:formula-vsftpd.adoc[VsFTPd Formula]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:22
msgid "xref:formula-yomi.adoc[Yomi Formula]"
msgstr ""

#. *** xref:salt-example-formula.adoc[Example Custom Formula]
#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:23
msgid "xref:formulas-custom.adoc[Custom Formulas]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:24
msgid "xref:salt-ssh.adoc[Salt SSH]"
msgstr ""

#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:25
msgid "xref:salt-rate-limiting.adoc[Rate Limiting]"
msgstr ""

#.  Leaving this breadcrumb here for now, but these pages will need to be removed from the Salt Guide entirely at some point. --LKB 2020-07-17
#.  *** xref:large-scale-tuning.adoc[Tuning Large Scale Installations]
#. type: Plain text
#: modules/salt/nav-salt-guide.adoc:26
msgid "xref:large-scale.adoc[Scaling Salt Minions]"
msgstr ""

#. type: Title =
#: modules/salt/pages/config-modules.adoc:1
#, no-wrap
msgid "Configuration Modules"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/config-modules.adoc:2
msgid "This feature is a technology preview."
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:3
msgid ""
"Salt uses execution and state modules to define, apply, and orchestrate "
"configuration of your devices.  {productname} provides a set of modules "
"called {uyuni} configuration modules, that you can use to configure both "
"{susemgr} and {uyuni} Servers."
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:4
msgid ""
"You can use the {uyuni} configuration modules directly or using SLS files.  "
"They are are especially useful if you have multiple {productname} Servers, "
"for example in Hub installations, but they are also useful for smaller "
"installations."
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:5
msgid ""
"For more information about using Hub, see "
"xref:large-deployments:multi-server.adoc[]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:6
msgid "You can use {uyuni} configuration modules to configure:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:7
msgid "Organizations"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:8
msgid "Users"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:9
msgid "User permissions"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:10
msgid "System groups"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:11
msgid "Activation Keys"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:12
msgid ""
"For more information about Salt execution modules, see "
"https://docs.saltstack.com/en/latest/topics/tutorials/modules.html."
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:13
msgid ""
"For more information about Salt state modules, see "
"https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html."
msgstr ""

#. type: Title ==
#: modules/salt/pages/config-modules.adoc:14
#, no-wrap
msgid "Install Configuration Modules"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:15
msgid ""
"The {uyuni} configuration modules are available in the "
"[package]``uyuni-config-modules`` package.  On the {productname} Server, at "
"the command prompt, as root, use this command:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/config-modules.adoc:16
#, no-wrap
msgid "zypper in uyuni-config-modules\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/config-modules.adoc:17
msgid ""
"This package also installs detailed API descriptions, indications on pillar "
"settings, and examples.  When you have installed the package, navigate to "
"[package]``/usr/share/doc/packages/uyuni-config-modules/``."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-bind.adoc:1
#, no-wrap
msgid "Bind Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:2
msgid ""
"The Bind formula is used to configure the Domain Name System (DNS) on the "
"branch server.  POS terminals will use the DNS on the branch server for name "
"resolution of saltboot specific hostnames."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:3
msgid ""
"When you are configuring the Bind formula for a branch server with a "
"dedicated internal network, check that you are using the same fully "
"qualified domain name (FQDN) on both the external and internal branch "
"networks.  If the FQDN does not match on both networks, the branch server "
"will not be recognized as a proxy server."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:4
msgid ""
"The following procedure outlines a standard configuration with two zones.  "
"Adjust it to suit your own environment."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:5
msgid ""
"Zone 1 is a regular domain zone.  Its main purpose is to resolve saltboot "
"hostnames such as TFTP, FTP, or Salt.  It can also resolve the terminal "
"names if configured."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:6
msgid ""
"Zone 2 is the reverse zone of Zone 1.  Its main purpose is to resolve IP "
"addresses back to hostnames.  Zone 2 is primarily needed for the correct "
"determination of the FQDNs of the branch."
msgstr ""

#.  REMARK: this procedure is probably too long.  Where to split?
#.  REMARK: are these list items (`*`) substeps?  Or what?  Confusing.
#. type: Block title
#: modules/salt/pages/formula-bind.adoc:7
#, no-wrap
msgid "Procedure: Configuring Bind with Two Zones"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:8
msgid ""
"Check the [systemitem]``Bind`` formula, click [btn]``Save``, and navigate to "
"the menu:Formulas[Bind] tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:9
msgid ""
"In the [guimenu]``Config`` section, select [systemitem]``Include "
"Forwarders``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:10
msgid ""
"In the [guimenu]``Configured Zones`` section, use these parameters for "
"Zone 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:11
msgid ""
"In the [guimenu]``Name`` field, enter the domain name of your branch network "
"(for example: [systemitem]``branch1.example.com``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:12
msgid "In the [guimenu]``Type`` field, select [systemitem]``master``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:13
msgid ""
"Click [btn]``Add item`` to add a second zone, and set these parameters for "
"Zone 2:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:14
msgid ""
"In the [guimenu]``Name`` field, use the reverse zone for the configured IP "
"range (for example: [systemitem]``com.example.branch1``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:15
msgid "In the [guimenu]``Type`` field, select [systemitem]``master``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:16
msgid ""
"In the [guimenu]``Available Zones`` section, use these parameters for "
"Zone 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:17
msgid ""
"In the [guimenu]``Name`` field, enter the domain name of your branch network "
"(for example: [systemitem]``branch1.example.org``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:18
msgid "In the [guimenu]``File`` field, type the name of your configuration file."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:19
msgid ""
"In the [guimenu]``Start of Authority (SOA)`` section, use these parameters "
"for Zone 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:20
msgid ""
"In the [guimenu]``Nameserver (NS)`` field, use the FQDN of the branch server "
"(for example: [systemitem]``branchserver.branch1.example.org``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:21
msgid ""
"In the [guimenu]``Contact`` field, use the email address for the domain "
"administrator."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:22
msgid "Keep all other fields as their default values."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:23
msgid ""
"In the [guimenu]``Records`` section, in subsection [guimenu]``A``, use these "
"parameters to set up an A record for Zone 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:24
msgid ""
"In the [guimenu]``Hostname`` field, use the hostname of the branch server "
"(for example: [systemitem]``branchserver``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:25
msgid ""
"In the [guimenu]``IP`` field, use the IP address of the branch server (for "
"example, [systemitem]``192.168.1.5``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:26
msgid ""
"In the [guimenu]``Records`` section, subsection [guimenu]``NS``, use these "
"parameters to set up an NS record for Zone 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:27
msgid ""
"In the input box, use the hostname of the branch server (for example: "
"[systemitem]``branchserver``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:28
msgid ""
"In the [guimenu]``Records`` section, subsection [guimenu]``CNAME``, use "
"these parameters to set up CNAME records for Zone 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:29
msgid ""
"In the [guimenu]``Key`` field, enter [systemitem]``tftp``, and in the "
"[guimenu]``Value`` field, type the hostname of the branch server (for "
"example: [systemitem]``branchserver``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:30
msgid ""
"Click [guimenu]``Add Item``. In the [guimenu]``Key`` field, enter "
"[systemitem]``ftp``, and in the [guimenu]``Value`` field, type the hostname "
"of the branch server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:31
msgid ""
"Click [guimenu]``Add Item``. In the [guimenu]``Key`` field, enter "
"[systemitem]``dns``, and in the [guimenu]``Value`` field, type the hostname "
"of the branch server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:32
msgid ""
"Click [guimenu]``Add Item``. In the [guimenu]``Key`` field, enter "
"[systemitem]``dhcp``, and in the [guimenu]``Value`` field, type the hostname "
"of the branch server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:33
msgid ""
"Click [guimenu]``Add Item``. In the [guimenu]``Key`` field, enter "
"[systemitem]``salt``, and in the [guimenu]``Value`` field, type the FQDN of "
"the branch server (for example: "
"[systemitem]``branchserver.branch1.example.org``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:34
msgid ""
"Set up Zone 2 using the same parameters as for Zone 1, but ensure you use "
"the reverse details:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:35
msgid "The same SOA section as Zone 1."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:36
msgid "Empty A and CNAME records."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:37
msgid "Additionally, configure in Zone 2:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:38
msgid ""
"`Generate Reverse` field by the network IP address set in branch server "
"network formula (for example, [systemitem]``192.168.1.5/24``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:39
msgid ""
"`For Zones` should specify the domain name of your branch network (for "
"example, [systemitem]``branch1.example.org``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:40
#: modules/salt/pages/formula-dhcpd.adoc:25
#: modules/salt/pages/formula-imagesync.adoc:12
#: modules/salt/pages/formula-monitoring.adoc:25
#: modules/salt/pages/formula-monitoring.adoc:48
#: modules/salt/pages/formula-monitoring.adoc:63
#: modules/salt/pages/formula-saltboot.adoc:50
#: modules/salt/pages/formula-tftpd.adoc:10
#: modules/salt/pages/formula-vsftpd.adoc:10
#: modules/salt/pages/formula-yomi.adoc:32
#: modules/salt/pages/formula-yomi.adoc:56
#: modules/salt/pages/formula-yomi.adoc:72
#: modules/salt/pages/formula-yomi.adoc:97
#: modules/salt/pages/formula-yomi.adoc:106
#: modules/salt/pages/formula-yomi.adoc:113
msgid "Click btn:[Save Formula] to save your configuration."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-bind.adoc:41
#: modules/salt/pages/formula-branchnetwork.adoc:42
#: modules/salt/pages/formula-dhcpd.adoc:26
#: modules/salt/pages/formula-imagesync.adoc:13
#: modules/salt/pages/formula-pxe.adoc:13
#: modules/salt/pages/formula-tftpd.adoc:11
#: modules/salt/pages/formula-vsftpd.adoc:11
#: modules/salt/pages/formulas-suma.adoc:21
msgid "Apply the highstate."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:42
msgid ""
"Reverse name resolution on terminals might not work for networks that are "
"inside one of these IPv4 private address ranges:"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:43
msgid "[systemitem]``10.0.0.0/8``"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:44
msgid "[systemitem]``172.16.0.0/12``"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:45
msgid "[systemitem]``192.168.0.0/16``"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:46
msgid ""
"If you encounter this problem, go to the [guimenu]``Options`` section of the "
"Bind formula, and click btn:[Add item]:"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:47
msgid "In the [guimenu]``Options`` field, enter [systemitem]``empty-zones-enable``."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-bind.adoc:48
msgid "In the [guimenu]``Value`` field, select [systemitem]``No``."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-branchnetwork.adoc:1
#, no-wrap
msgid "Branch Network Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:2
msgid ""
"The Branch Network formula is used to configure the networking services "
"required by the branch server, including DHCP, DNS, TFTP, PXE, and FTP."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formula-branchnetwork.adoc:3
#, no-wrap
msgid "Set Up a Branch Server Networking"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:4
msgid ""
"The branch server can be configured to use networking in many different "
"ways.  The most common ways provide either a dedicated or shared LAN for "
"terminals."
msgstr ""

#. type: Title ===
#: modules/salt/pages/formula-branchnetwork.adoc:5
#, no-wrap
msgid "Set Up a Branch Server with a Dedicated LAN"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:6
msgid ""
"In this configuration, the branch server requires at least two network "
"interfaces: one acts as a WAN to communicate with the {susemgr} server, and "
"the other one acts as an isolated LAN to communicate with terminals."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:7
msgid ""
"This configuration allows for the branch server to provide DHCP, DNS, TFTP, "
"PXE, and FTP services to terminals.  These services can be configured with "
"Salt formulas in the {susemgr} {webui}."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-branchnetwork.adoc:8
#, no-wrap
msgid "Procedure: Setting Up a Branch Server with a Dedicated LAN"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:9
#: modules/salt/pages/formula-branchnetwork.adoc:28
#: modules/salt/pages/formula-branchnetwork.adoc:39
#: modules/salt/pages/formula-pxe.adoc:4
#: modules/salt/pages/formula-tftpd.adoc:4
#: modules/salt/pages/formula-vsftpd.adoc:4
msgid ""
"In the {susemgr} {webui}, open the details page for the branch server, and "
"navigate to the [guimenu]``Formulas`` tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:10
#: modules/salt/pages/formula-branchnetwork.adoc:29
msgid "In the [guimenu]``Branch Network`` section, set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:11
msgid "Keep [guimenu]``Dedicated NIC`` checked."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:12
msgid ""
"In the [guimenu]``NIC`` field, enter the name of the network device that is "
"connected to the internal LAN."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:13
msgid ""
"In the [guimenu]``IP`` field, enter the static IP address to be assigned to "
"the branch server on the internal LAN."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:14
msgid ""
"In the [guimenu]``Netmask`` field, enter the network mask of the internal "
"LAN."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:15
msgid ""
"Check [guimenu]``Enable Route`` if you want the branch server to route "
"traffic from internal LAN to WAN."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:16
msgid ""
"Check [guimenu]``Enable NAT`` if you want the branch server to convert "
"addresses from internal LAN to WAN."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:17
#: modules/salt/pages/formula-branchnetwork.adoc:33
msgid "Select the [guimenu]``bind`` DNS forwarder mode."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:18
#: modules/salt/pages/formula-branchnetwork.adoc:34
msgid ""
"Check DNS forwarder fallback if you want to rely on an external DNS if the "
"branch DNS fails."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:19
#: modules/salt/pages/formula-branchnetwork.adoc:35
msgid "Specify the working directory, and the directory owner and group."
msgstr ""

#. type: Title ===
#: modules/salt/pages/formula-branchnetwork.adoc:20
#, no-wrap
msgid "Set up a Branch Server with a Shared Network"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:21
msgid ""
"In this configuration, the branch server has only one network interface "
"card, which is used to connect to the {susemgr} server as well as the "
"terminals."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:22
msgid ""
"This configuration allows for the branch server to provide DNS, TFTP, PXE, "
"and FTP services to terminals.  These services can be configured with Salt "
"formulas in the {susemgr} {webui}.  Optionally, the branch server can also "
"provide DHCP services in this configuration."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-branchnetwork.adoc:23
msgid ""
"If DHCP services are not provided by the branch server, ensure that your "
"external DHCP configuration is set correctly:"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-branchnetwork.adoc:24
msgid ""
"The [systemitem]``next-server`` option must point to the branch server for "
"PXE boot to work."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-branchnetwork.adoc:25
msgid ""
"The [systemitem]``filename`` option must correctly identify the network boot "
"program (by default, this is [path]``/boot/pxelinux``)."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-branchnetwork.adoc:26
msgid ""
"The [systemitem]``domain-name-servers`` option must point to the branch "
"server for correct host name resolution."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-branchnetwork.adoc:27
#, no-wrap
msgid "Procedure: Setting Up a Branch Server with a Shared Network"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:30
msgid "Keep [guimenu]``Dedicated NIC`` unchecked."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:31
msgid "Enable services on the branch server’s firewall."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:32
msgid "Ensure you include DNS, TFTP, and FTP services."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formula-branchnetwork.adoc:36
#, no-wrap
msgid "Set up Branch Server Terminal Naming"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:37
msgid ""
"In this configuration it is required to fill at least [systemitem]``Branch "
"Identification``.  This identifies Branch Server in Retail subsystem and is "
"also used to better organize terminals with their respective branch servers."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-branchnetwork.adoc:38
#, no-wrap
msgid "Procedure: Setting up a Branch Server Identification"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:40
msgid ""
"In the [guimenu]``Terminal Naming`` section, enter the [systemitem]``Branch "
"Identification`` string."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:41
msgid "Click btn:[Save] to save your changes."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-branchnetwork.adoc:43
msgid ""
"It is also possible to set various options about terminal naming, for more "
"information about terminal naming see "
"xref:retail:retail-terminal-names.adoc[]."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-dhcpd.adoc:1
#, no-wrap
msgid "DHCPd Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:2
msgid ""
"The DHCPd formula is used to configure the DHCP service on the branch "
"server."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-dhcpd.adoc:3
#, no-wrap
msgid "Procedure: Configuring DHCP"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:4
#: modules/salt/pages/formula-imagesync.adoc:5
msgid ""
"In the {susemgr} {webui}, open the details page for the branch server, and "
"navigate to the Formulas tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:5
msgid "Check the [guimenu]``Dhcpd`` formula, and click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:6
msgid "Navigate to the menu:Formulas[Dhcpd] tab, and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:7
msgid ""
"In the [guimenu]``Domain Name`` field, enter the domain name for the branch "
"server (for example: [systemitem]``branch1.example.com``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:8
msgid ""
"In the [guimenu]``Domain Name Server`` field, enter either the IP address or "
"resolvable FQDN of the branch DNS server (for example: "
"[systemitem]``192.168.1.5``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:9
msgid ""
"In the [guimenu]``Listen Interfaces`` field, enter the name of the network "
"interface used to connect to the local branch network (for example: "
"[systemitem]``eth1``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:10
msgid ""
"Navigate to the [guimenu]``Network Configuration (subnet)`` section, and use "
"these parameters for Network1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:11
msgid ""
"In the [guimenu]``Network IP`` field, enter the IP address of the branch "
"server network (for example: [systemitem]``192.168.1.0``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:12
msgid ""
"In the [guimenu]``Netmask`` field, enter the network mask of the branch "
"server network (for example: [systemitem]``255.255.255.0``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:13
msgid ""
"In the [guimenu]``Domain Name`` field, enter the domain name for the branch "
"server network (for example: [guimenu]``branch1.example.com``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:14
msgid ""
"In the [guimenu]``Dynamic IP Range`` section, use these parameters to "
"configure the IP range to be served by the DHCP service:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:15
msgid ""
"In the first input box, set the lower bound of the IP range (for example: "
"[systemitem]``192.168.1.51``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:16
msgid ""
"In the second input box, set the upper bound of the IP range (for example: "
"[systemitem]``192.168.1.151``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:17
msgid ""
"In the [guimenu]``Broadcast Address`` field, enter the broadcast IP address "
"for the branch network (for example: [systemitem]``192.168.1.255``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:18
msgid ""
"In the [guimenu]``Routers`` field, enter the IP address to be used by "
"routers in the branch server network (for example: "
"[systemitem]``192.168.1.5``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:19
msgid ""
"In the [guimenu]``Next Server`` field, enter the hostname or IP address of "
"the branch server (for example: [systemitem]``192.168.1.5``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:20
msgid ""
"In the [guimenu]``Filename`` field, if you are booting a client using PXE, "
"type the path to the PXE bootloader."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:21
msgid ""
"There is usually no need to change the default value of "
"[systemitem]``/boot/pxelinux.0``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:22
msgid ""
"In the [guimenu]``Filename Efi`` field, if you are booting a UEFI client "
"using PXE, type the path to the PXE bootloader."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:23
msgid ""
"There is usually no need to change the default value of "
"[systemitem]``/boot/shim.efi``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-dhcpd.adoc:24
msgid ""
"In the [guimenu]``Filename Http`` field, if you are booting a UEFI client "
"using HTTP, type [systemitem]``http://branchserver/saltboot/boot/shim.efi``."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-imagesync.adoc:1
#, no-wrap
msgid "Image Synchronization Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:2
msgid ""
"The Image Synchronization formula is used to configure when OS images are "
"synchronized to the branch server, and to specify which images to "
"synchronize."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:3
msgid ""
"If this formula is not enabled, synchronization must be started manually, "
"and all images will be synchronized."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-imagesync.adoc:4
#, no-wrap
msgid "Procedure: Configuring Image Synchronization"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:6
msgid "Check the [guimenu]``Image Synchronize`` formula, and click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:7
msgid ""
"Navigate to the menu:Formulas[Image Synchronize] tab, and set these "
"parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:8
msgid ""
"Check the [guimenu]``Include Image Synchronization in Highstate`` field to "
"have image synchronization occur every time highstate is applied."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:9
msgid ""
"This ensures that you do not have to perform image synchronization manually, "
"however it requires a high bandwidth environment."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:10
msgid ""
"In the [guimenu]``Synchronize only the listed images`` field, click btn:[Add "
"item] to add the images you want to have synchronized automatically."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-imagesync.adoc:11
msgid ""
"Alternatively, you can leave this list blank to have all images "
"synchronized."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-imagesync.adoc:14
msgid ""
"The Image Synchronization state does not delete cached images.  If you are "
"running out of disk space, check the size of the Salt client cache "
"directory, and delete it if required.  By default, the directory is located "
"at ``/var/cache/salt/minion``."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-monitoring.adoc:1
#, no-wrap
msgid "Monitoring Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:2
msgid ""
"The monitoring services in {productname} are configured using formulas with "
"forms.  The package is installed by default, and contains these formulas:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:3
msgid "Grafana"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:4
msgid "Prometheus"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:5
msgid "Prometheus Exporters"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:6
#: modules/salt/pages/formula-monitoring.adoc:65
msgid ""
"For more information about using monitoring, see "
"xref:administration:monitoring.adoc[]."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-monitoring.adoc:7
#, no-wrap
msgid "Procedure: Configuring the Grafana Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:8
msgid ""
"Navigate to the menu:Formulas[Grafana] tab, and set these parameters in the "
"[guimenu]``Grafana`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:9
msgid "Check the [guimenu]``Enabled`` box to enable Grafana visualizations."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:10
msgid ""
"In the [guimenu]``Default admin user`` field, type the name of the default "
"Grafana user."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:11
msgid ""
"In the [guimenu]``Default admin password`` field, enter a password for the "
"default user."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:12
msgid ""
"Alternatively, click btn:[Generate new password] to generate a password and "
"fill the field."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:13
msgid ""
"For each Prometheus data source you want to use, in the "
"menu:Datasources[Prometheus] section, click btn:[+], and set these "
"parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:14
msgid ""
"In the [guimenu]``Datasource name`` field, type a name to identify the data "
"source."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:15
msgid ""
"In the [guimenu]``Prometheus URL`` field, type the location of the "
"Prometheus server, and append port ``9090``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:16
msgid "For example, ``http://example.com:9090``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:17
msgid ""
"In the [guimenu]``Dashboards`` section, check the dashboards you want to "
"use:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:18
msgid "[guimenu]``Uyuni server dashboard``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:19
msgid "[guimenu]``Uyuni clients dashboard``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:20
msgid "[guimenu]``PostgreSQL dashboard``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:21
msgid "[guimenu]``Apache HTTPD dashboard``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:22
msgid "[guimenu]``Kubernetes cluster dashboard``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:23
msgid "[guimenu]``Kubernetes etcd dashboard``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:24
msgid "[guimenu]``Kubernetes namespaces dashboard``"
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-monitoring.adoc:26
#, no-wrap
msgid "Procedure: Configuring the Prometheus Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:27
msgid ""
"Navigate to the menu:Formulas[Prometheus] tab, and set these parameters in "
"the [guimenu]``Prometheus`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:28
msgid "Check the [guimenu]``Enabled`` box to enable Prometheus monitoring."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:29
msgid ""
"In the [guimenu]``Scrape interval`` field, type the frequency of data "
"scraping, in seconds."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:30
msgid "For example, ``15`` will scrape data every fifteen seconds."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:31
msgid "In the [guimenu]``Evaluation interval`` field, type the FIXME, in seconds."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:32
msgid "For example, ``15`` will FIXME every fifteen seconds."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:33
msgid "In the [guimenu]``Uyuni Server`` section, set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:34
msgid "Check the [guimenu]``Enabled`` box to enable monitoring on this server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:35
msgid ""
"Check the [guimenu]``Autodiscover clients`` box to enable Prometheus to "
"automatically find and monitor new clients when they are added to the "
"server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:36
msgid ""
"In the [guimenu]``Username`` field, type the user name of the Prometheus "
"account on the server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:37
msgid ""
"In the [guimenu]``Password`` field, type the password of the Prometheus "
"account on the server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:38
msgid "In the [guimenu]``Alerting`` section, set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:39
msgid ""
"Check the [guimenu]``Enable local Alertmanager service`` box to enable the "
"alert manager service."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:40
msgid ""
"Check the [guimenu]``Use local Alertmanager`` box to use the local alert "
"manager service."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:41
msgid ""
"For each alert manager you want to use, in the menu:Alerting[Alertmanagers] "
"section, click btn:[+], and set these parameters:"
msgstr ""

#. For example, ``FIXME``.
#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:42
msgid ""
"In the [guimenu]``IP Address:Port`` field, type the location of the alert "
"manager target, including the port number."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:43
msgid ""
"To use a rule file, in the menu:Alerting[Rule Files] section, click btn:[+], "
"and set these parameters:"
msgstr ""

#. For example, ``FIXME``.
#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:44
msgid ""
"In the [guimenu]``Rule Files`` field, type the location of the rule file you "
"want to use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:45
msgid ""
"To use a scrape configuration, in the [guimenu]``User defined scrape "
"configurations`` section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:46
msgid "In the [guimenu]``Job name`` field, type a name for your configuration."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:47
msgid ""
"In the [guimenu]``Files`` field, type the location of the configuration file "
"you want to use."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-monitoring.adoc:49
#, no-wrap
msgid "Procedure: Configuring the Prometheus Exporters Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:50
msgid ""
"Navigate to the menu:Formulas[Prometheus Exporters] tab, and set these "
"parameters in the [guimenu]``Node Exporter`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:51
msgid "Check the [guimenu]``Enabled`` box to enable the node exporter."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:52
#: modules/salt/pages/formula-monitoring.adoc:56
#: modules/salt/pages/formula-monitoring.adoc:61
msgid ""
"In the [guimenu]``Arguments`` field, type any customized arguments for this "
"exporter."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:53
msgid "For example, ``--web.listen-address=\":9100\"``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:54
msgid "In the [guimenu]``Apache Exporter`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:55
msgid "Check the [guimenu]``Enabled`` box to enable the Apache exporter."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:57
msgid "For example, ``--telemetry.address=\":9117\"``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:58
msgid "In the [guimenu]``Postgres Exporter`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:59
msgid "Check the [guimenu]``Enabled`` box to enable the PostreSQL exporter."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:60
msgid ""
"In the [guimenu]``Data source Name`` field, type the name of the data source "
"to use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:62
msgid "For example, ``--web.listen-address=\":9187\"``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-monitoring.adoc:64
#: modules/salt/pages/formula-yomi.adoc:114
msgid "When you have completed and saved all the forms, apply the highstate."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-pxe.adoc:1
#, no-wrap
msgid "PXE Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:2
msgid "The PXE formula is used to configure PXE booting on the branch server."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-pxe.adoc:3
#, no-wrap
msgid "Procedure: Configuring PXE Booting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:5
msgid "Select the [systemitem]``Pxe`` formula, and click [btn]``Save``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:6
msgid "Navigate to the menu:Formulas[Pxe] tab, and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:7
msgid "In the [guimenu]``Kernel filename`` field, keep the default value."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:8
msgid "In the [guimenu]``Initrd filename`` field, keep the default value."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:9
msgid ""
"In the [guimenu]``Kernel command line parameters`` field, keep the default "
"value."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:10
msgid ""
"For more information about possible values, see "
"<<retail.sect.formulas.pxe.kernelparams>>."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:11
msgid ""
"In the [guimenu]``PXE root directory`` field, enter the path to the saltboot "
"directory (for example, [systemitem]``/srv/saltboot``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:12
msgid "Click [btn]``Save Formula`` to save your configuration."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formula-pxe.adoc:14
#, no-wrap
msgid "Saltboot Kernel Command Line Parameters"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:15
msgid ""
"Saltboot supports common kernel parameters and saltboot-specific kernel "
"parameters.  All the parameters can be entered in the [guimenu]``Kernel "
"Command Line Parameters`` field of the PXE formula."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:16
#, no-wrap
msgid "[systemitem]``kiwidebug=1``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:17
msgid "Starts a shell on tty2 during boot and enables debug logging in Salt."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-pxe.adoc:18
msgid ""
"Do not use this parameter in a production environment as it creates a major "
"security hole.  This parameter should be used only in a development "
"environment for debug purposes."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:19
#, no-wrap
msgid "[systemitem]``MASTER``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:20
msgid "Overrides auto-detection of the Salt master. For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-pxe.adoc:21
#, no-wrap
msgid "MASTER=myproxy.domain.com\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:22
#, no-wrap
msgid "[systemitem]``SALT_TIMEOUT``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:23
msgid ""
"Overrides the local boot fallback timeout if the Salt master does not apply "
"the saltboot state within this timeout (default: 60 seconds).  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-pxe.adoc:24
#, no-wrap
msgid "SALT_TIMEOUT=300\n"
msgstr ""

#.  see https://bugzilla.suse.com/show_bug.cgi?id=1111348#c3
#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:25
#, no-wrap
msgid "[systemitem]``DISABLE_HOSTNAME_ID``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:26
msgid ""
"If the terminal has a hostname assigned by DHCP, it is by default used as a "
"minion ID.  Setting this option to `1` disables this mechanism, and SMBios "
"information will be used as a minion ID."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:27
#, no-wrap
msgid "[systemitem]``DISABLE_UNIQUE_SUFFIX``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:28
msgid ""
"Setting this option to `1` disables adding random generated suffix to "
"terminal minion ID."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:29
msgid ""
"If you set this parameter make sure your terminal has either a unique "
"hostname provided by DHCP and DNS, or the terminal hardware comes with a "
"unique serial number stored in its SMBios memory.  Otherwise there is a risk "
"of terminal minion ID duplicity, and bootstrapping the minion will fail."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:30
msgid ""
"The following parameters (`MINION_ID_PREFIX`, `salt_device`, `root`) are "
"usually autoconfigured and should be used only in specific conditions such "
"as debugging or development:"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:31
#, no-wrap
msgid "[systemitem]``MINION_ID_PREFIX``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:32
msgid "Branch ID set in the Branch Network formula form."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:33
#, no-wrap
msgid "[systemitem]``salt_device``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:34
msgid "Device that contains the Salt configuration."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-pxe.adoc:35
#, no-wrap
msgid "[systemitem]``root``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-pxe.adoc:36
msgid ""
"Device that contains the already deployed root file system.  Used for "
"falling back to local boot."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-saltboot.adoc:1
#, no-wrap
msgid "Saltboot Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:2
msgid ""
"The Saltboot formula is used to configure disk images and partitioning for "
"the selected hardware type."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-saltboot.adoc:3
msgid ""
"The Saltboot formula is meant to be used as a group formula.  Enable and "
"configure Saltboot formula for hardware type groups."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-saltboot.adoc:4
msgid ""
"To apply changes to a terminal, terminal needs to be restarted. Applying "
"highstate does not have any effect on running terminals."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-saltboot.adoc:5
#, no-wrap
msgid "Procedure: Configuring the Hardware Type Group with Saltboot"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:6
msgid ""
"Open the details page for your new hardware type group, and navigate to the "
"[guimenu]``Formulas`` tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:7
msgid "Select the Saltboot formula and click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:8
msgid "Navigate to the menu:Formulas[Saltboot] tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:9
msgid "In the [guimenu]``Disk 1`` section, set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:10
msgid ""
"In the [guimenu]``Disk symbolic ID`` field, enter a custom name for the disk "
"(for example, [systemitem]``disk1``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:11
msgid "In the [guimenu]``Device type`` field, select [systemitem]``DISK``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:12
msgid ""
"In the [guimenu]``Disk device`` field, select the device that corresponds to "
"the device name on the target machine or asterisk [systemitem]``*``, see "
"xref:saltboot-formula-disk-selection[]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:13
msgid "In the [guimenu]``RAID level`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:14
msgid "In the [guimenu]``Disk Label`` field, select [systemitem]``gpt``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:15
msgid ""
"In the [guimenu]``Partition`` section, set these parameters for "
"[guimenu]``Partition 1``:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:16
msgid ""
"In the [guimenu]``Partition symbolic ID`` field, enter a custom name for the "
"partition (for example, [systemitem]``p1``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:17
msgid "In the [guimenu]``Partition size`` use value 500."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:18
msgid "In the [guimenu]``Device mount point`` use [path]``/boot/efi``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:19
msgid "In the [guimenu]``Filesystem format`` use [systemitem]``vfat``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:20
#: modules/salt/pages/formula-saltboot.adoc:28
#: modules/salt/pages/formula-saltboot.adoc:36
msgid "In the [guimenu]``OS Image to deploy`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:21
msgid "In the [guimenu]``Partition encryption password`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:22
msgid "In the [guimenu]``Partition flags`` use [systemitem]``boot``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:23
msgid ""
"In the [guimenu]``Partition`` section, set these parameters for "
"[guimenu]``Partition 2``:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:24
msgid ""
"In the [guimenu]``Partition symbolic ID`` field, enter a custom name for the "
"partition (for example, [systemitem]``p2``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:25
#: modules/salt/pages/formula-saltboot.adoc:33
msgid ""
"In the [guimenu]``Partition size`` field, specify a size for the partition "
"in Mebibytes (MiB)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:26
msgid ""
"In the [guimenu]``Device mount point`` field, select a location to mount the "
"partition (for example, [path]``/data``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:27
msgid ""
"In the [guimenu]``Filesystem format`` field, select your preferred format "
"(for example, [systemitem]``xfs``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:29
#: modules/salt/pages/formula-saltboot.adoc:37
#: modules/salt/pages/formula-saltboot.adoc:48
msgid ""
"In the [guimenu]``Partition encryption password`` field, enter a password if "
"you want to encrypt the partition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:30
#: modules/salt/pages/formula-saltboot.adoc:49
msgid "In the [guimenu]``Partition flags`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:31
msgid ""
"In the [guimenu]``Partition`` section, set these parameters for "
"[guimenu]``Partition 3``:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:32
msgid ""
"In the [guimenu]``Partition symbolic ID`` field, enter a custom name for the "
"partition (for example, [systemitem]``p3``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:34
msgid "In the [guimenu]``Device mount point`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:35
msgid "In the [guimenu]``Filesystem format`` field, select [systemitem]``swap``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:38
msgid "In the [guimenu]``Partition flags`` field, select [systemitem]``swap``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:39
msgid ""
"In the [guimenu]``Partition`` section, set these parameters for "
"[guimenu]``Partition 4``:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:40
msgid ""
"In the [guimenu]``Partition symbolic ID`` field, enter a custom name for the "
"partition (for example, [systemitem]``p4``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:41
msgid "In the [guimenu]``Partition size`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:42
msgid "This will ensure the partition uses up all remaining space."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:43
msgid "In the [guimenu]``Device mount point`` field, select [systemitem]``/``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:44
msgid "In the [guimenu]``Filesystem format`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:45
msgid ""
"In the [guimenu]``OS Image to deploy`` field, enter the name of the image to "
"deploy."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:46
msgid "In the [guimenu]``Image version`` field, leave it empty."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:47
msgid "This will ensure you use the latest available version."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formula-saltboot.adoc:51
#, no-wrap
msgid "Special Partition Types"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:52
msgid "The Saltboot formula helps you with setting up special partition types."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-saltboot.adoc:53
msgid ""
"For terminal to be able to boot locally, either [systemitem]``BIOS grub`` or "
"[systemitem]``EFI`` partition must be configured."
msgstr ""

#. type: Title ===
#: modules/salt/pages/formula-saltboot.adoc:54
#, no-wrap
msgid "BIOS grub Partition"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:55
msgid ""
"A BIOS grub partition is needed for local booting from a `GPT` disk on "
"non-EFI machines.  For more information, see "
"https://en.wikipedia.org/wiki/BIOS_boot_partition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:56
#: modules/salt/pages/formula-saltboot.adoc:61
msgid "In the formula, enter the following options:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-saltboot.adoc:57
#, no-wrap
msgid ""
"Partition Symbolic ID: p1\n"
"Partition Size (MiB): 50\n"
"Partition Flags: bios_grub\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:58
#: modules/salt/pages/formula-saltboot.adoc:63
msgid "Leave the other fields empty."
msgstr ""

#. type: Title ===
#: modules/salt/pages/formula-saltboot.adoc:59
#, no-wrap
msgid "EFI Partition"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:60
msgid ""
"An EFI partition is needed for local booting on EFI machines, "
"[guimenu]``Partition Table Type`` must be `GPT`.  For more information, see "
"https://en.wikipedia.org/wiki/EFI_system_partition."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-saltboot.adoc:62
#, no-wrap
msgid ""
"Partition Symbolic ID: p1\n"
"Partition Size (MiB): 500\n"
"Device Mount Point: /boot/efi\n"
"Filesystem Format: vfat\n"
"Partition Flags: boot\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/formula-saltboot.adoc:64
#, no-wrap
msgid "Disk Selection in Saltboot Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:65
msgid ""
"When there is only one disk present on target hardware (including USB "
"drives), use an asterisk [systemitem]``*`` to automatically select the disk "
"device."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:66
msgid ""
"When there are multiple disks, use an asterisk [systemitem]``*`` in the "
"device path.  In this example, SATA disks are differentiated from USB disks:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-saltboot.adoc:67
#, no-wrap
msgid ""
"/dev/disk/by-path/*-ata-1\n"
"/dev/disk/by-path/*usb*\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:68
msgid ""
"If the entered value does not contain [systemitem]``/``, the entered value "
"is automatically prepended by [path]``/dev/disk/by-path/``.  For example, "
"[systemitem]``\\*usb*`` is the same as [path]``/dev/disk/by-path/\\*usb*``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:69
msgid ""
"If you prefer to select specific devices, you can this format in the disk "
"device field:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:70
msgid "symbolic names (for example: [path]``/dev/sda``)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:71
msgid "by-path (for example: [path]``/dev/disk/by-path/..``)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:72
msgid "by-id (for example: [path]``/dev/disk/by-id/...``)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:73
msgid ""
"To see a list of available devices from the command prompt, press kbd:[Esc] "
"while waiting for key approval."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formula-saltboot.adoc:74
#, no-wrap
msgid "Troubleshooting the Saltboot Formula"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-saltboot.adoc:75
#, no-wrap
msgid "``msdos`` Disklabel Limitations"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:76
msgid ""
"On the ``msdos`` disk label, you can create a maximum of four primary "
"partitions.  Extended partitions are not supported.  If you need more than "
"four partitions, use the ``GPT`` disk label instead."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-saltboot.adoc:77
msgid ""
"For more information on troubleshooting problems with the Saltboot formula, "
"see xref:administration:tshoot-saltboot.adoc[]."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-tftpd.adoc:1
#, no-wrap
msgid "TFTPD Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-tftpd.adoc:2
msgid ""
"The TFTPD formula is used to configure the TFTP service on the {productname} "
"{smr} branch server."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-tftpd.adoc:3
#, no-wrap
msgid "Procedure: Configuring TFTP"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-tftpd.adoc:5
msgid "Select the [systemitem]``Tftpd`` formula, and click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-tftpd.adoc:6
msgid "Navigate to the menu:Formulas[Tftpd] tab, and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-tftpd.adoc:7
msgid ""
"In the [guimenu]``Internal Network Address`` field, enter the IP address of "
"the branch server (for example: [systemitem]``192.168.1.5``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-tftpd.adoc:8
msgid ""
"In the [guimenu]``TFTP Base Directory`` field, enter the path to the "
"saltboot directory (for example, [systemitem]``/srv/saltboot``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-tftpd.adoc:9
msgid ""
"In the [guimenu]``Run TFTP Under User`` field, enter "
"[systemitem]``saltboot``."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-vsftpd.adoc:1
#, no-wrap
msgid "VsFTPd Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-vsftpd.adoc:2
msgid ""
"The VsFTPd formula is used to configure the FTP service on the branch "
"server."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-vsftpd.adoc:3
#, no-wrap
msgid "Procedure: Configuring VsFTPd"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-vsftpd.adoc:5
msgid "Select the [systemitem]``Vsftpd`` formula, and click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-vsftpd.adoc:6
msgid "Navigate to the menu:Formulas[Vsftpd] tab, and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-vsftpd.adoc:7
msgid ""
"In the [guimenu]``FTP server directory`` field, enter "
"[systemitem]``/srv/saltboot``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-vsftpd.adoc:8
msgid ""
"In the [guimenu]``Internal Network Address`` field, enter the IP address of "
"the branch server (for example: [literal]``192.168.1.5``)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-vsftpd.adoc:9
msgid "All other fields can retain their default values."
msgstr ""

#. type: Title =
#: modules/salt/pages/formula-yomi.adoc:1
#, no-wrap
msgid "Yomi Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:2
msgid ""
"The Yomi (yet one more installer) installer for {suse} and openSUSE "
"operating systems is configured using formulas with forms."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:3
msgid "The ``yomi-formula`` package provides these formulas:"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-yomi.adoc:4 modules/salt/pages/yomi.adoc:62
#, no-wrap
msgid "Yomi"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-yomi.adoc:5 modules/salt/pages/yomi.adoc:65
#, no-wrap
msgid "Yomi Storage"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-yomi.adoc:6 modules/salt/pages/yomi.adoc:93
#, no-wrap
msgid "Yomi Bootloader"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-yomi.adoc:7 modules/salt/pages/yomi.adoc:99
#, no-wrap
msgid "Yomi Software"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-yomi.adoc:8 modules/salt/pages/yomi.adoc:110
#, no-wrap
msgid "Yomi Services"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formula-yomi.adoc:9 modules/salt/pages/yomi.adoc:115
#, no-wrap
msgid "Yomi Users"
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:10
#, no-wrap
msgid "Procedure: Install the Yomi Formulas with Forms"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:11 modules/salt/pages/yomi.adoc:25
msgid ""
"On the {productname} Server, at the command prompt, as root, install the "
"``yomi-formula`` package:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-yomi.adoc:12 modules/salt/pages/yomi.adoc:26
#, no-wrap
msgid "zypper in yomi-formula\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:13 modules/salt/pages/yomi.adoc:27
msgid "Restart services:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formula-yomi.adoc:14 modules/salt/pages/yomi.adoc:28
#, no-wrap
msgid "systemctl restart salt-master.service\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:15
msgid ""
"When the formula package is installed, you need to install the PXE Yomi "
"image on the client, boot the client you want to provision, and enable the "
"Yomi formulas on the client.  For more information on preparing Yomi clients "
"for provisioning, see xref:salt:yomi.adoc[]."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:16
#, no-wrap
msgid "Procedure: Configuring the Yomi Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:17
msgid ""
"Navigate to the menu:Formulas[Yomi] tab, and set these parameters in the "
"[guimenu]``General Configuration`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:18
msgid "Check the [guimenu]``Events`` box to allow monitoring."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:19
msgid ""
"In the [guimenu]``Reboot`` field, select ``yes`` to instruct the client to "
"reboot after installation."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:20
msgid ""
"Check the [guimenu]``Snapper`` box if you are using the btrfs file system on "
"the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:21
msgid ""
"In the [guimenu]``Locale`` field, select the region and encoding for systemd "
"to use on the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:22
msgid "For example: ``en_US.utf8`` for US English and UTF-8."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:23
msgid "In the [guimenu]``Keymap`` field, select the appropriate keyboard layout."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:24
msgid "For example: ``us`` for a US keyboard layout."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:25
msgid ""
"In the [guimenu]``Timezone`` field, select the timezone for the client to "
"use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:26
msgid "For example: [guimenu]``America/New_York`` for EST."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:27
msgid ""
"In the [guimenu]``Hostname`` field, enter the hostname for the client to "
"use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:28
msgid "Leave this blank if you are using DHCP to provide the hostname."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:29
msgid ""
"In the [guimenu]``Machine Id`` field, enter a machine identification number "
"for the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:30
msgid "Leave this blank to have systemd generate one automatically."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:31
msgid "In the [guimenu]``Target`` field, enter a systemd target unit."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:33
#, no-wrap
msgid "Procedure: Configuring the Yomi Storage Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:34
msgid ""
"Navigate to the menu:Formulas[Yomi Storage] tab, and set these parameters in "
"the menu:Partitions[Config] section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:35
msgid ""
"In the [guimenu]``Labels`` field, select the default partition table type to "
"use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:36
msgid ""
"In the [guimenu]``Initial Gap`` field, select the default amount of space to "
"leave before the first partition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:37
msgid ""
"For example: ``1{nbsp}MB``, or use ``0`` to leave no space between "
"partitions."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:38
msgid ""
"For each device that you want to configure, in the menu:Partitions[Devices] "
"section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:39
msgid "In the [guimenu]``Device`` field, type the mount point for the device."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:40
#: modules/salt/pages/formula-yomi.adoc:61
msgid "For example, ``/dev/sda``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:41
msgid ""
"In the [guimenu]``Label`` field, select the partition table type to use, if "
"it is different from the default label you selected."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:42
msgid ""
"In the [guimenu]``Initial Gap`` field, select the amount of space to leave "
"before the first partition, if it is different from the default space you "
"specified."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:43
msgid ""
"For each partition that you want to create, in the menu:Partitions[Devices > "
"Partitions] section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:44
msgid ""
"In the [guimenu]``Partition Number`` field, enter a number for the "
"partition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:45
msgid ""
"The number you enter here is appended to the device name to identify the "
"partition.  For example, partition number ``1`` on device ``/dev/sda`` can "
"be identified as ``/dev/sda1``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:46
msgid "In the [guimenu]``Partition Name`` field, enter a name for the partition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:47
msgid ""
"Leave this blank if you have entered a partition number in the previous "
"field."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:48
msgid "In the [guimenu]``Partition Size`` field, enter a size for the partition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:49
msgid ""
"For example: ``500{nbsp}MB``.  Use ``rest`` to use all the remaining free "
"space."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:50
msgid ""
"For each file system that you want to create, in the "
"[guimenu]``Filesystems`` section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:51
msgid ""
"In the [guimenu]``Partition`` field, select the partition to create the file "
"system on."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:52
msgid "For example, ``/dev/sda1``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:53
msgid "In the [guimenu]``Filesystem`` field, select the file system type to create."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:54
msgid ""
"In the [guimenu]``Mountpoint`` field, type the mount point for the file "
"system."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:55
msgid "For example: ``/`` for root."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formula-yomi.adoc:57
msgid ""
"If you want to use LVM or RAID on your devices, click btn:[+] in the "
"appropriate sections, and complete the details for your environment."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:58
#, no-wrap
msgid "Procedure: Configuring the Yomi Bootloader Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:59
msgid ""
"Navigate to the menu:Formulas[Yomi Bootloader] tab, and set these parameters "
"in the [guimenu]``Bootloader`` section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:60
msgid "In the [guimenu]``Device`` field, type the path for the bootloader."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:62
msgid ""
"In the [guimenu]``Timeout`` field, select the number of seconds grub will "
"wait before booting the default menu entry."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:63
msgid ""
"In the [guimenu]``Kernel`` field, type any additional kernel parameters you "
"want to use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:64
msgid ""
"Any kernel parameters you add here will be appended to the "
"``GRUB_CMDLINE_LINUX_DEFAULT`` line during boot."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:65
msgid ""
"In the [guimenu]``Terminal`` field, type the terminal to use for both "
"terminal input and output."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:66
msgid ""
"In the [guimenu]``Serial Command`` field, type parameters for using the "
"serial port."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:67
msgid "Use this only if you are using the serial console as the default terminal."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:68
msgid ""
"In the [guimenu]``Gfxmode`` field, type the resolution to use for the "
"graphical terminal."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:69
msgid ""
"Use this only if you are using the graphical console as the default "
"terminal."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:70
msgid "Check the [guimenu]``Theme`` box to use GRUB2 default branding package."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:71
msgid ""
"Check the [guimenu]``Disable OS Prober`` box to disable using the OS prober "
"to discover other installed operating systems."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:73
#, no-wrap
msgid "Procedure: Configuring the Yomi Software Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:74
msgid ""
"Navigate to the menu:Formulas[Yomi Software] tab, and set these parameters "
"in the menu:Software[Configuration] section:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:75
msgid ""
"Check the [guimenu]``Minimal`` box to use a minimal installation, which only "
"installs packages listed as ``Required``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:76
msgid ""
"For each repository that you want to add, in the menu:Software[Repositories] "
"section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:77
msgid "In the [guimenu]``Repository Name`` field, type a name for the repository."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:78
msgid ""
"In the [guimenu]``Repository URL`` field, type the location of the "
"repository."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:79
msgid ""
"To add packages from each repository, in the menu:Software[Packages] "
"section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:80
msgid ""
"In the menu:Software[Packages] field, type the names of the packages to "
"install, or type a pattern to search for the appropriate packages."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:81
#: modules/salt/pages/formula-yomi.adoc:96
msgid "For example, ``pattern:enhanced_base glibc-locale``, or ``kernel-default``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:82
msgid "In the menu:Software[Image] section, set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:83
msgid ""
"In the [guimenu]``Image URL`` field, type the location of the operating "
"system ISO image to use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:84
msgid "In the [guimenu]``Md5`` field, type the MD5 hash to use to verify the ISO."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:85
msgid "In the menu:SUSEConect[Config] section, set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:86
msgid ""
"In the [guimenu]``Registration Code`` field, type the registration code for "
"the client you are installing."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:87
msgid "You can obtain this code from {scc}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:88
msgid ""
"In the [guimenu]``Email`` field, type the administrator email address to "
"use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:89
msgid ""
"In the [guimenu]``Url`` field, type the address of the registration server "
"to use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:90
msgid "For example, use ``https://scc.suse.com``, to register with {scc}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:91
msgid ""
"In the [guimenu]``Version`` field, type the version of the product you are "
"registering."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:92
msgid ""
"For each product that you want to register, in the "
"menu:SUSEConnect[Products] section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:93
msgid "In the [guimenu]``Product`` field, type each product you want to register."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:94
msgid ""
"For example, ``<product_name>/1.1/x86``, for version 1.1 with {x86} "
"architecture."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:95
msgid ""
"In the menu:SUSEConnect[Packages] field, type the names of the packages to "
"install, or type a pattern to search for the appropriate packages."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:98
#, no-wrap
msgid "Procedure: Configuring the Yomi Services Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:99
msgid "Navigate to the menu:Formulas[Yomi Services] tab, and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:100
msgid ""
"Check the [guimenu]``Install salt-minion`` box to install and configure the "
"client as a Salt client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:101
msgid ""
"For each service you want to enable, in the menu:Services[Enabled] section, "
"click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:102
msgid "In the [guimenu]``Service`` field, type the name of the service to enable."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:103
msgid "For example, ``salt-minion``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:104
msgid ""
"For each service you want to disable, in the menu:Services[Disabled] "
"section, click btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:105
msgid "In the [guimenu]``Service`` field, type the name of the service to disable."
msgstr ""

#. type: Block title
#: modules/salt/pages/formula-yomi.adoc:107
#, no-wrap
msgid "Procedure: Configuring the Yomi Users Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:108
msgid "Navigate to the menu:Formulas[Yomi Users] tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:109
msgid ""
"For each user you want to create, in the [guimenu]``Users`` section, click "
"btn:[+], and set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:110
msgid "In the [guimenu]``Username`` field, type the name of the new user."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:111
msgid ""
"In the [guimenu]``Password Hash`` field, type the hashed version of the "
"password to use."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:112
msgid ""
"To add a certificate for each user, in the menu:Users[Certificates] section, "
"click btn:[+], and add the certificate to the [guimenu]``Certificate`` "
"field."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formula-yomi.adoc:115
msgid "For more information about using Yomi, see xref:salt:yomi.adoc[]."
msgstr ""

#. type: Title =
#: modules/salt/pages/formulas-custom.adoc:1
#, no-wrap
msgid "Custom Salt Formulas"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:2
msgid ""
"You can also write your own custom formulas, and make them available to your "
"clients in the {productname} {webui}.  This section contains information "
"about writing custom formulas, including formulas with forms."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:3
msgid ""
"For information about the formulas provided by {productname}, see "
"xref:salt:formulas-suma.adoc[]."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-custom.adoc:4
#, no-wrap
msgid "File Structure Overview"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:5
msgid ""
"RPM-based formulas must be placed in a specific directory structure to "
"ensure that they work correctly.  A formula contains two separate "
"directories: [path]``states``, and [path]``metadata``.  Folders in these "
"directories need to have exactly matching names."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:6
msgid ""
"The formula states directory contains anything necessary for a Salt state to "
"work independently.  This includes [path]``.sls`` files, a "
"[path]``map.jinja`` file and any other required files.  This directory "
"should only be modified by RPMs and should not be edited manually.  For "
"example, the [package]``locale-formula`` states directory is located in:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:7
#, no-wrap
msgid "/usr/share/salt-formulas/states/locale/\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:8
msgid ""
"To create formulas with forms, the metadata directory contains a "
"[path]``form.yml`` file.  The [path]``form.yml`` file defines the forms for "
"{productname}.  The metadata directoy also contains an optional "
"[path]``metadata.yml`` file that contains additional information about a "
"formula.  For example, the [package]``locale-formula`` metadata directory is "
"located in:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:9
#, no-wrap
msgid "/usr/share/susemanager/formulas/metadata/locale/\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:10
msgid ""
"If you have a custom formula that is not in an RPM, it must be in a state "
"directory configured as a Salt file root.  Custom state formula data must be "
"in:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:11
#, no-wrap
msgid "/srv/salt/<custom-formula-name>/\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:12
msgid "Custom metadata information must be in:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:13
#, no-wrap
msgid "/srv/formula_metadata/<custom-formula-name>/\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:14
msgid ""
"All custom folders must contain a [path]``form.yml`` file.  These files are "
"detected as form recipes and are applied to groups and systems from the "
"{webui}:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:15
#, no-wrap
msgid "/srv/formula_metadata/<custom-formula-name>/form.yml\n"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formulas-custom.adoc:16
msgid ""
"The Salt formula directory changed in {productname}{nbsp}4.0.  The old "
"directory location, [path]``/usr/share/susemanager/formulas``, will continue "
"to work for some time.  You should ensure that you update to the new "
"directory location, [path]``/usr/share/salt-formulas/`` as soon as possible."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-custom.adoc:17
#, no-wrap
msgid "Define Formula with Forms Data"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:18
msgid ""
"{productname} requires a file called [path]``form.yml``, to describe how "
"formula data should look within the {webui}.  The [path]``form.yml`` file is "
"used by {productname} to generate the desired formula with forms, with "
"values editable by a user."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:19
msgid ""
"The file contains a list of editable attributes that start with a `$` sign.  "
"These attributes are used to determine how to display the formula in the "
"{productname} {webui}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:20
msgid ""
"For example, the [path]``form.yml`` that is included with the "
"[package]``locale-formula`` is in:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:21
#, no-wrap
msgid "/usr/share/susemanager/formulas/metadata/locale/form.yml\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:22
msgid "Part of that file looks like this:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:23
#, no-wrap
msgid ""
"timezone:\n"
"  $type: group\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:24
#, no-wrap
msgid ""
"  name:\n"
"    $type: select\n"
"    $values: [\"CET\",\n"
"              \"Etc/Zulu\"\n"
"              ]\n"
"    $default: CET\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:25
#, no-wrap
msgid ""
"  hardware_clock_set_to_utc:\n"
"    $type: boolean\n"
"    $default: True\n"
"...\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:26
msgid ""
"All values that start with a `$` sign are annotations used to display the UI "
"that users interact with.  These annotations are not part of pillar data "
"itself and are handled as metadata."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:27
msgid "This section lists the available attributes:"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:28
#, no-wrap
msgid "$type"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:29
msgid ""
"The most important attribute is the `$type` attribute.  It defines the type "
"of the pillar value and the form-field that is generated.  The supported "
"types are:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:30
msgid "`text`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:31
#: modules/salt/pages/salt-ssh.adoc:77
msgid "`password`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:32
msgid "`number`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:33
msgid "`url`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:34
msgid "`email`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:35
msgid "`date`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:36
msgid "`time`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:37
msgid "`datetime`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:38
msgid "`boolean`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:39
msgid "`color`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:40
msgid "`select`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:41
msgid "`group`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:42
msgid "`edit-group`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:43
msgid "`namespace`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:44
msgid "`hidden-group` (obsolete, renamed to ``namespace``)"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formulas-custom.adoc:45
msgid ""
"The text attribute is the default and does not need to be specified "
"explicitly."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:46
msgid "Many of these values are self-explanatory:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:47
msgid "The `text` type generates a simple text field"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:48
msgid "The `password` type generates a password field"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:49
msgid "The `color` type generates a color picker"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:50
msgid ""
"The ``group``, ``edit-group``, and `namespace` (formerly ``hidden-group``) "
"types do not generate an editable field and are used to structure form and "
"pillar data.  All these types support nesting."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:51
msgid ""
"The `group` and `namespace` types differ slightly.  The `group` type "
"generates a visible border with a heading.  The `namespace` type shows "
"nothing visually, and is only used to structure pillar data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:52
msgid ""
"The `edit-group` type allows you to structure and restrict editable fields "
"in a more flexible way.  The `edit-group` type is a collection of items of "
"the same kind.  Collections can have these four shapes:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:53
msgid "List of primitive items"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:54
msgid "List of dictionaries"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:55
msgid "Dictionary of primitive items"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:56
msgid "Dictionary of dictionaries"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:57
msgid "The size of each collection is variable.  Users can add or remove elements."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:58
msgid ""
"For example, `edit-group` supports the `$minItems` and `$maxItems` "
"attributes, which simplifies complex and repeatable input structures.  "
"These, and also `itemName`, are optional."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:59
#, no-wrap
msgid "$default"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:60
msgid ""
"Allows you to specify a default value to be displayed.  This default value "
"will be used if no other value is entered.  In an `edit-group` it allows you "
"to create initial members of the group and populate them with specified "
"data."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:61
#, no-wrap
msgid "$optional"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:62
msgid ""
"This type is a Boolean attribute.  If it is `true` and the field is empty in "
"the form, then this field will not be generated in the formula data and the "
"generated dictionary will not contain the field name key.  If it is `false` "
"and the field is empty, the formula data will contain a `<field name>: null` "
"entry."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:63
#, no-wrap
msgid "$ifEmpty"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:64
msgid ""
"This type is used if the field is empty.  This usually occurs because the "
"user did not provide a value.  The `ifEmpty` type can only be used when "
"`$optional` is `false` or not defined.  If `$optional` is `true`, then "
"`$ifEmpty` is ignored.  In this example, the `DP2` string would be used if "
"the user leaves the field empty:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:65
#, no-wrap
msgid ""
"displayName:\n"
"  $type: string\n"
"  $ifEmpty: DP2\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:66
#, no-wrap
msgid "$name"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:67
msgid ""
"Allows you to specify the name of a value that is shown in the form.  If "
"this value is not set, the pillar name is used and capitalized without "
"underscores and dashes.  Reference it in the same section with "
"``pass:c[${name}]``."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:68
#, no-wrap
msgid "$help and $placeholder"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:69
msgid ""
"These attributes are used to give a user a better understanding of what the "
"value should be.  The `$help` type defines the message a user sees when "
"hovering over a field The `$placeholder` type displays a gray placeholder "
"text in the field"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:70
msgid ""
"Use `$placeholder` only with text fields like text, password, email or date "
"fields.  Do not add a placeholder if you also use `$default`, as it will "
"hide the placeholder."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:71
#, no-wrap
msgid "$key"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:72
msgid ""
"Applicable only if the `edit-group` has the shape of a dictionary.  When the "
"pillar data is a dictionary, the `$key` attribute determines the key of an "
"entry in the dictionary."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:73
#: modules/salt/pages/salt-states.adoc:6 modules/salt/pages/salt-states.adoc:52
msgid "For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:74
#, no-wrap
msgid ""
"user_passwords:\n"
"  $type: edit-group\n"
"  $minItems: 1\n"
"  $prototype:\n"
"    $key:\n"
"        $type: text\n"
"    $type: text\n"
"  $default:\n"
"    alice: secret-password\n"
"    bob: you-shall-not-pass\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:75
msgid "Pillar:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:76
#, no-wrap
msgid ""
"user_passwords:\n"
"  alice:\n"
"    secret-password\n"
"  bob:\n"
"    you-shall-not-pass\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:77
#, no-wrap
msgid "$minItems and $maxItems"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:78
msgid ""
"In an ``edit-group``, `$minItems` and `$maxItems` specifies the lowest and "
"highest numbers for the group."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:79
#, no-wrap
msgid "$itemName"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:80
msgid ""
"In an ``edit-group``, `$itemName` defines a template for the name to be used "
"for the members of the group."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:81
#, no-wrap
msgid "$prototype"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:82
msgid ""
"In an ``edit-group``, `$prototype` is mandatory and defines the default "
"pre-filled values for newly added members in the group."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:83
#, no-wrap
msgid "$scope"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:84
msgid ""
"Specifies a hierarchy level at which a value may be edited.  Possible values "
"are ``system``, `group`, and ``readonly``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:85
msgid ""
"The default value is `$scope: system`, allows values to be edited at group "
"and system levels.  A value can be entered for each system but if no value "
"is entered the system will fall back to the group default."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:86
msgid ""
"The ``$scope: group`` option makes a value editable only for a group.  On "
"the system level you will be able to see the value, but not edit it."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:87
msgid ""
"The `$scope: readonly` option makes a field read-only.  It can be used to "
"show data to the user, but will not allow them to edit it.  This option "
"should be used in combination with the ``$default`` attribute."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:88
#, no-wrap
msgid "$visibleIf"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formulas-custom.adoc:89
msgid "Deprecated in favor of `$visible`."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:90
msgid ""
"Allows you to show a field or group if a simple condition is met.  An "
"example condition is:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:91
#, no-wrap
msgid "some_group#another_group#my_checkbox == true\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:92
msgid ""
"The left part of the condition is the path to another value, and groups are "
"separated by `$` signs.  The middle section of the condition should be "
"either `==` for a value to be equal or `!=` for values that should be not "
"equal.  The last field in the statement can be any value which a field "
"should have or not have."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:93
msgid ""
"The field with this attribute associated with it will be shown only when the "
"condition is met.  In this example the field will be shown only if "
"`my_checkbox` is checked.  The ability to use conditional statements is not "
"limited to check boxes.  It may also be used to check values of "
"select-fields, text-fields, and similar."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:94
msgid "A check box should be structured like this:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:95
#: modules/salt/pages/formulas-custom.adoc:99
#: modules/salt/pages/formulas-custom.adoc:117
#: modules/salt/pages/formulas-custom.adoc:140
#: modules/salt/pages/formulas-custom.adoc:149
#, no-wrap
msgid ""
"some_group:\n"
"  $type: group\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:96
#: modules/salt/pages/formulas-custom.adoc:100
#: modules/salt/pages/formulas-custom.adoc:118
#: modules/salt/pages/formulas-custom.adoc:141
#: modules/salt/pages/formulas-custom.adoc:150
#, no-wrap
msgid ""
"  another_group:\n"
"    $type: group\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:97
#: modules/salt/pages/formulas-custom.adoc:119
#: modules/salt/pages/formulas-custom.adoc:142
#, no-wrap
msgid ""
"      my_checkbox:\n"
"        $type: boolean\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:98
msgid ""
"Relative paths can be specified using prefix dots.  One dot indicates a "
"sibling, two dots indicate a parent, and so on.  This is mostly useful for "
"``edit-group``."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:101
#: modules/salt/pages/formulas-custom.adoc:151
#, no-wrap
msgid ""
"    my_checkbox:\n"
"      $type: boolean\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:102
#, no-wrap
msgid ""
"    my_text:\n"
"      $visibleIf: .my_checkbox\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:103
#: modules/salt/pages/formulas-custom.adoc:153
#, no-wrap
msgid ""
"  yet_another_group:\n"
"    $type: group\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:104
#, no-wrap
msgid ""
"    my_text2:\n"
"      $visibleIf: ..another_group#my_checkbox\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:105
msgid ""
"If you use multiple groups with the attribute, you can allow a users to "
"select an option and show a completely different form, dependent upon the "
"selected value."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:106
#: modules/salt/pages/formulas-custom.adoc:124
msgid ""
"Values from hidden fields can be merged into the pillar data and sent to the "
"client.  A formula must check the condition again and use the appropriate "
"data.  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:107
#, no-wrap
msgid ""
"show_option:\n"
"  $type: checkbox\n"
"some_text:\n"
"  $visibleIf: show_option == true\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:108
#: modules/salt/pages/formulas-custom.adoc:126
#, no-wrap
msgid ""
"{% if pillar.show_option %}\n"
"do_something:\n"
"  with: {{ pillar.some_text }}\n"
"{% endif %}\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:109
#, no-wrap
msgid "$values"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:110
msgid ""
"Can only be used together with ``$type`` Use to specify the different "
"options in the select-field.  `$values` must be a list of possible values to "
"select.  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:111
#, no-wrap
msgid ""
"select_something:\n"
"  $type: select\n"
"  $values: [\"option1\", \"option2\"]\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:112
msgid "Or:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:113
#, no-wrap
msgid ""
"select_something:\n"
"  $type: select\n"
"  $values:\n"
"    - option1\n"
"    - option2\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:114
#, no-wrap
msgid "$visible"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:115
msgid ""
"Allows you to show a field or group if a condition is met.  You must use the "
"https://github.com/TomFrost/jexl[jexl] expression language to write the "
"condition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:116
msgid "Example structure:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:120
#: modules/salt/pages/formulas-custom.adoc:143
msgid "An example condition is:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:121
#: modules/salt/pages/formulas-custom.adoc:144
#, no-wrap
msgid "formValues.some_group.another_group.my_checkbox == true\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:122
msgid ""
"The field with this attribute will only show if the condition is met.  In "
"this example, the field will show only if ``my_checkbox`` is checked.  You "
"can also choose other elements for the conditional statement, such as select "
"fields or text fields."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:123
msgid ""
"If you use multiple groups with the attribute, users can select an option "
"that will show a completely different form, depending on the selected value."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:125
#, no-wrap
msgid ""
"show_option:\n"
"  $type: checkbox\n"
"some_text:\n"
"  $visible: this.parent.value.show_option == true\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:127
#, no-wrap
msgid "$disabled"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:128
msgid ""
"Allows you to disable a field or group if a condition is met. You must use "
"the https://github.com/TomFrost/jexl[jexl] expression language to write the "
"condition."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:129
msgid "If specified at group level it will disable all fields in that group."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:130
#, no-wrap
msgid "$required"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:131
msgid ""
"Fields with this attribute are mandatory. Supports using the "
"https://github.com/TomFrost/jexl[jexl] expresion language."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-custom.adoc:132
#, no-wrap
msgid "$match"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:133
msgid "Allows using a regular expression to validate the content of a text field."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:134
msgid "It supports the regular expression features existing in JavaScript."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:135
#: modules/salt/pages/salt-gitfs.adoc:10 modules/salt/pages/salt-gitfs.adoc:14
#: modules/salt/pages/salt-gitfs.adoc:18
msgid "Example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:136
#, no-wrap
msgid ""
"      hardware:\n"
"        $type: text\n"
"        $name: Hardware Type and Address\n"
"        $placeholder: Enter hardware-type hardware-address (for example, "
"\"ethernet AA:BB:CC:DD:EE:FF\")\n"
"        $help: Hardware Identifier - prefix is mandatory\n"
"        $match: \"\\\\w+ "
"[A-Z]{2}:[A-Z]{2}:[A-Z]{2}:[A-Z]{2}:[A-Z]{2}:[A-Z]{2}\"\n"
msgstr ""

#. type: Title ===
#: modules/salt/pages/formulas-custom.adoc:137
#, no-wrap
msgid "Expression language"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:138
msgid ""
"You must use the https://github.com/TomFrost/jexl[jexl] expression language "
"to write conditions."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:139
msgid "Given a structure like this:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:145
msgid "Absolute paths must begin with ``formValues``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:146
msgid ""
"Specify relative paths using ``this.parent.value`` to define the value of "
"the parent."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:147
msgid ""
"You can also refer to the parent of the parent, with "
"``this.parent.parent.value``.  This is mostly useful for ``edit-group`` "
"elements."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:148
msgid "Example for relative paths:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:152
#, no-wrap
msgid ""
"    my_text:\n"
"      $visible: this.parent.value.my_checkbox\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:154
#, no-wrap
msgid ""
"    my_text2:\n"
"      $visible: this.parent.parent.value.another_group.my_checkbox\n"
msgstr ""

#. type: Block title
#: modules/salt/pages/formulas-custom.adoc:155
#, no-wrap
msgid "Example: Basic edit-group"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:156
#, no-wrap
msgid ""
"partitions:\n"
"  $name: \"Hard Disk Partitions\"\n"
"  $type: \"edit-group\"\n"
"  $minItems: 1\n"
"  $maxItems: 4\n"
"  $itemName: \"Partition ${name}\"\n"
"  $prototype:\n"
"    name:\n"
"      $default: \"New partition\"\n"
"    mountpoint:\n"
"      $default: \"/var\"\n"
"    size:\n"
"      $type: \"number\"\n"
"      $name: \"Size in GB\"\n"
"  $default:\n"
"    - name: \"Boot\"\n"
"      mountpoint: \"/boot\"\n"
"    - name: \"Root\"\n"
"      mountpoint: \"/\"\n"
"      size: 5000\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:157
msgid "Click btn:[Add] to fill the form with the default values."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:158
msgid ""
"The formula is called [path]``hd-partitions`` and will appear as "
"[guimenu]``Hd Partitions`` in the {webui}."
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/formulas-custom.adoc:159
#, no-wrap
msgid "formula-custom-harddisk-partitions.png"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:160
msgid ""
"To remove the definition of a partition click the minus symbol in the title "
"line of an inner group."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:161
msgid "When you are finished, click btn:[Save Formula]."
msgstr ""

#. type: Block title
#: modules/salt/pages/formulas-custom.adoc:162
#, no-wrap
msgid "Example: Nested edit-group"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:163
#, no-wrap
msgid ""
"users:\n"
"  $name: \"Users\"\n"
"  $type: edit-group\n"
"  $minItems: 2\n"
"  $maxItems: 5\n"
"  $prototype:\n"
"    name:\n"
"      $default: \"username\"\n"
"    password:\n"
"      $type: password\n"
"    groups:\n"
"      $type: edit-group\n"
"      $minItems: 1\n"
"      $prototype:\n"
"        group_name:\n"
"          $type: text\n"
"  $default:\n"
"    - name: \"root\"\n"
"      groups:\n"
"        - group_name: \"users\"\n"
"        - group_name: \"admins\"\n"
"    - name: \"admin\"\n"
"      groups:\n"
"        - group_name: \"users\"\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-custom.adoc:164
#, no-wrap
msgid "Writing Salt Formulas"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:165
msgid ""
"Salt formulas are pre-written Salt states.  You can use Jinja to configure "
"formulas with pillar data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:166
msgid "Basic Jinja syntax is:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:167
#, no-wrap
msgid "pillar.some.value\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:168
msgid "When you are sure a pillar exists, use this syntax:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:169
#, no-wrap
msgid "salt['pillar.get']('some:value', 'default value')\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:170
msgid ""
"You can also replace the `pillar` value with `grains`.  For example, "
"``grains.some.value``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:171
msgid ""
"Using data this way makes the formula configurable.  In this example, a "
"specified package is installed in the ``package_name`` pillar:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:172
#, no-wrap
msgid ""
"install_a_package:\n"
"  pkg.installed:\n"
"    - name: {{ pillar.package_name }}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:173
msgid ""
"You can also use more complex constructs such as `if/else` and `for-loops` "
"to provide greater functionality:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:174
#, no-wrap
msgid ""
"{% if pillar.installSomething %}\n"
"something:\n"
"  pkg.installed\n"
"{% else %}\n"
"anotherPackage:\n"
"  pkg.installed\n"
"{% endif %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:175
msgid "Another example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:176
#, no-wrap
msgid ""
"{% for service in pillar.services %}\n"
"start_{{ service }}:\n"
"  service.running:\n"
"    - name: {{ service }}\n"
"{% endfor %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:177
msgid ""
"Jinja also provides other helpful functions.  For example, you can iterate "
"over a dictionary:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:178
#, no-wrap
msgid ""
"{% for key, value in some_dictionary.items() %}\n"
"do_something_with_{{ key }}: {{ value }}\n"
"{% endfor %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:179
msgid ""
"You can have Salt manage your files (for example, configuration files for a "
"program), and change them with pillar data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:180
msgid ""
"In this example, Salt copies the file "
"[path]``salt-file_roots/my_state/files/my_program.conf`` on the server to "
"[path]``/etc/my_program/my_program.conf`` on the client and template it with "
"Jinja:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:181
#, no-wrap
msgid ""
"/etc/my_program/my_program.conf:\n"
"  file.managed:\n"
"    - source: salt://my_state/files/my_program.conf\n"
"    - template: jinja\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:182
msgid ""
"This example allows you to use Jinja in the file, like the previous example "
"for states:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:183
#, no-wrap
msgid "some_config_option = {{ pillar.config_option_a }}\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-custom.adoc:184
#, no-wrap
msgid "Separate Data"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:185
msgid ""
"Separating data from a state can increase flexibility and make it easier to "
"re-use.  You can do this by writing values into a separate file named "
"[path]``map.jinja``.  This file must be within the same directory as the "
"state files."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:186
msgid ""
"This example sets `data` to a dictionary with different values, depending on "
"which system the state runs on.  It will also merge data with the pillar "
"using the `some.pillar.data` value so you can access "
"`some.pillar.data.value` by using ``data.value``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:187
msgid ""
"You can choose to override defined values from pillars.  For example, by "
"overriding `some.pillar.data.package` in this example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:188
#, no-wrap
msgid ""
"{% set data = salt['grains.filter_by']({\n"
"    'Suse': {\n"
"        'package': 'packageA',\n"
"        'service': 'serviceA'\n"
"    },\n"
"    'RedHat': {\n"
"        'package': 'package_a',\n"
"        'service': 'service_a'\n"
"    }\n"
"}, merge=salt['pillar.get']('some:pillar:data')) %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:189
msgid ""
"When you have created a map file, you can maintain compatibility with "
"multiple system types while accessing deep pillar data in a simpler way."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:190
msgid "Now you can import and use `data` in any file.  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:191
#, no-wrap
msgid "{% from \"some_folder/map.jinja\" import data with context %}\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:192
#, no-wrap
msgid ""
"install_package_a:\n"
"  pkg.installed:\n"
"    - name: {{ data.package }}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:193
msgid ""
"You can define multiple variables by copying the `{% set ...%}` statement "
"with different values and then merge it with other pillars.  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:194
#, no-wrap
msgid ""
"{% set server = salt['grains.filter_by']({\n"
"    'Suse': {\n"
"        'package': 'my-server-pkg'\n"
"    }\n"
"}, merge=salt['pillar.get']('myFormula:server')) %}\n"
"{% set client = salt['grains.filter_by']({\n"
"    'Suse': {\n"
"        'package': 'my-client-pkg'\n"
"    }\n"
"}, merge=salt['pillar.get']('myFormula:client')) %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:195
msgid "To import multiple variables, separate them with a comma.  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:196
#, no-wrap
msgid "{% from \"map.jinja\" import server, client with context %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:197
msgid ""
"For more information about conventions to use when writing formulas, see "
"https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-custom.adoc:198
#, no-wrap
msgid "Generated Pillar Data"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:199
msgid ""
"Pillar data is generated by {productname} when events occur like generating "
"the highstate.  You can use an external pillar script to generate pillar "
"data for packages and group IDs, and include all pillar data for a system:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:200
#, no-wrap
msgid "/usr/share/susemanager/modules/pillar/suma_minion.py\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:201
msgid "The process is executed like this:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:202
msgid ""
"The `suma_minion.py` script starts and finds all formulas for a system by "
"checking the `group_formulas.json` and `server_formulas.json` files."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:203
msgid ""
"The script loads the values for each formula (groups and from the system) "
"and merges them with the highstate."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:204
msgid ""
"By default, if no values are found, a group overrides a system if `$scope: "
"group`."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:205
msgid ""
"The script also includes a list of formulas applied to the system in a "
"pillar named ``formulas``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:206
msgid ""
"This structure makes it possible to include states.  In this example, the "
"top file is specifically generated by the `mgr_master_tops.py` script.  The "
"top file includes a state called ``formulas`` for each system.  This "
"includes the `formulas.sls` file located in "
"[path]``/usr/share/susemanager/formulas/states`` or "
"[path]``/usr/share/salt-formulas/states/``.  The content looks similar to "
"this:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-custom.adoc:207
#, no-wrap
msgid "include: {{ pillar[\"formulas\"] }}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:208
msgid ""
"This pillar includes all formulas that are specified in the pillar data "
"generated from the external pillar script."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:209
msgid ""
"Formulas should be created directly after {productname} is installed.  If "
"you encounter any problems with formulas check these things first:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:210
msgid "The external pillar script (``suma_minion.py``) must include formula data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:211
msgid ""
"Data is saved to [path]``/srv/susemanager/formula_data`` and the "
"[path]``pillar`` and [path]``group_pillar`` sub-directories."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:212
msgid "These directories should be automatically generated by the server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:213
msgid "Formulas must be included for every client listed in the top file."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-custom.adoc:214
msgid ""
"Currently this process is initiated by the [path]``mgr_master_tops.py`` "
"script which includes the `formulas.sls` file located in "
"[path]``/usr/share/susemanager/formulas/states/`` or "
"[path]``/usr/share/salt-formulas/states/``.  This directory must be a salt "
"file root.  File roots are configured on the salt-master ({productname}) "
"located at [path]``/etc/salt/master.d/susemanager.conf``."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/formulas-intro.adoc:1
#: modules/salt/pages/salt-terminology.adoc:11
#, no-wrap
msgid "Formulas"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-intro.adoc:2
msgid ""
"Formulas are collections of Salt States that contain generic parameter "
"fields.  Formulas allow for reliable reproduction of a specific "
"configuration.  Some formulas are supplied by {suse}, or you can install "
"formulas from RPM packages or an external git repository."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-intro.adoc:3
msgid ""
"Formulas work best for large, non-trivial, configurations.  For smaller "
"tasks, use a state rather than a formula.  Formulas and states both act as a "
"kind of configuration documentation.  When you have written and stored the "
"configuration, they provide a snapshot of your infrastructure."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-intro.adoc:4
msgid "Formula data can be managed using the XMLRPC API."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-intro.adoc:5
msgid ""
"You can use the {productname} {webui} to apply {productname} formulas.  The "
"most commonly used formulas are documented in this section."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-intro.adoc:6
msgid ""
"Alternatively, you can use pre-written formulas as a starting point for your "
"own custom formulas.  Pre-written formulas are available from "
"https://github.com/saltstack-formulas.  For more information on custom "
"formulas, see xref:salt:formulas-custom.adoc[]."
msgstr ""

#. type: Title =
#: modules/salt/pages/formulas-suma.adoc:1
#, no-wrap
msgid "Formulas Provided by {productname}"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:2
msgid ""
"Some formulas are installed by default with {productname}.  Other official "
"formulas can be installed as RPM packages.  When the formula is installed, "
"you can activate them using the {productname} {webui}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:3
msgid ""
"For information about writing custom formulas, see "
"xref:salt:formulas-custom.adoc[]."
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-suma.adoc:4
#, no-wrap
msgid "Install Formulas with Zypper"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:5
msgid "Formulas are provided in the {productname} pool software channel."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/formulas-suma.adoc:6
msgid ""
"If a formula uses the same name as an existing Salt state, the two names "
"will collide, and could result in the formula being used instead of the "
"state.  Always check states and formulas to avoid name clashes."
msgstr ""

#. type: Block title
#: modules/salt/pages/formulas-suma.adoc:7
#, no-wrap
msgid "Procedure: Installing Formulas with Zypper"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:8
msgid ""
"On the {productname} Server, at the command prompt, search for available "
"formulas:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-suma.adoc:9
#, no-wrap
msgid "zypper se --type package formula\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:10
msgid "Get more information about a formula:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-suma.adoc:11
#, no-wrap
msgid "zypper info <formula_name>\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:12
msgid ""
"On the {productname} Server, at the command prompt, as root, install the "
"formula:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/formulas-suma.adoc:13
#, no-wrap
msgid "zypper in <formula_name>\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/formulas-suma.adoc:14
#, no-wrap
msgid "Activate Formulas from the {webui}"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:15
msgid ""
"Formulas provided by {productname}, or formulas that you have installed, can "
"be activated using the {productname} {webui}."
msgstr ""

#. type: Block title
#: modules/salt/pages/formulas-suma.adoc:16
#, no-wrap
msgid "Procedure: Activate Formulas from the {webui}"
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:17
msgid ""
"In the {productname} {webui}, navigate to menu:Systems[List], select the "
"client you want to activate the formula for."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:18
msgid ""
"Navigate to the menu:Systems[Formulas] tab, and check the formula you want "
"to activate."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:19
msgid "Click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/formulas-suma.adoc:20
msgid ""
"Navigate to the new subtab for the formula, and configure the formula as "
"required."
msgstr ""

#. type: Title =
#: modules/salt/pages/large-scale-tuning.adoc:1
#, no-wrap
msgid "Tuning Large Scale Deployments"
msgstr ""

#. type: Plain text
#: modules/salt/pages/large-scale-tuning.adoc:2
#: modules/salt/pages/large-scale.adoc:2
msgid ""
"{productname} is designed by default to work on small and medium scale "
"installations.  For installations with more than 1000 clients per "
"{productname} Server, adequate hardware sizing and parameter tuning must be "
"performed."
msgstr ""

#. type: Plain text
#: modules/salt/pages/large-scale-tuning.adoc:3
#: modules/salt/pages/large-scale.adoc:3
msgid ""
"For more information on managing large scale deployments, see "
"xref:large-deployments:large-deployments-overview.adoc[]."
msgstr ""

#
#. Old content starts here. Leaving this breadcrumb here for now, but these pages will need to be removed from the Salt Guide entirely at some point. --LKB 2020-07-17
#
#
#. [WARNING]
#. ====
#. The instructions in this section can have severe and catastrophic performance impacts when improperly used.
#. In some cases, they can cause {productname} to completely cease functioning.
#. Always test changes before implementing them in a production environment.
#. During implementation, take care when changing parameters.
#. Monitor performance before and after each change, and revert any steps that do not produce the expected result.
#. ====
#
#. ifeval::[{suma-content} == true]
#. [WARNING]
#. ====
#. We strongly recommend that you contact SUSE Consulting for assistance with tuning.
#
#. SUSE will not provide support for catastrophic failure when these advanced parameters are modified without consultation.
#. ====
#. endif::[]
#
#. [WARNING]
#. ====
#. Tuning is not required on installations of fewer than 1000 clients.
#. Do not perform these instructions on small or medium scale installations.
#. ====
#
#
#. == The Tuning Process
#
#. Any {productname} installation is subject to a number of design and infrastructure constraints that, for the purposes of tuning, we call environmental variables.
#. Environmental variables can include the total number of clients, the number of different operating systems under management, and the number of software channels.
#
#. Environmental variables influence, either directly or indirectly, the value of most configuration parameters.
#. During the tuning process, the configuration parameters are manipulated to improve system performance.
#
#. Before you begin tuning, you will need to estimate the best setting for each environment variable, and adjust the configuration parameters to suit.
#
#. To help you with the estimation process, we have provided you with a dependency graph.
#. Locate the environmental variables on the dependency graph to determine how they will influence other variables and parameters.
#
#. Environmental variables are represented by graph nodes in a rectangle at the top of the dependency graph.
#. Each node is connected to the relevant parameters that might need tuning.
#. Consult the relevant sections in this document for more information about recommended values.
#
#. Tuning one parameter might require tuning other parameters, or changing hardware, or the infrastructure.
#. When you change a parameter, follow the arrows from that node on the graph to determine what other parameters might need adjustment.
#. Continue through each parameter until you have visited all nodes on the graph.
#
#. // missing file?
#. image::parameter_graph.svg[Tuning dependency graph]
#
#. // Arghh! My eyes! LKB 2019-08-09
#
#. .Key to the Dependency Graph
#. * 3D boxes are hardware design variables or constraints
#. * Oval-shaped boxes are software or system design variables or constraints
#. * Rectangle-shaped boxes are configurable parameters, color-coded by configuration file:
#. ** Red: Apache `httpd` configuration files
#. ** Blue: Salt configuration files
#. ** Brown: Tomcat configuration files
#. ** Grey: PostgreSQL configuration files
#. ** Purple: `/etc/rhn/rhn.conf`
#. * Dashed connecting lines indicate a variable or constraint that might require a change to another parameter
#. * Solid connecting lines indicate that changing a configuration parameter requires checking another one to prevent issues
#
#
#. After the initial tuning has been completed, you will need to consider tuning again in these cases:
#
#. * If your tuning inputs change significantly
#. * If special conditions arise that require a certain parameter to be changed.
#. For example, if specific warnings appear in a log file.
#. * If performance is not satisfactory
#
#. To re-tune your installation, you will need to use the dependency graph again.
#. Start from the node where significant change has happened.
#
#
#
#. == Environmental Variables
#
#. This section contains information about environmental variables (inputs to the tuning process).
#
#. [[network-bandwidth]]
#. Network Bandwidth::
#. A measure of the typically available egress bandwith from the {productname} Server host to the clients or {productname} Proxy hosts.
#. This should take into account network hardware and topology as well as possible capacity limits on switches, routers, and other network equipment between the server and clients.
#
#. [[channel-count]]
#. Channel count::
#. The number of expected channels to manage.
#. Includes any vendor-provided, third-party, and cloned or staged channels.
#
#. [[client-count]]
#. Client count::
#. The total number of actual or expected clients.
#. It is important to tune any parameters in advance of a client count increase, whenever possible.
#
#. [[os-mix]]
#. OS mix::
#. The number of distinct operating system versions that managed clients have installed.
#. This is ordered by family ({sle}, openSUSE, {rhel}, or {ubuntu} based).
#. Storage and computing requirements are different in each case.
#
#. [[user-count]]
#. User count::
#. The expected maximum amount of concurrent users interacting with the {webui} plus the number of programs simultaneously using the XMLRPC API.
#. Includes `spacecmd`, `spacewalk-clone-by-date`, and similar.
#
#
#
#. == Parameters
#
#. This section contains information about the available parameters.
#
#
#. [[max-clients]]
#. === `MaxClients`
#
#. [cols="1,1"]
#. |===
#. | Description          | The maximum number of HTTP requests served simultaneously by Apache httpd.
#.                          Proxies, {webui}, and XMLRPC API clients each consume one.
#.                          Requests exceeding the parameter will be queued and might result in timeouts.
#. | Tune when            | xref:user-count[User count] and proxy count increase significantly and this line appears in [path]``/var/log/apache2/error_log``: [systemitem]``[...] [mpm_prefork:error] [pid ...] AH00161: server reached MaxRequestWorkers setting, consider raising the MaxRequestWorkers setting``.
#. | Value default        | 150
#. | Value recommendation | 150-500
#. | Location             | [path]``/etc/apache2/server-tuning.conf``, in the `prefork.c` section
#. | Example              | `MaxClients = 200`
#. | After changing       | Immediately change xref:server-limit[`ServerLimit`] and check xref:max-threads[`maxThreads`] for possible adjustment.
#. | Notes                | This parameter was renamed to `MaxRequestWorkers`, both names are valid.
#. | More information     | https://httpd.apache.org/docs/2.4/en/mod/mpm_common.html#maxrequestworkers
#. |===
#
#
#
#. [[server-limit]]
#. === `ServerLimit`
#
#. [cols="1,1"]
#. |===
#. | Description          | The number of Apache httpd processes serving HTTP requests simultaneously.
#.                          The number must equal xref:max-clients[`MaxClients`].
#. | Tune when            | xref:max-clients[`MaxClients`] changes
#. | Value default        | 150
#. | Value recommendation | The same value as xref:max-clients[`MaxClients`]
#. | Location             | [path]``/etc/apache2/server-tuning.conf``, in the `prefork.c` section
#. | Example              | `ServerLimit = 200`
#. | More information     | https://httpd.apache.org/docs/2.4/en/mod/mpm_common.html#serverlimit
#. |===
#
#
#
#. [[max-threads]]
#. === `maxThreads`
#
#. [cols="1,1"]
#. |===
#. | Description          | The number of Tomcat threads dedicated to serving HTTP requests
#. | Tune when            | xref:max-clients[`MaxClients`] changes.
#.                          `maxThreads` must always be equal or greater than xref:max-clients[`MaxClients`]
#. | Value default        | 150
#. | Value recommendation | The same value as xref:max-clients[`MaxClients`]
#. | Location             | [path]``/etc/tomcat/server.xml``
#. | Example              | `<Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8" address="127.0.0.1" maxThreads="200" connectionTimeout="20000"/>`
#. | More information     | https://tomcat.apache.org/tomcat-9.0-doc/config/http.html
#. |===
#
#
#
#. [[tomcat-xmx]]
#. === Tomcat's `-Xmx`
#
#. [cols="1,1"]
#. |===
#. | Description          | The maximum amount of memory Tomcat can use
#. | Tune when            | xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] is increased or
#. `OutOfMemoryException` errors appear in `/var/log/rhn/rhn_web_ui.log`
#. | Value default        | 1{nbsp}GiB
#. | Value recommendation | 4-8{nbsp}GiB
#. | Location             | [path]``/etc/sysconfig/tomcat``
#. | Example              | `JAVA_OPTS="... -Xmx8G ..."`
#. | After changing       | Check xref:memory-usage[memory usage]
#. | More information     | https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html
#. |===
#
#
#
#. [[java-message-queue-thread-pool-size]]
#. === `java.message_queue_thread_pool_size`
#
#. [cols="1,1"]
#. |===
#. | Description          | The maximum number of threads in Tomcat dedicated to asynchronous operations, including handling of incoming Salt events
#. | Tune when            | xref:client-count[Client count] increases significantly
#. | Value default        | 5
#. | Value recommendation | 50 - 150
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `java.message_queue_thread_pool_size = 50`
#. | After changing       | Check xref:hibernate-c3p0-max-size[`hibernate.c3p0.max_size`], as each thread consumes a PostgreSQL connection, starvation might happen if the allocated connection pool is insufficient.
#.                          Check xref:thread-pool[`thread_pool`], as each thread might perform Salt API calls, starvation might happen if the allocated Salt thread pool is insufficient.
#.                          Check xref:tomcat-xmx[Tomcat's `-Xmx`], as each thread consumes memory, `OutOfMemoryException` might be raised if insufficient.
#. | More information     | `man rhn.conf`
#. |===
#
#
#
#. [[java-salt-batch-size]]
#. === `java.salt_batch_size`
#
#. [cols="1,1"]
#. |===
#. | Description          | The maximum number of minions concurrently executing a scheduled action.
#. | Tune when            | xref:client-count[Client count] reaches several thousands and actions are not executed quickly enough.
#. | Value default        | 200
#. | Value recommendation | 200-500
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `java.salt_batch_size = 300`
#. | After changing       | Check xref:memory-usage[memory usage].
#.                          Monitor memory usage closely before and after the change.
#. | More information     | xref:salt-rate-limiting.adoc[Salt Rate Limiting]
#. |===
#
#
#
#. [[java-salt-presence-ping-timeout]]
#. === `java.salt_presence_ping_timeout`
#
#. [cols="1,1"]
#. |===
#. | Description          | Before any action is executed on a client, a presence ping is executed to make sure the client is reachable.
#.                          This parameter sets the amount of time before a second command (`find_job`) is sent to the client to verify its presence.
#.                          Having many clients typically means some will respond faster than others, so this timeout could be raised to accommodate for the slower ones.
#. | Tune when            | xref:client-count[Client count] increases significantly, or some clients are responding correctly but too slowly, and {productname} excludes them from calls.
#.                          This line appears in [path]``/var/log/rhn/rhn_web_ui.log``: [systemitem]``"Got no result for <COMMAND> on minion <MINION_ID> (minion did not respond in time)"``
#. | Value default        | 4 seconds
#. | Value recommendation | 4-400 seconds
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `java.salt_presence_ping_timeout = 40`
#. | More information     | xref:salt-timeouts.adoc[Salt Timeouts]
#. |===
#
#
#
#. [[java-salt-presence-ping-gather-job-timeout]]
#. === `java.salt_presence_ping_gather_job_timeout`
#
#. [cols="1,1"]
#. |===
#. | Description          | Before any action is executed on a client, a presence ping is executed to make sure the client is reachable.
#.                          After xref:java-salt-presence-ping-timeout[`java.salt_presence_ping_timeout`] seconds have elapsed without a response, a second command (`find_job`) is sent to the client for a final check.
#.                          This parameter sets the number of seconds after the second command after which the client is definitely considered offline.
#.                          Having many clients typically means some will respond faster than others, so this timeout could be raised to accommodate for the slower ones.
#. | Tune when            | xref:client-count[Client count] increases significantly, or some clients are responding correctly but too slowly, and {productname} excludes them from calls.
#.                          This line appears in [path]``/var/log/rhn/rhn_web_ui.log``: [systemitem]``"Got no result for <COMMAND> on minion <MINION_ID> (minion did not respond in time)"``
#. | Value default        | 1 second
#. | Value recommendation | 1-100 seconds
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `java.salt_presence_ping_gather_job_timeout = 10`
#. | More information     | xref:salt-timeouts.adoc[Salt Timeouts]
#. |===
#
#
#
#. [[java-taskomatic-channel-repodata-workers]]
#. === `java.taskomatic_channel_repodata_workers`
#
#. [cols="1,1"]
#. |===
#. | Description          | Whenever content is changed in a software channel, its metadata needs to be recomputed before clients can use it.
#.                          Channel-altering operations include the addition of a patch, the removal of a package or a repository synchronization run.
#.                          This parameter specifies the maximum number of Taskomatic threads that {productname} will use to recompute the channel metadata.
#.                          Channel metadata computation is both CPU-bound and memory-heavy, so raising this parameter and operating on many channels simultaneously could cause Taskomatic to consume significant resources, but channels will be available to clients sooner.
#. | Tune when            | xref:channel-count[Channel count] increases significantly (more than 50), or more concurrent operations on channels are expected.
#. | Value default        | 2
#. | Value recommendation | 2-10
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `java.taskomatic_channel_repodata_workers = 4`
#. | After changing       | Check xref:taskomatic-java-maxmemory[`taskomatic.java.maxmemory`] for adjustment, as every new thread will consume memory
#. | More information     | `man rhn.conf`
#. |===
#
#
#
#. [[taskomatic-java-maxmemory]]
#. === `taskomatic.java.maxmemory`
#
#. [cols="1,1"]
#. |===
#. | Description          | The maximum amount of memory Taskomatic can use.
#.                          Generation of metadata, especially for some OSs, can be memory-intensive, so this parameter might need raising depending on the managed xref:os-mix[OS mix].
#. | Tune when            | xref:java-taskomatic-channel-repodata-workers[`java.taskomatic_channel_repodata_workers`] increases, OSs are added to {productname} (particularly {rhel} or {ubuntu}), or `OutOfMemoryException` errors appear in `/var/log/rhn/rhn_taskomatic_daemon.log`.
#. | Value default        | 4096 MiB
#. | Value recommendation | 4096-16384 MiB
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `taskomatic.java.maxmemory = 8192`
#. | After changing       | Check xref:memory-usage[memory usage].
#. | More information     | `man rhn.conf`
#. |===
#
#
#
#. [[org-quartz-threadPool-threadCount]]
#. === `org.quartz.threadPool.threadCount`
#
#. [cols="1,1"]
#. |===
#. | Description          | The number of Taskomatic worker threads.
#.                          Increasing this value allows Taskomatic to serve more clients in parallel.
#. | Tune when            | xref:client-count[Client count] increases significantly
#. | Value default        | 20
#. | Value recommendation | 20-200
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `org.quartz.threadPool.threadCount = 100`
#. | After changing       | Check xref:hibernate-c3p0-max-size[`hibernate.c3p0.max_size`] and xref:thread-pool[`thread_pool`] for adjustment
#. | More information     | http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/configuration.html
#. |===
#
#
#
#. [[org-quartz-scheduler-idleWaitTime]]
#. === `org.quartz.scheduler.idleWaitTime`
#
#. [cols="1,1"]
#. |===
#. | Description          | Cycle time for Taskomatic.
#.                          Decreasing this value lowers the latency of Taskomatic.
#. | Tune when            | xref:client-count[Client count] is in the thousands.
#. | Value default        | 5000 ms
#. | Value recommendation | 1000-5000 ms
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `org.quartz.scheduler.idleWaitTime = 1000`
#. | More information     | http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/configuration.html
#. |===
#
#
#
#. [[MinionActionExecutor-parallel-threads]]
#. === `MinionActionExecutor.parallel_threads`
#
#. [cols="1,1"]
#. |===
#. | Description          | Number of Taskomatic threads dedicated to sending commands to Salt clients as a result of actions being executed.
#. | Tune when            | xref:client-count[Client count] is in the thousands.
#. | Value default        | 1
#. | Value recommendation | 1-10
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `taskomatic.com.redhat.rhn.taskomatic.task.MinionActionExecutor.parallel_threads = 10`
#. |===
#
#. [[SSHMinionActionExecutor-parallel-threads]]
#. === `SSHMinionActionExecutor.parallel_threads`
#
#. [cols="1,1"]
#. |===
#. | Description          | Number of Taskomatic threads dedicated to sending commands to Salt SSH clients as a result of actions being executed.
#. | Tune when            | xref:client-count[Client count] is in the hundreds.
#. | Value default        | 20
#. | Value recommendation | 20-100
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `taskomatic.com.redhat.rhn.taskomatic.task.SSHMinionActionExecutor.parallel_threads = 40`
#. |===
#
#
#. [[hibernate-c3p0-max-size]]
#. === `hibernate.c3p0.max_size`
#
#. [cols="1,1"]
#. |===
#. | Description          | Maximum number of PostgreSQL connections simultaneously available to both Tomcat and Taskomatic.
#.                          If any of those components requires more concurrent connections, their requests will be queued.
#. | Tune when            | xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] or xref:max-threads[`maxThreads`] increase significantly, or when xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`] has changed significantly.
#.                          Each thread consumes one connection in Taskomatic and Tomcat, having more threads than connections might result in starving.
#. | Value default        | 20
#. | Value recommendation | 100 to 200, higher than the maximum of xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] + xref:max-threads[`maxThreads`] and xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`]
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `hibernate.c3p0.max_size = 100`
#. | After changing       | Check xref:max-connections[`max_connections`] for adjustment.
#. | More information     | https://www.mchange.com/projects/c3p0/#maxPoolSize
#. |===
#
#
#
#. [[rhn-search-java-maxmemory]]
#. === `rhn-search.java.maxmemory`
#
#. [cols="1,1"]
#. |===
#. | Description          | The maximum amount of memory that the `rhn-search` service can use.
#. | Tune when            | xref:client-count[Client count] increases significantly, and `OutOfMemoryException` errors appear in `journalctl -u rhn-search`.
#. | Value default        | 512 MiB
#. | Value recommendation | 512-4096 MiB
#. | Location             | [path]``/etc/rhn/rhn.conf``
#. | Example              | `rhn-search.java.maxmemory = 4096`
#. | After changing       | Check xref:memory-usage[memory usage].
#. |===
#
#
#
#. [[shared-buffers]]
#. === `shared_buffers`
#
#. [cols="1,1"]
#. |===
#. | Description          | The amount of memory reserved for PostgreSQL shared buffers, which contain caches of database tables and index data.
#. | Tune when            | RAM changes
#. | Value default        | 25% of total RAM
#. | Value recommendation | 25-40% of total RAM
#. | Location             | [path]``/var/lib/pgsql/data/postgresql.conf``
#. | Example              | `shared_buffers = 8192MB`
#. | After changing       | Check xref:memory-usage[memory usage].
#. | More information     | https://www.postgresql.org/docs/10/runtime-config-resource.html#GUC-SHARED-BUFFERS
#. |===
#
#
#
#. [[max-connections]]
#. === `max_connections`
#
#. [cols="1,1"]
#. |===
#. | Description          | Maximum number of PostgreSQL connections available to applications.
#.                          More connections allow for more concurrent threads/workers in various components (in particular Tomcat and Taskomatic), which generally improves performance.
#.                          However, each connection consumes resources, in particular xref:work-mem[`work_mem`] megabytes per sort operation per connection.
#. | Tune when            | xref:hibernate-c3p0-max-size[`hibernate.c3p0.max_size`] changes significantly, as that parameter determines the maximum number of connections available to Tomcat and Taskomatic
#. | Value default        | 400
#. | Value recommendation | 2 * xref:hibernate-c3p0-max-size[hibernate.c3p0.max_size] + 50, if less than 1000
#. | Location             | [path]``/var/lib/pgsql/data/postgresql.conf``
#. | Example              | `max_connections = 250`
#. | After changing       | Check xref:memory-usage[memory usage].
#.                          Monitor memory usage closely before and after the change.
#. | More information     | https://www.postgresql.org/docs/10/runtime-config-connection.html#GUC-MAX-CONNECTIONS
#. |===
#
#
#
#. [[work-mem]]
#. === `work_mem`
#
#. [cols="1,1"]
#. |===
#. | Description          | The amount of memory allocated by PostgreSQL every time a connection needs to do a sort or hash operation.
#.                          Every connection (as specified by xref:max-connections[`max_connections`]) might make use of an amount of memory equal to a multiple of `work_mem`.
#. | Tune when            | Individual query operations are too slow, and value is below 5 MB
#. | Value recommendation | 2-20 MB
#. | Location             | [path]``/var/lib/pgsql/data/postgresql.conf``
#. | Example              | `work_mem = 10MB`
#. | After changing       | check if the {productname} Server might need additional RAM.
#. | More information     | https://www.postgresql.org/docs/10/runtime-config-resource.html#GUC-WORK-MEM
#. |===
#
#
#
#. [[effective-cache-size]]
#. === `effective_cache_size`
#
#. [cols="1,1"]
#. |===
#. | Description          | Estimation of the total memory available to PostgreSQL for caching.
#.                          It is the explicitly reserved memory (xref:shared-buffers[`shared_buffers`]) plus any memory used by the kernel as cache/buffer.
#. | Tune when            | Hardware RAM or memory usage increase significantly
#. | Value recommendation | Start with 75% of total RAM.
#.                          For finer settings, use xref:shared-buffers[`shared_buffers`] + free memory + buffer/cache memory.
#.                          Free and buffer/cache can be determined via the `free -m` command (`free` and `buff/cache` in the output respectively)
#. | Location             | [path]``/var/lib/pgsql/data/postgresql.conf``
#. | Example              | `effective_cache_size = 24GB`
#. | After changing       | Check xref:memory-usage[memory usage]
#. | Notes                | This is an estimation for the query planner, not an allocation.
#. | More information     | https://www.postgresql.org/docs/10/runtime-config-query.html#GUC-EFFECTIVE-CACHE-SIZE
#. |===
#
#
#
#. [[thread-pool]]
#. === `thread_pool`
#
#. [cols="1,1"]
#. |===
#. | Description          | The number of worker threads serving Salt API HTTP requests.
#.                          A higher number can improve parallelism of {productname} Server-initiated Salt operations, but will consume more memory.
#. | Tune when            | xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] or xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`] are changed.
#.                          Starvation can occur when there are more Tomcat or Taskomatic threads making simultaneous Salt API calls than there are Salt API worker threads.
#. | Value default        | 100
#. | Value recommendation | 100-500, but should be higher than the sum of xref:java-message-queue-thread-pool-size[`java.message_queue_thread_pool_size`] and xref:org-quartz-threadPool-threadCount[`org.quartz.threadPool.threadCount`]
#. | Location             | [path]``/etc/salt/master.d/susemanager.conf``, in the `rest_cherrypy` section.
#. | Example              | `thread_pool: 100`
#. | After changing       | Check xref:worker-threads[`worker_threads`] for adjustment.
#. | More information     | https://docs.saltstack.com/en/latest/ref/netapi/all/salt.netapi.rest_cherrypy.html#performance-tuning
#. |===
#
#
#
#. [[worker-threads]]
#. === `worker_threads`
#
#. [cols="1,1"]
#. |===
#. | Description          | The number of `salt-master` worker threads that process commands and replies from minions and the Salt API.
#.                          Increasing this value, assuming sufficient resources are available, allows Salt to process more data in parallel from minions without timing out, but will consume significantly more RAM (typically about 70 MiB per thread).
#. | Tune when            | xref:client-count[Client count] increases significantly, xref:thread-pool[`thread_pool`] increases significantly, or `SaltReqTimeoutError` or `Message timed out` errors appear in `/var/log/salt/master`.
#. | Value default        | 8
#. | Value recommendation | 8-200
#. | Location             | [path]``/etc/salt/master.d/tuning.conf``
#. | Example              | `worker_threads: 50`
#. | After changing       | Check xref:memory-usage[memory usage].
#.                          Monitor memory usage closely before and after the change.
#. | More information     | https://docs.saltstack.com/en/latest/ref/configuration/master.html#worker-threads
#. |===
#
#
#
#. [[swappiness]]
#. === `swappiness`
#
#. [cols="1,1"]
#. |===
#. | Description          | How aggressively the kernel moves unused data from memory to the swap partition.
#.                          Setting a lower parameter typically reduces swap usage and results in better performance, especially when RAM memory is abundant.
#. | Tune when            | RAM increases, or swap is used when RAM memory is sufficient.
#. | Value default        | 60
#. | Value recommendation | 1-60. For 128{nbsp}GB of RAM, 10 is expected to give good results.
#. | Location             | [path]``/etc/sysctl.conf``
#. | Example              | `vm.swappiness = 20`
#. | More information     | https://documentation.suse.com/sles/15-SP2/html/SLES-all/cha-tuning-memory.html#cha-tuning-memory-vm
#. |===
#
#
#
#. [[memory-usage]]
#. === Memory Usage
#
#. Adjusting some of the parameters listed in this section can result in a higher amount of RAM being used by various components.
#. It is important that the amount of hardware RAM is adequate after any significant change.
#
#. To determine how RAM is being used, you will need to check each process that consumes it.
#
#. Operating system::
#. Stop all {productname} services and inspect the output of [command]``free -h``.
#. Java-based components::
#. This includes Taskomatic, Tomcat, and `rhn-search`.
#. These services support a configurable memory cap.
#. The {productname} Server::
#. Depends on many factors and can only be estimated.
#. Measure PostgreSQL reserved memory by checking xref:shared-buffers[`shared_buffers`], permanently.
#. You can also multiply xref:work-mem[`work_mem`] and xref:max-connections[`max_connections`], and multiply by three for a worst case estimate of per-query RAM.
#. You will also need to check the operating system buffers and caches, which are used by PostgreSQL to host copies of database data.
#. These often automatically occupy any available RAM.
#
#. It is important that the {productname} Server has sufficient RAM to accommodate all of these processes, especially OS buffers and caches, to have reasonable PostgreSQL performance.
#. We recommend you keep several gigabytes available at all times, and add more as the database size on disk increases.
#
#. Whenever the expected amount of memory available for OS buffers and caches changes, update the `effective_cache_size` parameter to have PostgreSQL use it correctly.
#. You can calculate the total available by finding the total RAM available, less the expected memory usage.
#
#. To get a live breakdown of the memory used by services on the {productname} Server, use this command:
#
#. ----
#. pidstat -p ALL -r --human 1 60 | tee pidstat-memory.log
#. ----
#
#. This command will save a copy of displayed data in the `pidstat-memory.log` file for later analysis.
#
#. type: Title =
#: modules/salt/pages/large-scale.adoc:1
#, no-wrap
msgid "Large Scale Deployments"
msgstr ""

#
#. Old content starts here. Leaving this breadcrumb here for now, but these pages will need to be removed from the Salt Guide entirely at some point. --LKB 2020-07-17
#
#. There is no hard maximum number of supported systems.
#. Many factors can affect how many clients can reliably be used in a particular installation.
#. Factors can include which features are used, and how the hardware and systems are configured.
#
#
#. [WARNING]
#. ====
#. Large installations require standard Salt clients.
#. These instructions cannot be used in environments using traditional clients or Salt SSH minions.
#. ====
#
#
#
#. == Hardware and Infrastructure
#
#. Not all problems can be solved with better hardware, but choosing the right hardware is an absolute necessity for large scale deployments.
#
#
#. The minimum requirements for the {productname} Server are:
#
#. * Eight or more recent {x86_64} CPU cores.
#. * 32{nbsp}GiB RAM.
#. For installations with thousands of clients, use 64{nbsp}GB or more.
#. * Fast I/O storage devices, such as locally attached SSDs.
#. For PostgreSQL data directories, we recommend locally attached RAID-0 SSDs.
#
#. If the {productname} Server is virtualized, enable the `elevator=noop` kernel command line option, for the best input/output performance.
#. You can check the current status with [command]``cat /sys/block/<DEVICE>/queue/scheduler``.
#. This command will display a list of available schedulers with the currently active one in brackets.
#. To change the scheduler before a reboot, use [command]``echo noop > /sys/block/<DEVICE>/queue/scheduler``.
#
#. The minimum requirements for the {productname} Proxy are:
#
#. * One {productname} Proxy per 500-1000 clients, depending on available network bandwidth.
#. * Two or more recent {x86_64} CPU cores.
#. * 16{nbsp}GB RAM, and sufficient storage for caching.
#
#. Clients should never be directly attached to the {productname} Server in production systems.
#
#. In large scale installations, the {productname} Proxy is used primarily as a local cache for content between the server and clients.
#. Using proxies in this way can substantially reduce download time for clients, and decrease Server egress bandwidth use.
#
#. The number of clients per proxy will affect the download time.
#. Always take network structure and available bandwidth into account.
#
#. We recommend you estimate the download time of typical usage to determine how many clients to connnect to each proxy.
#. To do this, you will need to estimate the number of package upgrades required in every patch cycle.
#. You can use this formula to calculate the download time:
#
#. ----
#. Size of updates * Number of clients / Theoretical download speed / 60
#. ----
#
#. For example, the total time needed to transfer 400{nbsp}MB of upgrades through a physical link speed of 1{nbsp}GB/s to 3000 clients:
#
#. ----
#. 400 MB  * 3000 / 119 MB/s / 60 = 169 min
#. ----
#
#
#
#. == Operation Recommendations
#
#. This section contains a range of recommendations for large scale deployments.
#
#. [NOTE]
#. ====
#. Always start small and scale up gradually.
#. Monitor the server as you scale to identify problems early.
#. ====
#
#. // Might be worth alphabetising these. LKB 2018-08-09
#
#. === Salt Client Onboarding Rate
#
#. The rate at which {productname} can onboard clients is limited and depends on hardware resources.
#. Onboarding clients at a faster rate than {productname} is configured for will build up a backlog of unprocessed keys.
#. This slows down the process and can potentially exhaust resources.
#. We recommend that you limit the acceptance key rate programmatically.
#. A safe starting point would be to onboard a client every 15 seconds.
#. You can do that with this command:
#
#. ----
#. for k in $(salt-key -l un|grep -v Unaccepted); do salt-key -y -a $k; sleep 15; done
#. ----
#
#
#
#. === Salt Clients and the RNG
#
#. All communication to and from Salt clients is encrypted.
#. During client onboarding, Salt uses asymmetric cryptography, which requires available entropy from the Random Number Generator (RNG) facility in the kernel.
#. If sufficient entropy is not available from the RNG, it will significantly slow down communications.
#. This is especially true in virtualized environments.
#. Ensure enough entropy is present, or change the virtualization host options.
#
#. You can check the amount of available entropy with the [command]``cat /proc/sys/kernel/random/entropy_avail``.
#. It should never be below 100-200.
#
#
#
#. === Clients Running with Unaccepted Salt Keys
#
#. Clients which have not been onboarded, that is clients running with unaccepted Salt keys, consume more resources than clients that have been onboarded.
#. Generally, this consumes about an extra 2.5 Kb/s of inbound network bandwidth per client.
#. For example, 1000 idle clients will consume about 2.5 Mb/s extra.
#. This consumption will reduce almost to zero when onboarding has been completed for all clients.
#. Limit the number of non-onboarded clients for optimal performance.
#
#
#
#. === Disabling the Salt Mine
#
#. In older versions, {productname} used a tool called Salt mine to check client availability.
#. The Salt mine would cause clients to contact the server every hour, which created significant load.
#. With the introduction of a more efficient mechanism in {productname}{nbsp}3.2, the Salt mine is no longer required.
#. Instead, the {productname} Server uses Taskomatic to ping only the clients that appear to have been offline for twelve hours or more, with all clients being contacted at least once in every twenty four hour period by default.
#. You can adjust this by changing the [systemitem]``web.system_checkin_threshold`` parameter in [path]``rhn.conf``.
#. The value is expressed in days, and the default value is [literal]``1``.
#
#. Newly registered Salt clients will have the Salt mine disabled by default.
#. If the Salt mine is running on your system, you can reduce load by disabling it.
#. This is especially effective if you have a large number of clients.
#
#. Disable the Salt mine by running this command on the server:
#. ----
#. salt '*' state.sls util.mgr_mine_config_clean_up
#. ----
#
#. This will restart the clients and generate some Salt events to be processed by the server.
#. If you have a large number of clients, handling these events could create excessive load.
#. To avoid this, you can execute the command in batch mode with this command:
#. ----
#. salt --batch-size 50 '*' state.sls util.mgr_mine_config_clean_up
#. ----
#
#. You will need to wait for this command to finish executing.
#. Do not end the process with kbd:[Ctrl+C].
#
#
#
#. === Disable Unnecessary Taskomatic jobs
#
#
#. To minimize wasted resources, you can disable non-essential or unused Taskomatic jobs.
#
#. You can see the list of Taskomatic jobs in the {productname} {webui}, at menu:Admin[Task Schedules].
#
#. To disable a job, click the name of the job you want to disable, select [guimenu]``Disable Schedule``, and click  btn:[Update Schedule].
#
#. To delete a job, click the name of the job you want to delete, and click  btn:[Delete Schedule].
#
#. We recommend disabling these jobs:
#
#. * Daily comparison of configuration files: [systemitem]``compare-configs-default``
#. * Hourly synchronization of Cobbler files: [systemitem]``cobbler-sync-default``
#. * Daily gatherer and subscription matcher: [systemitem]``gatherer-matcher-default``
#
#. Do not attempt to disable any other jobs, as it could prevent {productname} from functioning correctly.
#
#
#. === Swap and Monitoring
#
#. It is especially important in large scale deployments that you keep your {productname} Server constantly monitored and backed up.
#
#. Swap space use can have significant impacts on performance.
#. If significant non-transient swap usage is detected, you can increase the available hardware RAM.
#
#. You can also consider tuning the Server to consume less memory.
#. For more information on tuning, see xref:salt:large-scale-tuning.adoc[].
#
#. === AES Key Rotation
#
#. Communications from the Salt Master to clients is encrypted with a single AES key.
#. The key is rotated when:
#.  * The ``salt-master`` process is restarted, or
#.  * Any minion key is deleted (for example, when a client is deleted from {productname})
#
#. After the AES key has been rotated, all clients must re-authenticate to the master.
#. By default, this happens next time a client receives a message.
#. If you have a large number of clients (several thousands), this can cause a high CPU load on the {productname} Server.
#. If the CPU load is excessive, we recommend that you delete keys in batches, and in off-peak hours if possible, to avoid overloading the server.
#
#. For more information, see:
#. * https://docs.saltstack.com/en/latest/topics/tutorials/intro_scale.html#too-many-minions-re-authing
#. * https://docs.saltstack.com/en/getstarted/system/communication.html
#. type: Title =
#: modules/salt/pages/salt-command.adoc:1
#, no-wrap
msgid "The Salt Command"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:2
msgid ""
"Salt commands have three main components: target, function, and arguments.  "
"The calls are constructed in this format:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:3
#, no-wrap
msgid "salt 'target' <function> [arguments]\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:4
msgid ""
"The target defines the client, or group of clients, on which to run the "
"function."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:5
msgid "The function is the particular task to be run."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:6
msgid "Arguments provide any extra data required by the function."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-command.adoc:7
#, no-wrap
msgid "Salt Targets"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:8
msgid ""
"Salt command targets allow you to specify a client or group of clients.  "
"There are several different targets you can use."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-command.adoc:9
#, no-wrap
msgid "General Targeting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:10
msgid "List available grains on all clients:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:11
#: modules/salt/pages/salt-useful-commands.adoc:26
#, no-wrap
msgid "salt '*' grains.ls\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:12
msgid "Target a specific client:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:13
#, no-wrap
msgid "salt 'web1.example.com' test.ping\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-command.adoc:14
#, no-wrap
msgid "Glob Targeting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:15
msgid "Target all clients using a particular domain:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:16
#, no-wrap
msgid "salt '*example.com' test.ping\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:17
msgid "Target all clients using a particular label:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:18
#, no-wrap
msgid "salt 'label*' test.ping\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-command.adoc:19
#, no-wrap
msgid "List Targeting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:20
msgid "Specify a flat list of clients, using their IDs:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:21
#, no-wrap
msgid "salt -L 'client_ID1, client_ID2, client_ID3' test.ping\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-command.adoc:22
#, no-wrap
msgid "Regular Expression Targeting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:23
msgid "You can also define targets with PCRE-compliant regular expressions:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:24
#, no-wrap
msgid "salt -E '(?!web)' test.ping\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-command.adoc:25
#, no-wrap
msgid "IP Address Targeting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:26
msgid "List available client IP addresses:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:27
#, no-wrap
msgid "salt '*' network.ip_addrs\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:28
msgid "Target a specific client IP address:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:29
#, no-wrap
msgid "salt -S '172.31.60.74' test.ping\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:30
msgid "Target all clients on a subnet:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:31
#, no-wrap
msgid "salt -S 172.31.0.0/16 test.ping\n"
msgstr ""

#. This is general Linux info, not specific to the topic.
#. You can use the [command]``ip`` command to find the subnet mask in the format of ``192.168.1.1/24``:
#
#. ----
#. ip -o -f inet addr show | awk '/scope global/ {print $4}'
#. ----
#. type: Plain text
#: modules/salt/pages/salt-command.adoc:32
msgid ""
"For more on targeting, see "
"https://docs.saltstack.com/en/latest/topics/targeting/."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-command.adoc:33
#, no-wrap
msgid "Salt Execution Modules"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:34
msgid ""
"When you have specified a target, provide the module and function to execute "
"on the target."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:35
msgid "Find which modules can be executed on the target:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:36
#, no-wrap
msgid "salt '*' sys.doc\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:37
msgid ""
"For a full list of callable modules, see "
"https://docs.saltstack.com/en/latest/ref/modules/all/index.html."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-command.adoc:38
#, no-wrap
msgid "Salt Function Arguments"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:39
msgid "Functions accept arguments for any extra data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:40
msgid ""
"For example, the [command]``pkg.install`` function requires an argument "
"specifying which package to install:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:41
#, no-wrap
msgid "salt '*' pkg.install yast2\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-command.adoc:42
msgid ""
"You can provide more than one argument to a function, with spaces between "
"them.  For example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-command.adoc:43
#, no-wrap
msgid ""
"salt '*' cmd.run 'echo \"Hello: $FIRST_NAME\"' env='{FIRST_NAME: "
"\"John\"}'\n"
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-example-formula.adoc:1
#, no-wrap
msgid "Install the Salt Example Formula"
msgstr ""

#.  This seems pretty pointless, and a bit out of date.Removed from nav. LKB 2019-08-20
#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:2
msgid ""
"This section provides guidance on installing and using SUSE-provided Salt "
"formulas."
msgstr ""

#. type: Block title
#: modules/salt/pages/salt-example-formula.adoc:3
#, no-wrap
msgid "Procedure: Installing the Locale Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:4
msgid "Install the locale formula with:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-example-formula.adoc:5
#, no-wrap
msgid "zypper install locale-formula\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:6
msgid ""
"This installs the package contents to "
"[path]``/usr/share/susemanager/formulas/{metadata,states}``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:7
msgid "After installing the RPM, log in to the {productname} {webui}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:8
msgid ""
"Browse to the menu:Main Menu[System Details] page of any client you would "
"like to apply the formula to."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:9
msgid ""
"On the menu:Main Menu[System Details] page you will see a new btn:[Formulas] "
"tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:10
msgid "Select it to view a list of installed formulas."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:11
msgid ""
"From the btn:[Formulas] list select menu:Formulas[Locale] and click "
"btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:12
msgid ""
"A new tab will appear next to the menu:Formula[Locale] subtab. Select the "
"new menu:Formulas[Locale] tab."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:13
msgid ""
"The menu:Formalas[Locale] tab contains options for setting the language, "
"keyboard layout, timezone, and whether hardware clock is set to UTC. Select "
"the desired options and click btn:[Save]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:14
msgid ""
"Run the following command to verify pillar settings. The output has been "
"truncated."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-example-formula.adoc:15
#, no-wrap
msgid "salt '$your_client' pillar.items\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-example-formula.adoc:16
#, no-wrap
msgid ""
"...\n"
"   keyboard_and_language:\n"
"       ----------\n"
"       keyboard_layout:\n"
"           English (US)\n"
"       language:\n"
"           English (US)\n"
"   machine_password:\n"
"       foobar\n"
"   mgr_server:\n"
"       manager_server\n"
"   mgr_origin_server:\n"
"       manager_server\n"
"   org_id:alt '$your_client_here'\n"
"       1\n"
"   timezone:\n"
"       ----------\n"
"       hardware_clock_set_to_utc:\n"
"           True\n"
"       name:\n"
"           CET\n"
"    ...\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-example-formula.adoc:17
msgid ""
"Apply this state to your client by applying the highstate from the command "
"line with:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-example-formula.adoc:18
#, no-wrap
msgid "salt '$your_client' state.highstate\n"
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-example-formula.adoc:19
msgid ""
"You can also apply the highstate from the previous formula tab from the "
"{productname} {webui} by selecting menu:System Details[States] and clicking "
"btn:[Apply Highstate]."
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-file-locations.adoc:1
#, no-wrap
msgid "Salt File Locations and Structure"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:2
msgid ""
"There are several ways to set up the Salt file structure.  This section "
"describes how Salt is supported and set up as part of {productname} Server.  "
"The main configuration file is "
"[path]``/etc/salt/master.d/susemanager.conf``."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-file-locations.adoc:3
msgid ""
"Do not edit the [path]``/etc/salt/master.d/susemanager.conf`` configuration "
"file.  This file belongs to the [package]``spacewalk-setup`` package and is "
"marked as [literal]``%config``.  When {suse} updates the "
"[package]``spacewalk-setup`` package, the [path]``susemanager.conf`` file is "
"overwritten, and any customization is lost.  Instead, add your own "
"configuration file to the [path]``/etc/salt/master.d/`` directory.  This "
"prevents the update process from deleting your settings from the main "
"[path]``susemanager.conf`` configuration file."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:4
msgid ""
"Some settings from [path]``/etc/salt/master.d/susemanager.conf`` that can "
"help with finding configuration options:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-file-locations.adoc:5
#, no-wrap
msgid ""
"# Configure different file roots. Custom salt states should only be placed "
"in\n"
"# /srv/salt.\n"
"# Users should not touch other directories listed here.\n"
"file_roots:\n"
"  base:\n"
"    - /usr/share/susemanager/salt\n"
"    - /usr/share/salt-formulas/states\n"
"    - /usr/share/susemanager/formulas/states\n"
"    - /srv/susemanager/salt\n"
"    - /srv/salt\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-file-locations.adoc:6
#, no-wrap
msgid ""
"# Configure different pillar roots. Custom pillar data should only be "
"placed\n"
"# in /srv/pillar.\n"
"# Users should not touch other directories listed here.\n"
"pillar_roots:\n"
"  base:\n"
"    - /srv/pillar\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:7
msgid ""
"When you are working with [path]``/etc/salt/master.d/susemanager.conf``, be "
"aware that:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:8
msgid "Files listed are searched in the order they appear"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:9
msgid "The first matching file found is called"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:10
msgid "The {productname} Server reads Salt state data from five root directories:"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-file-locations.adoc:11
#, no-wrap
msgid "[path]``/usr/share/susemanager/salt``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:12
msgid ""
"This directory is shipped and updated with {productname} and includes "
"certificate setup and common state logic to be applied to packages and "
"channels."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-file-locations.adoc:13
#: modules/salt/pages/salt-file-locations.adoc:17
#: modules/salt/pages/salt-file-locations.adoc:20
#: modules/salt/pages/salt-file-locations.adoc:28
msgid "Do not edit or add custom Salt data to this directory."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-file-locations.adoc:14
#, no-wrap
msgid "[path]``/usr/share/salt-formulas/states``"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-file-locations.adoc:15
#, no-wrap
msgid "[path]``/usr/share/susemanager/formulas/states``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:16
msgid ""
"These directories are shipped and updated with {productname} or additional "
"extensions.  They include states for Salt formulas."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-file-locations.adoc:18
#, no-wrap
msgid "[path]``/srv/susemanager/salt``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:19
msgid ""
"This directory is generated by {productname}, based on assigned channels and "
"packages for clients, groups, and organizations.  This directory will be "
"overwritten and regenerated.  It is the Salt equivalent of the {productname} "
"database."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:21
msgid "Within this directory, each organization has a sub-directory."
msgstr ""

#. type: Block title
#: modules/salt/pages/salt-file-locations.adoc:22
#, no-wrap
msgid "Example: SLS File Directory Structure"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-file-locations.adoc:23
#, no-wrap
msgid ""
"├── manager_org_<org id>\n"
"│   ├── files\n"
"│   │    ... files needed by states (uploaded by users)...\n"
"│   └── state.sls\n"
"         ... other SLS files (created by users)...\n"
"For example:\n"
"├── manager_org_TESTING\n"
"│   ├── files\n"
"│   │   └── motd     # user created\n"
"│   │    ... other files needed by states ...\n"
"│   └── motd.sls     # user created\n"
"            ... other SLS files ...\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-file-locations.adoc:24
#, no-wrap
msgid "[path]``/srv/salt``"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:25
msgid ""
"This directory is used for custom state data, modules, and related data.  "
"{productname} does not operate or use this directory directly.  The state "
"data in this directory is used by the client highstate, and is merged with "
"the total state result generated by {productname}.  Use this directory for "
"custom Salt data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:26
msgid "The {productname} Server reads Salt pillar data from two root directories:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:27
msgid ""
"/usr/share/susemanager/pillar:: This directory is generated by "
"{productname}.  It is shipped and updated together with {productname}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-file-locations.adoc:29
msgid ""
"/srv/pillar:: By default, {productname} does not operate or use this "
"directory directly.  The custom pillar data in this directory is merged with "
"the pillar result created by {productname}.  Use this directory for custom "
"Salt pillar data."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-file-locations.adoc:30
msgid ""
"You can use the [systemitem]``gitfs`` fileserver backend to serve Salt data "
"from git repositories.  For more information, see xref:salt-gitfs.adoc[]."
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-gitfs.adoc:1
#, no-wrap
msgid "The gitfs Fileserver Backend"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:2
msgid ""
"In {productname}, [package]``pygit2`` is the supported Python interface to "
"git.  When [package]``pygit2`` is installed the ``gitfs`` fileserver backend "
"is available and it is a supported feature."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:3
msgid ""
"Configuration options are set in the [path]``/etc/salt/master`` file, or in "
"a separate configuration file in the [path]``/etc/salt/master.d/`` "
"directory.  The basic settings are:"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-gitfs.adoc:4
#, no-wrap
msgid "fileserver_backend"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:5
msgid ""
"List of fileserver backends that the Salt master checks for files in the "
"order they are defined.  Options:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:6
msgid "[literal]``roots``: Files local on the Salt master ({productname} Server)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:7
msgid ""
"[literal]``roots`` is required to keep the product running.  You can only "
"enable [literal]``gitfs`` optionally.  Additionally, {suse} strongly "
"recommends to prefer [literal]``roots`` (local files) over "
"[literal]``gitfs``.  The standard backend."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:8
msgid "[literal]``gitfs``: Files stored in one or more git repositories."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:9
msgid "The repositories are defined with [literal]``gitfs_remotes``."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-gitfs.adoc:11
#, no-wrap
msgid ""
"fileserver_backend:\n"
"  - roots\n"
"  - git\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-gitfs.adoc:12
#, no-wrap
msgid "gitfs_remotes"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:13
msgid ""
"List of git repositories.  ``git://``, ``https://``, ``file://``, or "
"``ssh://`` URLs can be configured.  For SSH remotes, a [command]``scp``-like "
"syntax is also supported; for example: "
"[literal]``gitlab@gitlab.example.com:universe/setup.git``.  Then you can "
"also specify options for credentials, file locations, or branches such as "
"[literal]``pubkey``, [literal]``privkey``, "
"[literal]``root``,[literal]``base``."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-gitfs.adoc:15
#, no-wrap
msgid ""
"gitfs_remotes:\n"
"  - https://example.com/myformulas/formula.git\n"
"  - gitlab@gitlab.example.com:universe/setup.git:\n"
"    - pubkey: /var/lib/salt/.ssh/id_rsa_gitlab.pub\n"
"    - privkey: /var/lib/salt/.ssh/id_rsa_gitlab\n"
"    - root: srv/salt\n"
"    - base: master\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-gitfs.adoc:16
#, no-wrap
msgid "ext_pillar"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:17
msgid ""
"List of external pillar interfaces.  Salt can also serve pillar data from "
"one or more git repositories.  For syntax and options, also see the "
"[literal]``gitfs_remotes`` setting."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-gitfs.adoc:19
#, no-wrap
msgid ""
"ext_pillar:\n"
"  - git:\n"
"    - master gitlab@gitlab.example.com:universe/setup.git:\n"
"      - root: srv/pillar\n"
"      - pubkey: /var/lib/salt/.ssh/id_rsa_gitlab.pub\n"
"      - privkey: /var/lib/salt/.ssh/id_rsa_gitlab\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:20
msgid "For more information, see:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:21
msgid "https://docs.saltstack.com/en/latest/topics/tutorials/gitfs.html"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-gitfs.adoc:22
msgid "https://docs.saltstack.com/en/latest/ref/configuration/master.html"
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-overview.adoc:1
#, no-wrap
msgid "Salt Guide Overview"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-overview.adoc:2
#, no-wrap
msgid "**Updated:** {docdate}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-overview.adoc:3
msgid ""
"Salt is a remote execution engine, configuration management and "
"orchestration system used by {productname} to manage clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-overview.adoc:4
msgid ""
"In {productname}, the Salt master runs on the {productname} Server, allowing "
"you to register and manage Salt clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-overview.adoc:5
msgid "This book is designed to be a primer for using Salt with {productname}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-overview.adoc:6
msgid ""
"For more information about Salt, see the Salt documentation at "
"https://docs.saltstack.com/en/latest/contents.html."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-overview.adoc:7
msgid "The current version of Salt in {productname} is {saltversion}."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-overview.adoc:8
msgid ""
"Throughout the {productname} documentation, we use the term `Salt clients` "
"to refer to Salt machines that are connected to and controlled by the Salt "
"master on the {productname} Server.  This is to clearly differentiate them "
"from traditional clients.  In other documentation, and in some internal "
"references, Salt clients are sometimes referred to as Salt `minions` "
"instead.  This is a difference in terminology only."
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-rate-limiting.adoc:1
#, no-wrap
msgid "Rate Limiting"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:2
msgid ""
"Salt is able to run commands in parallel on a large number of clients.  This "
"can potentially create large amounts of load on your infrastructure.  You "
"can use these rate-limiting parameters to control the load in your "
"environment."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:3
msgid ""
"These parameters are all configured in the [filename]``/etc/rhn/rhn.conf`` "
"configuration file."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-rate-limiting.adoc:4
msgid ""
"Salt commands that are executed from the command line are not subject to "
"these parameters."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-rate-limiting.adoc:5
#, no-wrap
msgid "Batching"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:6
msgid ""
"There are two parameters that control how actions are sent to clients, one "
"for the batch size, and one for the delay."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:7
msgid ""
"When the {productname} Server sends a batch of actions to the target "
"clients, it will send it to the number of clients determined in the batch "
"size parameter.  After the specified delay period, commands will be sent to "
"the next batch of clients.  The number of clients in each subsequent batch "
"is equal to the number of clients that have completed in the previous batch."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:8
msgid ""
"Choosing a lower batch size will reduce system load and parallelism, but "
"might reduce overall performance for processing actions."
msgstr ""

#.  Defaulte is 200 according to large-scale-tuning.adoc
#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:9
msgid ""
"The batch size parameter sets the maximum number of clients that can execute "
"a single action at the same time.  Adjust the "
"[systemitem]``java.salt_batch_size`` parameter.  Defaults to 200."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:10
msgid ""
"Increasing the delay increases the chance that multiple clients will have "
"completed before the next action is issued (more clients are grouped "
"together in subsequent batches), resulting in fewer overall commands, and "
"reducing load."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:11
msgid ""
"The batch delay parameter sets the amount of time, in seconds, to wait after "
"a command from the previous batch is processed before beginning to process "
"the command on the next client.  Adjust the "
"[systemitem]``java.salt_batch_delay`` parameter.  Defaults to 1.0 seconds."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-rate-limiting.adoc:12
#, no-wrap
msgid "Disabling the Salt Mine"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:13
msgid ""
"In older versions, {productname} used a tool called Salt mine to check "
"client availability.  The Salt mine would cause clients to contact the "
"server every hour, which created significant load.  With the introduction of "
"a more efficient mechanism in {productname}{nbsp}3.2, the Salt mine is no "
"longer required.  Instead, the {productname} Server uses Taskomatic to ping "
"only the clients that appear to have been offline for twelve hours or more, "
"with all clients being contacted at least once in every twenty four hour "
"period by default.  You can adjust this by changing the "
"[systemitem]``web.system_checkin_threshold`` parameter in "
"[path]``rhn.conf``.  The value is expressed in days, and the default value "
"is [literal]``1``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:14
msgid ""
"Newly registered Salt clients will have the Salt mine disabled by default.  "
"If the Salt mine is running on your system, you can reduce load by disabling "
"it.  This is especially effective if you have a large number of clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:15
msgid "Disable the Salt mine by running this command on the server:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-rate-limiting.adoc:16
#, no-wrap
msgid "salt '*' state.sls util.mgr_mine_config_clean_up\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:17
msgid ""
"This will restart the clients and generate some Salt events to be processed "
"by the server.  If you have a large number of clients, handling these events "
"could create excessive load.  To avoid this, you can execute the command in "
"batch mode with this command:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-rate-limiting.adoc:18
#, no-wrap
msgid "salt --batch-size 50 '*' state.sls util.mgr_mine_config_clean_up\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-rate-limiting.adoc:19
msgid ""
"You will need to wait for this command to finish executing.  Do not end the "
"process with kbd:[Ctrl+C]."
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-ssh.adoc:1
#, no-wrap
msgid "Salt SSH"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:2
msgid ""
"Salt SSH allows Salt commands and states to be issued directly over SSH.  "
"SSH connections are created on demand, when the server executes an action on "
"a client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:3
msgid ""
"For more information about Salt SSH, see "
"https://docs.saltstack.com/en/latest/topics/ssh/."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:4
#, no-wrap
msgid "SSH Connection Methods"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:5
msgid ""
"In {productname} there are two SSH connection methods, `ssh-push` and "
"`ssh-push-tunnel`.  In both methods the server initiates an SSH connection "
"to the client to execute a Salt call."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:6
msgid ""
"In the `ssh-push` method, the package manager works as normal, and the HTTP "
"or HTTPS connection is directly created."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:7
msgid ""
"In the `ssh-push-tunnel` method, the server creates an HTTP or HTTPS "
"connection through an SSH tunnel.  The HTTP connection initiated by the "
"package manager is redirected through the tunnel using `/etc/hosts` "
"aliasing.  Use this method for in-place firewall environments that block "
"HTTP or HTTPS connections between server and client."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:8
#, no-wrap
msgid "Salt SSH Integration"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:9
msgid "As with all Salt calls, {productname} invokes `salt-ssh` via the `salt-api`."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:10
msgid ""
"Salt SSH relies on a roster to obtain details such as hostname, ports, and "
"the SSH parameters of a client. { {productname} keeps these details in the "
"database and makes them available to Salt by generating a temporary roster "
"file for each Salt SSH call.  The location of the temporary roster file is "
"supplied to `salt-ssh` using the `--roster-file= option`."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:11
#, no-wrap
msgid "Authentication"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:12
msgid ""
"Salt SSH supports both password and key authentication.  {productname} uses "
"both methods:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:13
msgid ""
"Password authentication is used only when bootstrapping.  During the "
"bootstrap step the key of the server is not authorized on the client and "
"therefore a password must be used for a connection to be made.  The password "
"is used transiently in a temporary roster file used for bootstrapping.  This "
"password is not stored."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:14
msgid ""
"All other common Salt calls use key authentication.  During the bootstrap "
"step the SSH key of the server is authorized on the client and added to the "
"client [path]``/.ssh/authorized_keys`` file.  Subsequent calls no longer "
"require a password."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:15
#, no-wrap
msgid "User Account"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:16
msgid ""
"The user for Salt SSH calls made by {productname} is taken from the "
"`ssh_push_sudo_user` setting.  By default, the user is root."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:17
msgid ""
"If the value of `ssh_push_sudo_user` is not root, then the `--sudo` options "
"of `salt-ssh` are used."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:18
#, no-wrap
msgid "HTTP Redirection"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:19
msgid ""
"The `ssh-push-tunnel` method requires traffic to be redirected through an "
"SSH tunnel.  This allows traffic to bypass firewalls blocking a direct "
"connection between the client and the server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:20
msgid "This is achieved by using port 1233 in the repository URL:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:21
#, no-wrap
msgid "https://suma-server:1233/repourl...\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:22
msgid ""
"You can alias the suma-server hostname to `localhost` in "
"[path]``/etc/hosts``:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:23
#, no-wrap
msgid "127.0.0.1       localhost    suma-server\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:24
msgid ""
"The server creates a reverse SSH tunnel that connects `localhost:1233` on "
"the client to `suma-server:443`:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:25
#, no-wrap
msgid "ssh ... -R 1233:suma-server:443\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:26
msgid ""
"This means that the package manager will actually connect to "
"`localhost:1233`, which is then forwarded to `suma-server:443` by the SSH "
"tunnel."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:27
msgid ""
"The package manager can contact the server only if the tunnel is open, which "
"occurs only when the server executes an action on the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:28
msgid ""
"Manual package manager operations that require server connectivity are not "
"possible in this case."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:29
#, no-wrap
msgid "Call Sequence"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:30
msgid "Salt SSH calls run in this sequence:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:31
msgid "Prepare the Salt roster for the call"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:32
msgid ""
"Create remote port forwarding option if the contact method is "
"`ssh-push-tunnel`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:33
msgid "Compute the `ProxyCommand` if the client is connected through a proxy"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:34
msgid "Create Roster content"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:35
msgid "Create a temporary roster file"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:36
msgid "Execute a synchronous `salt-ssh` call using the API"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:37
msgid "Remove the temporary roster file"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:38 modules/salt/pages/salt-ssh.adoc:74
msgid "The roster content contains:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:39 modules/salt/pages/salt-ssh.adoc:75
msgid "`hostname`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:40 modules/salt/pages/salt-ssh.adoc:76
msgid "`user`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:41 modules/salt/pages/salt-ssh.adoc:78
msgid "`port`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:42
msgid "`remote_port_forwards`: The remote port forwarding SSH option"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:43
msgid "`ssh_options`: Other ssh options:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:44
msgid "`ProxyCommand`: If the client connects through a proxy"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:45 modules/salt/pages/salt-ssh.adoc:82
msgid "`timeout`: defaults to 180 seconds"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:46
msgid "`minion_opts`:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:47
msgid "`master`: Set to the minion ID if the contact method is `ssh-push-tunnel`"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:48
#, no-wrap
msgid "Bootstrap Sequence"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:49
msgid ""
"This section describes the sequence of events when clients are registered to "
"a Salt master.  While bootstrapping is a type of Salt SSH call, the sequence "
"differs slightly from regular SSH calls."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:50
msgid ""
"Bootstrapping uses Salt SSH for communication between the master and the "
"client.  This happens for both regular and SSH clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:51
msgid ""
"For a regular Salt client, generate and pre-authorize the Salt key of the "
"client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:52
msgid ""
"For an SSH client, if a proxy was selected, retrieve the SSH public key of "
"the proxy using the ``mgrutil.chain_ssh_cmd`` runner."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:53
msgid ""
"The runner copies the public key of the proxy to the server using SSH.  If "
"needed, it can chain multiple SSH commands to reach the proxy across "
"multiple hops."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:54
msgid "Generate pillar data for bootstrap."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:55
msgid ""
"The pillar data is compiled and stored on the Salt master, and retrieved by "
"the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:56
msgid "Generate the roster for bootstrapping into a temporary file on the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:57
msgid "You can generate the roster using the Salt API, with this command:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:58
#, no-wrap
msgid ""
"salt-ssh --roster-file=<temporary_bootstrap_roster> minion state.apply "
"certs,<bootstrap_state>`\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:59
msgid ""
"For `bootstrap_state`, use `bootstrap` for regular clients or "
"`ssh_bootstrap` for SSH clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:60
msgid ""
"The way the client retrieves the pillar data depends on the contact method "
"you have chosen for your client:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:61
msgid ""
"If you are using the `ssh-push-tunnel` contact method, ensure you have "
"completed the remote port forwarding option."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:62
msgid ""
"If the client connects through a proxy, ensure you have completed the "
"`ProxyCommand` option."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:63
msgid ""
"This depends on your proxy configuration, including how many proxies you "
"need to connect through."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:64
msgid "Pillar data contains:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:65
msgid "mgr_server: The hostname of the Salt master"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:66
msgid "mgr_origin_server: The hostname of the {productname} Server"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:67
msgid "minion_id: The hostname of the client to bootstrap"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:68
msgid "contact_method: The connection type"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:69
msgid "mgr_sudo_user: The user for `salt-ssh`"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:70
msgid "activation_key: If selected"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:71
msgid "minion_pub: The pre-authorized public client key"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:72
msgid "minion_pem: The pre-authorized private client key"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:73
msgid ""
"proxy_pub_key: The public SSH key that was retrieved from the proxy if the "
"target is an SSH client and a proxy was selected"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:79
msgid "`remote_port_forwards`: the remote port forwarding SSH option"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:80
msgid "`ssh_options`: other SSH options:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:81
msgid "`ProxyCommand` if the client connects through a proxy"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:83
msgid "This image provides an overview of the Salt SSH bootstrap process."
msgstr ""

#. type: Block title
#: modules/salt/pages/salt-ssh.adoc:84
#, no-wrap
msgid "Salt SSH Bootstrap Process"
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:85
#, no-wrap
msgid "salt-ssh-bootstrap-process.png"
msgstr ""

#.  This image needs some exposition, at the very least. --LKB 2020-06-16
#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:86
#, no-wrap
msgid "Proxy Support"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:87
msgid ""
"Salt SSH works with {productname} Proxy by chaining the SSH connection from "
"one server or proxy to the next.  This is also known as a multi-hop or "
"multi-gateway SSH connection."
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:88
#, no-wrap
msgid "salt-ssh-proxy-multi-hop.png"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:89
msgid ""
"{productname} uses `ProxyCommand` to redirect SSH connections through "
"proxies.  This options invokes an arbitrary command that is expected to "
"connect to the SSH port on the target host.  The SSH process uses standard "
"input and output of the command to communicate with the remote SSH daemon."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:90
msgid ""
"`ProxyCommand` replaces a TCP/IP connection.  It does not perform any "
"authorization or encryption.  Its role is simply to create a byte stream to "
"the remote SSH daemon port."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:91
msgid ""
"This image depicts a client connecting to a server that is behind a "
"gateway.  In this example `netcat` is used to pipe port 22 of the target "
"host into the SSH standard input/output:"
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:92
#, no-wrap
msgid "salt-ssh-proxycommand.png"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:93
msgid "The Salt SSH calls run in this sequence when a proxy is in use:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:94
msgid "{productname} initiates the SSH connection."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:95
msgid ""
"`ProxyCommand` uses SSH to create a connection from the server to the client "
"through the proxies."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:96
msgid "This example uses `ProxyCommand` with two proxies and the `ssh-push` method:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:97
#, no-wrap
msgid ""
"# Connect the server to the first proxy:\n"
"/usr/bin/ssh -i /srv/susemanager/salt/salt_ssh/mgr_ssh_id -o "
"StrictHostKeyChecking=no -o User=mgrsshtunnel  proxy1\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:98
#, no-wrap
msgid ""
"# Connect the first proxy to the second, and forward standard input/output "
"on the client to client:22 using the `-W` option:\n"
"/usr/bin/ssh -i /var/lib/spacewalk/mgrsshtunnel/.ssh/id_susemanager_ssh_push "
"-o StrictHostKeyChecking=no -o User=mgrsshtunnel -W client:22  proxy2\n"
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:99
#, no-wrap
msgid "salt-ssh-push-push-plain-sequence.png"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:100
msgid ""
"This example uses `ProxyCommand` with two proxies and the `ssh-push-tunnel` "
"method:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:101
#, no-wrap
msgid ""
"# Connect the server to the first proxy:\n"
"/usr/bin/ssh -i /srv/susemanager/salt/salt_ssh/mgr_ssh_id -o "
"User=mgrsshtunnel  proxy1\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:102
#, no-wrap
msgid ""
"# Connect the first proxy to the second:\n"
"/usr/bin/ssh -i /home/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o "
"User=mgrsshtunnel  proxy2\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:103
#, no-wrap
msgid ""
"# Connect the second proxy to the client and open an reverse tunnel (-R "
"1233:proxy2:443) from the client to the HTTPS port on the second proxy:\n"
"/usr/bin/ssh -i /home/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o User=root "
"-R 1233:proxy2:443 client\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-ssh.adoc:104
#, no-wrap
msgid ""
"# Connect the client to itself and forward the standard input/output of the "
"server to the SSH port of the client (-W client:22).\n"
"This is equivalent to `ssh ... proxy2 netcat client 22`` and is needed "
"because SSH does not allow both the reverse tunnel (-R 1233:proxy2:443) and "
"the standard input/output forward (-W client:22) in the same command.\n"
"/usr/bin/ssh -i /root/.ssh/mgr_own_id -W client:22 -o User=root client\n"
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:105
#, no-wrap
msgid "salt-ssh-push-push-tunnel-sequence.png"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:106
#, no-wrap
msgid "Users and SSH Key Management"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:107
msgid ""
"To connect to a proxy, the parent server or proxy uses a specific user "
"called `mgrsshtunnel`.  When `mgrsshtunnel` connects, the SSH configuration "
"of the proxy will force the execution of "
"``/usr/sbin/mgr-proxy-ssh-force-cmd``.  This is a simple shell script that "
"allows only the execution of `scp`, `ssh`, or `cat` commands."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:108
msgid ""
"The connection to the proxy or client is authorized using SSH keys in this "
"sequence:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:109
msgid ""
"The server connects to the client and to the first proxy using the key in "
"``/srv/susemanager/salt/salt_ssh/mgr_ssh_id`."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:110
msgid ""
"Each proxy has its own key pair in "
"``/home/mgrsshtunnel/.ssh/id_susemanager_ssh_push`."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:111
msgid "Each proxy authorizes the key of the parent proxy or server."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:112
msgid "The client authorizes its own key."
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:113
#, no-wrap
msgid "salt-ssh-push-ssh-keys.png"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:114
#, no-wrap
msgid "Repository Access with a Proxy"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:115
msgid ""
"When {productname} connects to a repository using a proxy, it can use either "
"`ssh-push` or `ssh-push-tunnel`."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:116
msgid ""
"In both methods the client connects to the proxy to retrieve package and "
"repository information."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:117
msgid ""
"In the `ssh-push` method, the package manager connects directly to the proxy "
"using HTTP or HTTPS.  This works in cases where there is no firewall between "
"the client and the proxy that blocks HTTP connections initiated by the "
"client."
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:118
#, no-wrap
msgid "salt-ssh-push-repo-access.png"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:119
msgid ""
"In the `ssh-push-tunnel` method, the HTTP connection to the proxy is "
"redirected through a reverse SSH tunnel."
msgstr ""

#. type: Target for macro image
#: modules/salt/pages/salt-ssh.adoc:120
#, no-wrap
msgid "salt-ssh-push-tunnel-repo-access.png"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-ssh.adoc:121
#, no-wrap
msgid "Proxy Setup"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:122
msgid ""
"When the `spacewalk-proxy` package is installed on the proxy, the "
"`mgrsshtunnel` user is created."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:123
msgid ""
"The initial configuration with ``configure-proxy.sh`` occurs using this "
"sequence:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:124
msgid "An SSH key pair is generated, or an existing keypair is imported."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:125
msgid ""
"The SSH key of the parent server or proxy is retrieved to authorize it on "
"the proxy."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:126
msgid ""
"The ``ssh`` daemon on the proxy is configured to restrict the "
"``mgrsshtunnel`` user."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:127
msgid ""
"This is done by the ``mgr-proxy-ssh-push-init`` script, which is called from "
"``configure-proxy.sh``.  It does not have to be manually invoked."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:128
msgid ""
"The parent key is retrieved by calling an HTTPS endpoint on the parent "
"server or proxy.  The first endpoint tried is "
"``https://$PARENT/pub/id_susemanager_ssh_push.pub``.  If the parent is a "
"proxy then this will return the public SSH key of the proxy."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:129
msgid ""
"If a 404 error is received from that endpoint, then the parent is assumed to "
"be a server not a proxy, and "
"``https://$PARENT/rhn/manager/download/saltssh/pubkey`` is tried instead."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:130
msgid ""
"If an SSH key exists at ``/srv/susemanager/salt/salt_ssh/mgr_ssh_id.pub`` on "
"the server it is returned."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-ssh.adoc:131
msgid ""
"If the public key does not exist because ``salt-ssh`` has not been invoked "
"yet, a key will be generates by calling the ``mgrutil.ssh_keygen`` runner."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-ssh.adoc:132
msgid ""
"Salt SSH generates a keypair the first time it is invoked with "
"``/srv/susemanager/salt/salt_ssh/mgr_ssh_id``.  The sequence in this section "
"is needed if a proxy is configured before Salt SSH was invoked for the first "
"time."
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-states.adoc:1
#, no-wrap
msgid "Salt States and Pillars"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:2
msgid ""
"States are configuration templates.  They allow you to describe what each of "
"your systems should look like, including the applications and services that "
"are installed and running.  Salt state files are referred to as SLS (SaLt "
"State) files."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:3
msgid ""
"States are applied to the target systems by matching relevant state data to "
"clients.  The state data comes from {productname} in the form of package and "
"custom states."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:4
#: modules/salt/pages/salt-terminology.adoc:33
msgid ""
"For more information on states, see "
"https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:5
msgid ""
"You can target clients at three specific levels of hierarchy and priority: "
"individual clients, system groups, and organization.  Individual clients "
"have priority over groups, and groups have priority over the organization."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:7
msgid "The Organization requires that version 1 is installed."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:8
msgid "All clients are part of the same Organization."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:9
msgid "Group A requires that version 2 is installed."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:10
msgid "Client1, Client2, and Client3 are part of Group A."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:11
msgid "Group B requires any version installed."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:12
msgid "Client4 is part of Group B."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:13
msgid "Leading to these possible scenarios:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:14
msgid "Client1 wants package removed, package is removed (Client Level)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:15
msgid "Client2 wants version 2, gets version 2 (Client Level)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:16
msgid "Client3 wants any version, gets version 2 (Group Level)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:17
msgid "Client4 wants any version, gets version 1 (Organization Level)"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-states.adoc:18
#, no-wrap
msgid "Group States"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:19
msgid ""
"Pillar data can be used to perform bulk actions, like applying all assigned "
"states to clients within the group.  This section contains some examples of "
"bulk actions that you can take using group states."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:20
msgid ""
"To perform these actions, you will need to determine the ID of the group "
"that you want to manipulate.  You can determine the Group ID by using the "
"[command]``spacecmd`` command:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:21
#, no-wrap
msgid "spacecmd group_details\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:22
msgid "These examples use an example Group ID of [systemitem]``GID``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:23
msgid "To apply all states assigned to the group:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:24
#, no-wrap
msgid "salt -I 'group_ids:GID' state.apply custom.group_GID\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:25
msgid "To apply any state (whether or not it is assigned to the group):"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:26
#, no-wrap
msgid "salt -I 'group_ids:GID' state.apply ``state``\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:27
msgid "To apply a custom state:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:28
#, no-wrap
msgid "salt -I 'group_ids:2130' state.apply manager_org_1.``customstate``\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:29
msgid "Apply the highstate to all clients in the group:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:30
#, no-wrap
msgid "salt -I 'group_ids:GID' state.apply\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-states.adoc:31
#, no-wrap
msgid "Salt Pillars"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:32
msgid ""
"{productname} exposes a small amount of internal data as pillars which can "
"be used with custom states.  Pillars are created on the {productname} "
"Server, and contain information about a client or group of clients.  Pillars "
"are useful for sensitive data, configuration of clients, variables, and any "
"arbitrary data."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:33
msgid ""
"Pillars are managed either automatically by {productname}, or manually by "
"the user."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:34
#: modules/salt/pages/salt-terminology.adoc:29
msgid ""
"For more information on pillars, see "
"https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:35
msgid ""
"To avoid hard-coding organization IDs within {sles} files, a pillar entry is "
"added for each organization:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:36
#, no-wrap
msgid "org-files-dir: relative_path_to_files\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:37
msgid ""
"The specified file is available for all clients which belong to the "
"organization."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:38
msgid "This is an example of a Pillar located at [path]``/etc/motd``:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:39
#, no-wrap
msgid ""
"file.managed:\n"
"    - source: salt://{{ pillar['org-files-dir']}}/motd\n"
"    - user: root\n"
"    - group: root\n"
"    - mode: 644\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-states.adoc:40
#, no-wrap
msgid "Download Endpoint"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:41
msgid ""
"By default, {productname} assumes that the download endpoint to use is the "
"FQDN of the {productname} Server or Proxy.  However, there are some cases "
"where you might like to use a different FQDN as the download endpoint.  The "
"most common example is if you need to use load balancing, caching proxies, "
"or in environments with complicated networking requirements."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:42
msgid ""
"To change the package download endpoint, you can manually adjust three Salt "
"pillars:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:43
msgid ""
"[systemitem]``pkg_download_point_protocol``, defaults to "
"[systemitem]``https``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:44
msgid ""
"[systemitem]``pkg_download_point_host``, defaults to the FQDN of the "
"{productname} Server (or Proxy, if in use)."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:45
msgid "[systemitem]``pkg_download_point_port``, defaults to [systemitem]``443``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:46
msgid ""
"If you do not adjust these pillars directly, {productname} will fall back to "
"the default values."
msgstr ""

#. type: Block title
#: modules/salt/pages/salt-states.adoc:47
#, no-wrap
msgid "Procedure: Changing the Package Download Endpoint Pillar"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:48
msgid ""
"Navigate to [path]``/srv/pillar/`` and create a file called "
"[filename]``top.sls`` with these contents:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:49
#, no-wrap
msgid ""
"base:\n"
"  '*':\n"
"    - pkg_download_points\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:50
msgid ""
"This example directs Salt to look at the "
"[filename]``pkg_download_points.sls`` file to determine the base URL to "
"use.  You can adjust this file to target different clients or groups, "
"depending on your environment."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:51
msgid ""
"Remain in [path]``/srv/pillar/`` and create a file called "
"[filename]``pkg_download_points.sls`` with the base URLs you want to use."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:53
#, no-wrap
msgid ""
"pkg_download_point_protocol: http\n"
"pkg_download_point_host: example.com\n"
"pkg_download_point_port: 444\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:54
msgid ""
"OPTIONAL: If you want to use external pillars, for example Group IDs, open "
"the master configuration file and set the [systemitem]``ext_pillar_first`` "
"parameter to [systemitem]``true``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:55
msgid "You can then use Group IDs to set conditional values, for example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:56
#, no-wrap
msgid ""
"{% if pillar['group_ids'] is defined and 8 in pillar['group_ids'] %}\n"
"  pkg_download_point_protocol: http\n"
"  pkg_download_point_host: example.com\n"
"  pkg_download_point_port: 444\n"
"{% else %}\n"
"  pkg_download_point_protocol: ftp\n"
"  pkg_download_point_host: example.com\n"
"  pkg_download_point_port: 445\n"
"{%- endif %}\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-states.adoc:57
msgid "OPTIONAL: You can also use grains to set conditional values, for example:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-states.adoc:58
#, no-wrap
msgid ""
"{% if grains['fqdn'] == 'client1.example.com' %}\n"
"    pkg_download_point: example1.com\n"
"{% elif grains['fqdn'] == 'client2.example.com'' %}\n"
"    pkg_download_point: example2.com\n"
"{% else %}\n"
"    pkg_download_point: example.com\n"
"{% endif %}\n"
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-terminology.adoc:1
#, no-wrap
msgid "Terminology"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:2
#, no-wrap
msgid "Beacon"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:3
msgid ""
"Beacons allow you to use the Salt event system to monitor non-Salt "
"processes.  Clients can use beacons to connect to various system processes "
"for constant monitoring.  When a monitored activity occurs, an event is sent "
"on the Salt event bus that can then trigger a reactor."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-terminology.adoc:4
msgid ""
"To use beacons on {sles} Salt clients, install the "
"[package]``python-pyinotify`` package.  For {rhel} systems, install the "
"[package]``python-inotify`` package."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:5
msgid ""
"For more information on beacons, see "
"https://docs.saltstack.com/en/latest/topics/beacons/"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:6
#, no-wrap
msgid "Broker"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:7
msgid ""
"The Salt broker allows clients to pass commands to each other.  The broker "
"acts like a switch, therefore peer communication will only work for clients "
"on the same network, or connected to the same proxy."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:8
msgid ""
"For more information on Salt and peer communication, see "
"https://docs.saltstack.com/en/latest/ref/peer.html."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:9
#, no-wrap
msgid "Environment"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:10
msgid ""
"{productname} implements Salt with a single environment.  Multiple Salt "
"environments are not supported."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:12
msgid ""
"Formulas are collections of Salt States that contain generic parameter "
"fields.  Formulas are used within {productname} to assist with configuring "
"Salt clients.  Some formulas have extensive configuration options, and use "
"forms to help organize them in the {productname} {webui}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:13
msgid "For more information about formulas, see xref:salt:formulas-intro.adoc[]."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:14
#, no-wrap
msgid "Grains"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:15
msgid ""
"Grains provide information about the hardware of a client.  This includes "
"the operating system, IP addresses, network interfaces, and memory.  When "
"you run a Salt command any modules and functions are run locally from the "
"system being called.  Salt modules are stored on clients and the "
"{productname} Server within the "
"[path]``/usr/lib/python*/site-packages/salt/`` directory."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:16
msgid ""
"For more information on grains, see "
"https://docs.saltstack.com/en/latest/topics/grains/."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:17
#, no-wrap
msgid "Highstate"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:18
msgid ""
"This term is used when you apply all outstanding states to all targeted "
"clients at the same time.  The highstate must be applied when doing changes "
"to systems, including enabling and disabling formulas."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:19
#, no-wrap
msgid "Key Fingerprints"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:20
msgid ""
"Key fingerprints are exchanged between the {productname} Server and Salt "
"clients to verify the identity of the server and the client.  This prevents "
"Salt clients from connecting to the wrong server.  You can see the "
"fingerprints of your Salt clients by navigating to menu:Salt[Keys]."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:21
#, no-wrap
msgid "Master"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:22
msgid ""
"The Salt master issues commands to its attached clients.  In {productname}, "
"the Salt master must be the {productname} Server."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:23
#, no-wrap
msgid "Minions"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:24
msgid ""
"Salt clients that are connected to and controlled by the Salt master on the "
"{productname} Server.  In {productname}, these are referred to as Salt "
"clients, in order to clearly differentiate them from traditional clients.  "
"This is a difference in terminology only."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:25
#, no-wrap
msgid "Modules"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:26
msgid ""
"Functions within Salt are stored in modules.  There are many types of Salt "
"modules, including state and execution modules.  For a complete list of "
"available Salt modules, see "
"https://docs.saltstack.com/en/latest/ref/index.html.  Alternatively, you can "
"write your own Salt modules using Python."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:27
#, no-wrap
msgid "Pillars"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:28
msgid ""
"Pillars are created on the {productname} Server.  They contain information "
"about a client or group of clients.  Pillars allow you to send confidential "
"information to a targeted client or group of clients.  Pillars are useful "
"for sensitive data, configuration of clients, variables, and any arbitrary "
"data."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-terminology.adoc:30
#, no-wrap
msgid "States"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:31
msgid ""
"States are configuration templates.  They allow you to describe what each of "
"your systems should look like, including the applications and services that "
"are installed and running.  States are applied to the target client.  This "
"automates the process of bringing a large number of systems into a known "
"state, and then maintaining them."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/salt-terminology.adoc:32
msgid ""
"Do not update the [package]``salt`` package using states.  Update all other "
"system packages using states.  You can then update the [package]``salt`` "
"package from the {productname} {webui} as a separate step."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-terminology.adoc:34
msgid ""
"For more Salt terminology, see "
"https://docs.saltstack.com/en/latest/glossary.html."
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-timeouts.adoc:1
#, no-wrap
msgid "Salt timeouts"
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-timeouts.adoc:2
#, no-wrap
msgid "General Salt timeouts"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:3
msgid ""
"Salt features two timeout parameters called `timeout` and "
"`gather_job_timeout` that are relevant during the execution of Salt commands "
"and jobs--it does not matter whether they are triggered using the command "
"line interface or API.  These two parameters are explained in the following "
"article."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:4
msgid "This is a normal workflow when all clients are well reachable:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:5
msgid "A salt command or job is executed:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-timeouts.adoc:6
#, no-wrap
msgid "salt '*' test.ping\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:7
msgid ""
"Salt master publishes the job with the targeted clients into the Salt PUB "
"channel."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:8
msgid "Clients take that job and start working on it."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:9
msgid ""
"Salt master is looking at the Salt RET channel to gather responses from the "
"clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:10
msgid ""
"If Salt master gets all responses from targeted clients, then everything is "
"completed and Salt master will return a response containing all the client "
"responses."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:11
msgid ""
"If some of the clients are down during this process, the workflow continues "
"as follows:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:12
msgid ""
"If `timeout` is reached before getting all expected responses from the "
"clients, then Salt master would trigger an aditional job (a Salt "
"[command]``find_job`` job) targeting only pending clients to check whether "
"the job is already running on the client."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:13
msgid "Now `gather_job_timeout` is evaluated. A new counter is now triggered."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:14
msgid ""
"If this new [command]``find_job`` job responds that the original job is "
"actually running on the client, then Salt master will wait for that client's "
"response for another `gather_job_timeout` interval before issuing the next "
"[command]``find_job`` job."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:15
msgid ""
"In case of reaching `gather_job_timeout` without having any response from "
"the client (neither for the initial [command]``test.ping`` nor for the "
"[command]``find_job`` job), Salt master will return with only the gathered "
"responses from the responding clients."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:16
msgid ""
"By default, {productname} globally sets `timeout` and `gather_job_timeout` "
"to 120 seconds.  So, in the worst case, a Salt call targeting unreachable "
"clients will end up _with 240 seconds of waiting_ until getting a response."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:17
msgid ""
"You can configure these values differently by creating a "
"[filename]``/etc/salt/master.d/custom.conf`` configuration file according to "
"syntax in [filename]``/etc/salt/master.conf``."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-timeouts.adoc:18
#, no-wrap
msgid "Presence Ping Timeouts"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:19
msgid ""
"Before Actions are executed on Salt clients, whether they scheduled via the "
"Web UI or the API, {productname} performs a \"presence ping\" command to "
"ensure the respective `salt-minion` processes are active and able to "
"respond. Then, a ping gather job runs on the Salt master to handle the "
"incoming pings from the clients. Actual commands will begin only after all "
"clients have either responded to the ping, or timed out."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:20
msgid ""
"The presence ping is an ordinary Salt command, but is not subject to the "
"same timeout parameters as all other Salt commands "
"(`timeout`/`gather_job_timeout`, described above). Rather, it has its own "
"parameters (`presence_ping_timeout`/`presence_ping_gather_job_timeout`) that "
"can be set in [filename]``/etc/rhn/rhn.conf``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:21
msgid ""
"To allow for quicker detection of unresponsive clients, the timeout values "
"for presence pings are by default significantly shorter than the general "
"defaults. You can configure the presence ping parameters in "
"[filename]``/etc/rhn/rhn.conf``, however the default values should be "
"sufficient in most cases."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:22
msgid ""
"A lower total presence ping timeout value will increase the chance of false "
"negatives.  In some cases, a client might be marked as non-responding, when "
"it is responding but did not respond quickly enough.  Additionally, setting "
"this total presence ping timeout value too low could result in a client "
"hanging at the boot screen.  A higher total presence ping timeout will "
"increase the accuracy of the test, as even slow clients will respond to the "
"presence ping before timing out.  Additionally, a higher presence ping "
"timeout could limit throughput if you are targeting a large number of "
"clients, when some of them are slow."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:23
msgid ""
"If a client does not reply to a ping within the allocated time, it is marked "
"as [systemitem]``not available``, and is excluded from the command.  The "
"{webui} shows a [systemitem]``minion is down or could not be contacted`` "
"message in this case."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:24
msgid ""
"The presence ping timeout parameter changes the timeout setting for the "
"presence ping, in seconds.  Adjust the "
"[systemitem]``java.salt_presence_ping_timeout`` parameter.  Defaults to 4 "
"seconds."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:25
msgid ""
"The presence ping gather job parameter changes the timeout setting for "
"gathering the presence ping, in seconds.  Adjust the "
"[systemitem]``java.salt_presence_ping_gather_job_timeout`` parameter.  "
"Defaults to 1 second."
msgstr ""

#. type: Title ==
#: modules/salt/pages/salt-timeouts.adoc:26
#, no-wrap
msgid "Salt SSH Clients (SSH Push)"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:27
msgid ""
"Salt SSH clients are slightly different than regular clients (zeromq). Salt "
"SSH clients do not use Salt PUB/RET channels but a wrapper Salt command "
"inside of an SSH call.  Salt `timeout` and `gather_job_timeout` are not "
"playing a role here."
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-timeouts.adoc:28
msgid ""
"{productname} defines a timeout for SSH connections in "
"[path]``/etc/rhn/rhn.conf``:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-timeouts.adoc:29
#, no-wrap
msgid "# salt_ssh_connect_timeout = 180\n"
msgstr ""

#. type: Title =
#: modules/salt/pages/salt-useful-commands.adoc:1
#, no-wrap
msgid "Often Used Salt Commands"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:2
msgid ""
"This section contains the most commonly used Salt commands.  For a complete "
"list of available Salt commands, see "
"https://docs.saltstack.com/en/latest/ref/cli/index.html."
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-useful-commands.adoc:3
#, no-wrap
msgid "salt-run"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:4
msgid "Display all clients that are running:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:5
#, no-wrap
msgid "salt-run manage.up\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:6
msgid "Display all clients that are not running:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:7
#, no-wrap
msgid "salt-run manage.down\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:8
msgid "Display the current status of all Salt clients:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:9
#, no-wrap
msgid "salt-run manage.status\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:10
msgid ""
"Check the version of Salt running on the {productname} Server and active "
"clients:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:11
#, no-wrap
msgid "salt-run manage.versions\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-useful-commands.adoc:12
#, no-wrap
msgid "salt-cp"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:13
msgid "Copy a file to a client or set of clients:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:14
#, no-wrap
msgid "salt-cp '*' foo.conf /root\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-useful-commands.adoc:15
#, no-wrap
msgid "salt-key -l"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:16
msgid "List public keys:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:17
#, no-wrap
msgid "salt-key -l all\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-useful-commands.adoc:18
#, no-wrap
msgid "salt-key -a my-minion"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:19
msgid "Accept pending key for a minion:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:20
#, no-wrap
msgid "salt-key -a my-minion\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-useful-commands.adoc:21
#, no-wrap
msgid "salt-key -A"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:22
msgid "Accept all pending keys:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:23
#, no-wrap
msgid "salt-key -A\n"
msgstr ""

#. type: Labeled list
#: modules/salt/pages/salt-useful-commands.adoc:24
#, no-wrap
msgid "salt grains"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:25
msgid "List all available grains:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/salt-useful-commands.adoc:27
msgid "List collected grain system data:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/salt-useful-commands.adoc:28
#, no-wrap
msgid "salt '*' grains.items\n"
msgstr ""

#. type: Title =
#: modules/salt/pages/yomi.adoc:1
#, no-wrap
msgid "Install with Yomi"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:2
msgid ""
"Yomi (yet one more installer) is an installer for {suse} and openSUSE "
"operating systems.  Yomi is designed as a Salt state, and can be used for "
"installing {suse} operating systems on new systems."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:3
msgid ""
"In {productname}, Yomi can be used as part of provisioning new clients, as "
"an alternative to AutoYaST."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:4
msgid "Yomi consists of two components:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:5
msgid ""
"The Yomi formula, which contains the Salt states and modules required to "
"perform the installation."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:6
msgid ""
"The operating system image, which includes the `pre-configured "
"``salt-minion`` service."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:7
msgid ""
"Both components can be used independently of {productname}, or integrated "
"with it.  This section describes how to use it with {productname}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:8
msgid ""
"For more information about using Yomi independently, see "
"https://github.com/openSUSE/yomi."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:9
msgid ""
"For build assets, see "
"https://build.opensuse.org/project/show/systemsmanagement:yomi."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:10
msgid "To use Yomi for installing a client operating system, follow this process:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:11
msgid "Install the ``yomi-formula`` package."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:12
msgid "Prepare the Salt pillar for the new installation."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:13
msgid "Boot the new client using the PXE boot image for Yomi."
msgstr ""

#. type: delimited block =
#: modules/salt/pages/yomi.adoc:14
msgid ""
"To use Yomi with {productname}, ensure you have enough available memory.  To "
"boot from USB or DVD image, you need at least 512{nbsp}MB.  To boot from a "
"PXE server, you need at least 2{nbsp}GB."
msgstr ""

#. type: Title ==
#: modules/salt/pages/yomi.adoc:15
#, no-wrap
msgid "Install the Yomi Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:16
msgid ""
"Before you begin, you need to install the Yomi formula, which is available "
"as a package in {productname}."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:17
msgid ""
"The ``yomi-formula`` package contains the Salt states and modules that "
"describe the Yomi state, and the formulas with forms to create the pillar.  "
"It also contains documentation about the different sections of the pillar, "
"and some examples about how to parameterize installations based on openSUSE, "
"MicroOS, or SLE."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:18
msgid "The formula package performs these actions:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:19
msgid ""
"Adds a new configuration file called ``yomi-formula.conf`` in the "
"[path]``/etc/salt/master.d/`` directory.  This configuration file defines "
"the Python module and Salt states required by Yomi."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:20
msgid ""
"Installs the Yomi Salt states in the "
"[path]``/usr/share/salt-formulas/states/`` directory."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:21
msgid ""
"Provides some example configuration files in the [path]``/usr/share/yomi/`` "
"directory."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:22
msgid ""
"Installs the required forms and sub-forms in the "
"[path]``/usr/share/salt-formulas/metadata/`` directory."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:23
msgid ""
"Provides some pillar examples in the [path]``/usr/share/yomi/pillar/`` "
"directory."
msgstr ""

#. type: Block title
#: modules/salt/pages/yomi.adoc:24
#, no-wrap
msgid "Procedure: Installing the Yomi Formula"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:29
msgid ""
"For more information about the Yomi formula, see "
"xref:salt:formula-yomi.adoc[]"
msgstr ""

#. type: Title ==
#: modules/salt/pages/yomi.adoc:30
#, no-wrap
msgid "Install the PXE Image"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:31
msgid ""
"To provision a new client, you need an operating system image to boot from.  "
"You can use any image that contains a ``salt-minion`` service enabled, "
"together with a minimal set of tools that are required during the "
"installation, for example ``parted`` or `btrfstools``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:32
msgid ""
"Yomi provides an already prepared image, based on openSUSE Tumbleweed, "
"openSUSE Leap (for {uyuni}), or SLE (for {susemgr}).  For {productname}, the "
"image is packaged as an RPM.  This is done in a similar way to how "
"``pxe-default-image`` is distributed."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:33
msgid ""
"The package installs a standard PXE OEM image generated by Kiwi, the initial "
"kernel and initrd in the [path]``/srv/pxe-yomi-image/`` directory, and the "
"second stage kernel, initrd and image in the "
"[path]``/srv/pxe-yomi-image/image`` directory."
msgstr ""

#. type: Block title
#: modules/salt/pages/yomi.adoc:34
#, no-wrap
msgid "Procedure: Installing the PXE Image"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:35 modules/salt/pages/yomi.adoc:37
msgid ""
"On the {productname} Server, at the command prompt, as root, install the "
"``pxe-yomi-image`` service:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:36
#, no-wrap
msgid "zypper in pxe-yomi-image-sle15\n"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:38
#, no-wrap
msgid "zypper in pxe-yomi-image-opensuse15\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:39
msgid "When you have the package installed, you can register Yomi in Cobbler."
msgstr ""

#. type: Title ==
#: modules/salt/pages/yomi.adoc:40
#, no-wrap
msgid "Register Yomi in Cobbler"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:41
msgid ""
"{productname} uses Cobbler to manage the PXE boot service, so you will need "
"to register the image in Cobbler."
msgstr ""

#. type: Block title
#: modules/salt/pages/yomi.adoc:42
#, no-wrap
msgid "Procedure: Registering the Yomi Image in Cobbler"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:43
msgid ""
"On the {productname} Server, at the command prompt, as root, create a "
"directory for the Yomi image:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:44
#, no-wrap
msgid "mkdir /srv/tftpboot/pxe-yomi-image\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:45
msgid ""
"Define a distribution in Cobbler, including the path to install the second "
"stage kernel and initrd, the location of the full image, and any further "
"kernel options."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:46
msgid ""
"Adjust this command to include the correct version of the product, and the "
"TFTP server address:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:47
#, no-wrap
msgid ""
"cobbler distro add \\\n"
"  --name=pxe-yomi-image \\\n"
"  --kernel=/srv/pxe-yomi-image/linux \\\n"
"  --initrd=/srv/pxe-yomi-image/initrd \\\n"
"  "
"--boot-files='/srv/tftpboot/pxe-yomi-image/image.initrd=/srv/pxe-yomi-image/image/pxe-yomi-image-opensuse15.x86_64-1.0.0.initrd "
"/srv/tftpboot/pxe-yomi-image/image.kernel=/srv/pxe-yomi-image/image/pxe-yomi-image-opensuse15.x86_64-1.0.0.kernel "
"/srv/tftpboot/pxe-yomi-image/image.md5=/srv/pxe-yomi-image/image/pxe-yomi-image-opensuse15.x86_64-1.0.0.md5 "
"/srv/tftpboot/pxe-yomi-image/image.config.bootoptions=/srv/pxe-yomi-image/image/pxe-yomi-image-opensuse15-x86_64-1.0.0.config.bootoptions "
"/srv/tftpboot/pxe-yomi-image/image.xz=/srv/pxe-yomi-image/image/pxe-yomi-image-opensuse15.x86_64-1.0.0.xz' "
"\\\n"
"  --kernel-options='rd.kiwi.install.pxe "
"rd.kiwi.install.image=tftp://server-address/pxe-yomi-image/image.xz "
"rd.kiwi.ramdisk ramdisk_size=2097152 net.ifnames=1'\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:48
msgid ""
"By default, the ``salt-minion`` service in ``pxe-yomi-image`` is configured "
"to find the Salt master under the ``salt`` address.  If the DNS server is "
"not able to resolve this address, you need to adjust the ``kernel-options`` "
"parameter from the Cobbler command that register the distribution, and add a "
"new kernel command line of ``master=master_address``.  This will override "
"the default configuration for the ``salt-minion``."
msgstr ""

#. type: Block title
#: modules/salt/pages/yomi.adoc:49
#, no-wrap
msgid "Procedure: Registering the Yomi Profile in Cobbler"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:50
msgid ""
"On the {productname} Server, at the command prompt, as root, define a "
"profile in Cobbler based on the image."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:51
#, no-wrap
msgid ""
"cobbler profile add \\\n"
"  --name pxe-yomi-profile \\\n"
"  --distro=pxe-yomi-image\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:52
msgid "OPTIONAL: Create a system in Cobbler."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:53
msgid ""
"If you know the MAC address for the new client to be provisioned, you can "
"have it boot directly from the Yomi image."
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:54
#, no-wrap
msgid ""
"cobbler system add \\\n"
"   --name=yomi \\\n"
"   --mac=00:11:22:33:44:55 \\\n"
"   --profile=pxe-yomi-profile\n"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:55
msgid "When the new node has been provisioned, remove the temporary Cobbler system:"
msgstr ""

#. type: delimited block -
#: modules/salt/pages/yomi.adoc:56
#, no-wrap
msgid "cobbler system remove --name=yomi\n"
msgstr ""

#. type: Title ==
#: modules/salt/pages/yomi.adoc:57
#, no-wrap
msgid "Example Salt Pillar Preparation"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:58
msgid ""
"The parameters of the new installation are defined with a Salt pillar.  The "
"pillar includes parameters that the Yomi state requires during the "
"installation, including the partitions, file systems, repositories, packages "
"installed, and services enabled."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:59
msgid ""
"The pillar is defined using the formulas with forms.  In this example, we "
"prepare the pillar for a minimal openSUSE Tumbleweed installation.  You can "
"find examples for MicroOS or SLES in the example directory "
"[path]``/usr/share/yomi/pillar/``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:60
msgid ""
"To begin, boot the client that you want to provision using the Yomi PXE boot "
"image, using the Cobbler procedures described earlier in this section."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:61
msgid ""
"When the ``salt-minion`` service is running on the new client, accept the "
"key by navigating to menu:Salt[Keys].  When the key is accepted, you can "
"view and manage the client by navigating to menu:Systems[Overview].  "
"Navigate to the [guimenu]``Formulas`` tab, and add all the Yomi Installer "
"formulas to the client.  When you have added all the formulas, complete the "
"forms and sub-forms.  This section outlines each form and provides example "
"settings for a minimal installation.  For a detailed explanation of every "
"option, see xref:salt:formula-yomi.adoc[]."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:63
msgid ""
"The Yomi form contains some general configuration options.  For example, the "
"keyboard language and layout, the locale information, and the option to "
"perform a full reset of the system after provisioning."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:64
msgid "For this example, set the [parameter]``Reboot`` parameter to ``yes``."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:66
msgid ""
"This sub-form provides information about the devices, partitioning, file "
"system (including the BtrFS subvolumes, for example), and LVM and RAID "
"configuration."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:67
msgid ""
"For this example, we assume that the new client has a single device named "
"``/dev/sda``, and that it belongs to a non-UEFI system.  In this case, we "
"have only three partitions: one for the boot loader, one for swap and one "
"for the system.  We also expect to have an ext4 file system for the root "
"directory."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:68
msgid "Device 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:69 modules/salt/pages/yomi.adoc:96
msgid "Device: /dev/sda"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:70
msgid "Label: GPT"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:71
msgid "Initial Gap: 1{nbsp}MB"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:72
msgid "Create three partitions:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:73
msgid "Partition 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:74
msgid "Partition Number: 1"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:75
msgid "Partition Size: 1{nbsp}MB"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:76
msgid "Partition Type: boot"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:77
msgid "Partition 2:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:78
msgid "Partition Number: 2"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:79
msgid "Partition Size: 1024{nbsp}MB"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:80
msgid "Partition Type: swap"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:81
msgid "Partition 3:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:82
msgid "Partition Number: 3"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:83
msgid "Partition Size: rest"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:84
msgid "Partition Type: linux"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:85
msgid "Create two file systems:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:86
msgid "Filesystem 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:87
msgid "Partition: /dev/sda2"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:88
msgid "Filesystem: swap"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:89
msgid "Filesystem 2:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:90
msgid "Partition: /dev/sda3"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:91
msgid "Filesystem: ext4"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:92
msgid "Mountpoint: /"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:94
msgid "This sub-form provides details required for GRUB."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:95
msgid "Set these parameters:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:97
msgid "Theme: selected"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:98
msgid ""
"The [parameter]``Kernel`` parameter can be used for the GRUB ``append`` "
"section."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:100
msgid ""
"This form provides the different repositories and packages to install.  You "
"can also register the product in this form, using SUSEConnect, and install "
"the different modules after registering."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:101
msgid ""
"For this example we are going to install a very minimal openSUSE Tumbleweed "
"distribution, using publicly available repositories.  For production "
"deployments, you will need to provide a local repository."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:102
msgid "Add a new repository:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:103
msgid "Repository Name: repo-oss"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:104
msgid "Repository URL: http://download.opensuse.org/tumbleweed/repo/oss/"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:105
msgid "Add these packages:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:106
msgid "pattern:enhanced_base"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:107
msgid "glibc-locale"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:108
msgid "kernel-default"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:109
msgid ""
"You can also add patterns and products, together with packages, by using the "
"correct prefix."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:111
msgid ""
"By default Yomi is installed with the ``salt-minion`` service, but you must "
"enable it."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:112
msgid "Add a new enabled service:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:113
msgid "Service 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:114
msgid "Service: salt-minion"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:116
msgid ""
"This form sets out the system users.  In this example, we have a single root "
"user.  To provide a password, you must use the hashed version of the "
"password, not the plain text.  This behavior is set to be changed in future "
"versions of Yomi."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:117
msgid "User 1:"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:118
msgid "Username: root"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:119
msgid "Password Hash: $1$wYJUgpM5$RXMMeASDc035eXNbYWFl0"
msgstr ""

#. type: Title ==
#: modules/salt/pages/yomi.adoc:120
#, no-wrap
msgid "Monitor the Installation"
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:121
msgid ""
"You can monitor the installation as it progresses, using the ``monitor`` "
"tool from Yomi.  You can continue monitoring as the highstate is applied to "
"the new client.  To use the tool, you will need to have enabled ``Events`` "
"in the Yomi formula, and have the ``salt-api`` service activated."
msgstr ""

#. type: Plain text
#: modules/salt/pages/yomi.adoc:122
msgid ""
"For more information about the ``salt-api`` service, and how to use the "
"``monitor`` tool, see https://github.com/openSUSE/yomi."
msgstr ""
