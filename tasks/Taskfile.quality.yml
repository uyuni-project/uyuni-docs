# tasks/Taskfile.quality.yml
# Validation and quality check tasks
# yaml-language-server: $schema=https://taskfile.dev/schema.json

version: '3'

tasks:
  # ==============================================================================
  # QUALITY & VALIDATION TASKS
  # ==============================================================================
  
  validate:
    desc: Validate documentation structure and links
    summary: |
      Validates documentation using Antora's xref-validator.
      Checks for broken links, missing pages, etc.
      
      Variables:
        PRODUCT=uyuni|mlm       (default: uyuni)
        LANG=en|ja|ko|zh_CN     (default: en)
      
      Examples:
        task quality:validate
        task quality:validate PRODUCT=mlm LANG=ja
    cmds:
      - task: config:{{.PRODUCT}}
      - python3 scripts/validate.py {{.PRODUCT}} {{.LANG}}

  checkstyle:
    desc: Check AsciiDoc style compliance
    summary: |
      Runs Vale linter to check documentation style.
      
      Examples:
        task quality:checkstyle
    cmds:
      - bash enforcing_checkstyle check

  checkstyle:fix:
    desc: Auto-fix AsciiDoc style issues
    summary: |
      Automatically fixes style issues where possible.
      
      Examples:
        task quality:checkstyle:fix
    cmds:
      - bash enforcing_checkstyle fix

  links:
    desc: Check for broken external links
    summary: |
      Scans documentation for broken external links.
      
      Examples:
        task quality:links
    cmds:
      - echo "Link checking not yet implemented"
      # Could use: lychee, broken-link-checker, etc.
